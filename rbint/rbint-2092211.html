





<!DOCTYPE html>
<html lang="en">

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.5.1 (ngdb v1.2.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Interrupts</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-2091796.html">
    <link rel="next" href="rbint-2096625.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="../index.html">Guides</a></li>


          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-2091796.html">Previous</a></li>


          

<li><a href="rbint-2061504.html">Up</a></li>


          

<li><a href="rbint-2096625.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <div id="body">

      
        <nav class="menu box">
          <ul>
              <li>Lists</li>
              <li>
                <ul>
                  <li><a href="index.html">Comments</a></li>
                  <li><a href="rbint-7995.html">Interrupts</a></li>
                  <li><a href="rbint-15401.html">Glossary</a></li>
                  <li><a href="rbint-64347.html">Memory</a></li>
                  <li><a href="rbint-180090.html">CMOS</a></li>
                  <li><a href="rbint-250757.html">86 Bugs</a></li>
                  
                </ul>
              </li>
          </ul>
        </nav>
      

      <div id="entry" class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br><span class="line"><span class="ngu">Int 21 Fn 11  - Dos 1+ - Find First Matching File Using Fcb              </span>  [<span class="ngb">D</span>]</span><br><span class="line"></span><br><span class="line">   AH = 11h</span><br><span class="line">   DS:DX -&gt; unopened FCB (see #1034), may contain &#39;?&#39; wildcards</span><br><span class="line"></span><br><span class="line"><span class="ngb">Return:</span> AL = status</span><br><span class="line">       00h successful</span><br><span class="line">       [DTA] unopened FCB for first matching file</span><br><span class="line">       FFh no matching filename, or bad FCB</span><br><span class="line"></span><br><span class="line"><span class="ngb">Notes:</span> the type of the returned FCB depends on whether the input FCB was a</span><br><span class="line">     normal or an extended FCB</span><br><span class="line">   the data returned in the DTA (disk transfer area) is actually the</span><br><span class="line">     drive number (or extended FCB header and drive number) followed by</span><br><span class="line">     the file&#39;s directory entry (see #1041); this format happens to be</span><br><span class="line">     compatible with an unopened FCB</span><br><span class="line">   for extended FCBs with search attribute 08h, the volume label (if any)</span><br><span class="line">     will be returned even if the current directory is not the root dir.</span><br><span class="line">   DOS 3.0+ also allows the &#39;*&#39; wildcard</span><br><span class="line">   the search FCB must not be modified if AH=12h will be used to continue</span><br><span class="line">     searching; DOS 3.3 has set the following parts of the FCB:</span><br><span class="line">        0Ch    BYTE    ???</span><br><span class="line">        0Dh    WORD    directory entry number of matching file</span><br><span class="line">        0Fh    WORD    cluster number of current directory</span><br><span class="line">        11h  4 BYTEs   ???</span><br><span class="line">        15h    BYTE    drive number (1=A:)</span><br><span class="line">   this function is used by many copy protection schemes to obtain the</span><br><span class="line">     starting cluster of a file</span><br><span class="line"></span><br><span class="line"><span class="ngb">See Also:</span> AH=12h,AH=1Ah,AH=4Eh,INT 2F/AX=111Bh</span><br><span class="line"></span><br><span class="line">Format of DOS directory entry:</span><br><span class="line">Offset Size    Description (Table 1041)</span><br><span class="line"> 00h  8 BYTEs  blank-padded filename</span><br><span class="line">       first character is set to E5h for deleted files (05h for</span><br><span class="line">         pending delete files under Novell DOS / OpenDOS)</span><br><span class="line"> 08h  3 BYTEs  blank-padded file extension</span><br><span class="line"> 0Bh   BYTE    attributes</span><br><span class="line"> 0Ch 10 BYTEs  (MS-DOS 1.0-6.22) reserved</span><br><span class="line">       (DR DOS) used to store file password / owner (see #3763)</span><br><span class="line">           (see also INT 21/AX=4302h)</span><br><span class="line">       (Novell DOS 7) DELWATCH data (see #3763)</span><br><span class="line">       (MS-DOS 7/Windows95) additional file times (see #1042)</span><br><span class="line"> 16h   WORD    time of creation or last update (see #1351 at AX=5700h)</span><br><span class="line"> 18h   WORD    date of creation or last update (see #1352 at AX=5700h)</span><br><span class="line"> 1Ah   WORD    starting cluster number (see also AX=440Dh/CX=0871h)</span><br><span class="line"> 1Ch   DWORD   file size</span><br><span class="line"></span><br><span class="line"><span class="ngb">See Also:</span> #1043,#2315,#2316</span><br><span class="line"></span><br><span class="line">Format of MS-DOS 7/Windows95 additional file times:</span><br><span class="line">Offset Size    Description (Table 1042)</span><br><span class="line"> 00h   BYTE    reserved</span><br><span class="line"> 01h   BYTE    10-millisecond units past creation time below</span><br><span class="line"> 02h   WORD    file creation time</span><br><span class="line"> 04h   WORD    file creation date</span><br><span class="line"> 06h   WORD    last-access date</span><br><span class="line"> 08h   WORD    (FAT32) high word of starting cluster number</span><br><span class="line"></span><br><span class="line"><span class="ngb">Note:</span>  this data is stored beginning at offset 0Ch in a standard directory</span><br><span class="line">     entry</span><br><span class="line"></span><br><span class="line"><span class="ngb">See Also:</span> #1041</span><br><span class="line"></span><br><span class="line">Format of DR DOS 6/Novell DOS 7 additional file information:</span><br><span class="line">Offset Size    Description (Table 3763)</span><br><span class="line"> 0Ch   BYTE    reserved (00h)</span><br><span class="line"> 0Dh   BYTE    first character of original filename for deleted file</span><br><span class="line"> 0Eh   WORD    encrypted file/directory password</span><br><span class="line"> 10h   WORD    reserved (00h)</span><br><span class="line">       (Novell DOS 7 DELWATCH) original file time</span><br><span class="line">           cleared when file is undeleted or purged</span><br><span class="line"> 12h   WORD    (DR DOS 6) file owner ID</span><br><span class="line">       (Novell DOS 7 DELWATCH) original file date</span><br><span class="line">           cleared when file is undeleted or purged</span><br><span class="line"> 14h   WORD    single/multiuser file/directory access rights (see AX=4302h)</span><br><span class="line">---deleted files---</span><br><span class="line"> 16h   WORD    (Novell DOS 7 DELWATCH) time of deletion</span><br><span class="line"> 18h   WORD    (Novell DOS 7 DELWATCH) date of deletion</span><br><span class="line"></span><br><span class="line"><span class="ngb">Note:</span>  offsets are within the full directory entry</span><br><span class="line"></span><br><span class="line"><span class="ngb">See Also:</span> #1041</span><br><span class="line"></span><br><span class="line">Format of MS-DOS 7/Windows95 long-filename directory entry:</span><br><span class="line">Offset Size    Description (Table 1043)</span><br><span class="line"> 00h   BYTE    LFN record sequence and flags</span><br><span class="line">       bits 5-0: sequence number</span><br><span class="line">       bit 6: set if last long-filename record for file</span><br><span class="line">       bit 7: set if file deleted</span><br><span class="line"> 01h 10 BYTEs  long filename, first part</span><br><span class="line"> 0Bh   BYTE    0Fh (otherwise impossible file attribute, used as signature)</span><br><span class="line"> 0Ch   BYTE    reserved??? (00h)</span><br><span class="line"> 0Dh   BYTE    checksum for short filename</span><br><span class="line"> 0Eh 12 BYTEs  long filename, second part</span><br><span class="line"> 1Ah   WORD    first cluster number (always 0000h for LFN records)</span><br><span class="line"> 1Ch  4 BYTEs  long filename, third part</span><br><span class="line"></span><br><span class="line"><span class="ngb">Notes:</span> long-filename entries are always stored in the directory just prior</span><br><span class="line">     to the short-name entry for a file</span><br><span class="line">   multiple LFN records are used if the long filename does not fit into</span><br><span class="line">     a single record</span><br><span class="line">   the short-filename checksum byte is computed by adding up the</span><br><span class="line">     eleven bytes of the short filename, rotating the intermediate</span><br><span class="line">     sum right one bit before adding the next character</span><br><span class="line">   the long filename is encoded as 16-bit Unicode characters; for most</span><br><span class="line">     filenames, this appears in the directory as the ASCII character</span><br><span class="line">     followed by 00h</span><br><span class="line"></span><br><span class="line"><span class="ngb">See Also:</span> #1041,INT 21/AX=5704h,INT 21/AH=71h</span><br></pre>
  
  
  


      </div>

    </div>

    
      <footer>
        <nav class="box">
          <dl>
            <dt>Generated</dt><dd>2025-12-13 13:34:52</dd>
            <dt>Generator</dt><dd><a href="https://ng2web.davep.dev">ng2web v1.5.1 (ngdb v1.2.0)</a></dd>
          </dl>
        </nav>
      </footer>
    

  </body>

</html>

