





<!DOCTYPE html>
<html lang="en">

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.5.1 (ngdb v1.2.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Interrupts</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-2524127.html">
    <link rel="next" href="rbint-2546094.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="../index.html">Guides</a></li>


          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-2524127.html">Previous</a></li>


          

<li><a href="rbint-2471063.html">Up</a></li>


          

<li><a href="rbint-2546094.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <div id="body">

      
        <nav class="menu box">
          <ul>
              <li>Lists</li>
              <li>
                <ul>
                  <li><a href="index.html">Comments</a></li>
                  <li><a href="rbint-7995.html">Interrupts</a></li>
                  <li><a href="rbint-15401.html">Glossary</a></li>
                  <li><a href="rbint-64347.html">Memory</a></li>
                  <li><a href="rbint-180090.html">CMOS</a></li>
                  <li><a href="rbint-250757.html">86 Bugs</a></li>
                  
                </ul>
              </li>
          </ul>
        </nav>
      

      <div id="entry" class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br><span class="line"><span class="ngu"> 4fh  word    offset In Current Directory Path Of Backslash Corresponding To  <span class="ngb">(Cont.)</span></span></span><br><span class="line"></span><br><span class="line"> 5 buffer has been referenced (reserved in DOS 5+)</span><br><span class="line"> 4 search data buffer (only valid if remote buffer)</span><br><span class="line"> 3 sector in data area</span><br><span class="line"> 2 sector in a directory, either root or subdirectory</span><br><span class="line"> 1 sector in FAT</span><br><span class="line"> 0 reserved</span><br><span class="line"></span><br><span class="line"><span class="ngb">See Also:</span> #1337</span><br><span class="line"></span><br><span class="line">Format of DOS 5.0-6.0 disk buffer info:</span><br><span class="line">Offset Size    Description (Table 1343)</span><br><span class="line"> 00h   DWORD   pointer to least-recently-used buffer header (may be in HMA)</span><br><span class="line">       (see #1341)</span><br><span class="line"> 04h   WORD    number of dirty disk buffers</span><br><span class="line"> 06h   DWORD   pointer to lookahead buffer, zero if not present</span><br><span class="line"> 0Ah   WORD    number of lookahead sectors, else zero (the y in BUFFERS=x,y)</span><br><span class="line"> 0Ch   BYTE    buffer location</span><br><span class="line">       00h base memory, no workspace buffer</span><br><span class="line">       01h HMA, workspace buffer in base memory</span><br><span class="line"> 0Dh   DWORD   pointer to one-segment workspace buffer in base memory</span><br><span class="line"> 11h  3 BYTEs  unused</span><br><span class="line"> 14h   WORD    ???</span><br><span class="line"> 16h   BYTE    flag: INT 24 fail while making an I/O status call</span><br><span class="line"> 17h   BYTE    temp storage for user memory allocation strategy during EXEC</span><br><span class="line"> 18h   BYTE    counter: number of INT 21 calls for which A20 is off</span><br><span class="line"> 19h   BYTE    bit flags</span><br><span class="line">       bit 0: ???</span><br><span class="line">       bit 1: SWITCHES=/W specified in CONFIG.SYS (don&#39;t load</span><br><span class="line">           WINA20.SYS when MS Windows 3.0 starts)</span><br><span class="line">       bit 2: in EXEC state (INT 21/AX=4B05h)</span><br><span class="line"> 1Ah   WORD    offset of unpack code start (used only during INT 21/AX=4B05h)</span><br><span class="line"> 1Ch   BYTE    bit 0 set iff UMB MCB chain linked to normal MCB chain</span><br><span class="line"> 1Dh   WORD    minimum paragraphs of memory required by program being EXECed</span><br><span class="line"> 1Fh   WORD    segment of first MCB in upper memory blocks or FFFFh if DOS</span><br><span class="line">         memory chain in base 640K only (first UMB MCB usually at</span><br><span class="line">         9FFFh, locking out video memory with a DOS-owned memory</span><br><span class="line">         block)</span><br><span class="line">       the MCB this word points at contains a valid link into high</span><br><span class="line">         memory even if it is marked with a &#39;Z&#39; indicating the last</span><br><span class="line">         memory block</span><br><span class="line"> 21h   WORD    paragraph from which to start scanning during memory allocation</span><br><span class="line"></span><br><span class="line"><span class="ngb">See Also:</span> #1338,#1339</span><br><span class="line"></span><br><span class="line">(Table 1344)</span><br><span class="line">Call IFS utility function entry point with:</span><br><span class="line">   AH = 20h miscellaneous functions</span><br><span class="line">       AL = 00h get date</span><br><span class="line"></span><br><span class="line">       <span class="ngb">Return:</span> CX = year</span><br><span class="line">           DH = month</span><br><span class="line">           DL = day</span><br><span class="line">       AL = 01h get process ID and computer ID</span><br><span class="line"></span><br><span class="line">       <span class="ngb">Return:</span> BX = current PSP segment</span><br><span class="line">           DX = active network machine number</span><br><span class="line">       AL = 05h get file system info</span><br><span class="line">       ES:DI -&gt; 16-byte info buffer</span><br><span class="line"></span><br><span class="line">       <span class="ngb">Return:</span> buffer filled</span><br><span class="line">           Offset  Size    Description</span><br><span class="line">            00h  2 BYTEs   unused</span><br><span class="line">            02h    WORD    number of SFTs (actually counts only</span><br><span class="line">                   the first two file table arrays)</span><br><span class="line">            04h    WORD    number of FCB table entries</span><br><span class="line">            06h    WORD    number of proctected FCBs</span><br><span class="line">            08h  6 BYTEs   unused</span><br><span class="line">            0Eh    WORD    largest sector size supported</span><br><span class="line">       AL = 06h get machine name</span><br><span class="line">       ES:DI -&gt; 18-byte buffer for name</span><br><span class="line"></span><br><span class="line">       <span class="ngb">Return:</span> buffer filled with name starting at offset 02h</span><br><span class="line">       AL = 08h get sharing retry count</span><br><span class="line"></span><br><span class="line">       <span class="ngb">Return:</span> BX = sharing retry count</span><br><span class="line">       AL = other</span><br><span class="line"></span><br><span class="line">       <span class="ngb">Return:</span> CF set</span><br><span class="line">   AH = 21h get redirection state</span><br><span class="line">       BH = type (03h disk, 04h printer)</span><br><span class="line"></span><br><span class="line">       <span class="ngb">Return:</span> BH = state (00h off, 01h on)</span><br><span class="line">   AH = 22h ??? some sort of time calculation</span><br><span class="line">       AL = 00h ???</span><br><span class="line">           nonzero ???</span><br><span class="line">   AH = 23h ??? some sort of time calculation</span><br><span class="line">   AH = 24h compare filenames</span><br><span class="line">       DS:SI -&gt; first ASCIZ filename</span><br><span class="line">       ES:DI -&gt; second ASCIZ filename</span><br><span class="line"></span><br><span class="line">       <span class="ngb">Return:</span> ZF set if files are same ignoring case and / vs \</span><br><span class="line">   AH = 25h normalize filename</span><br><span class="line">       DS:SI -&gt; ASCIZ filename</span><br><span class="line">       ES:DI -&gt; buffer for result</span><br><span class="line"></span><br><span class="line">       <span class="ngb">Return:</span> filename uppercased, forward slashes changed to backslashes</span><br><span class="line">   AH = 26h get DOS stack</span><br><span class="line"></span><br><span class="line">       <span class="ngb">Return:</span> DS:SI -&gt; top of stack</span><br><span class="line">           CX = size of stack in bytes</span><br><span class="line">   AH = 27h increment InDOS flag</span><br><span class="line">   AH = 28h decrement InDOS flag</span><br><span class="line"></span><br><span class="line"><span class="ngb">Note:</span>  IFS drivers which do not wish to implement functions 20h or 24h-28h may</span><br><span class="line">     pass them on to the default handler pointed at by [LoL+37h]</span><br><span class="line"></span><br><span class="line"><span class="ngb">See Also:</span> #1345,#1346</span><br><span class="line"></span><br><span class="line">Format of IFS driver list:</span><br><span class="line">Offset Size    Description (Table 1345)</span><br><span class="line"> 00h   DWORD   pointer to next driver header</span><br><span class="line"> 04h  8 BYTEs  IFS driver name (blank padded), as used by FILESYS command</span><br><span class="line"> 0Ch  4 BYTEs  ???</span><br><span class="line"> 10h   DWORD   pointer to IFS utility function entry point (see #1344)</span><br><span class="line">       call with ES:BX -&gt; IFS request (see #1346)</span><br><span class="line"> 14h   WORD    offset in header&#39;s segment of driver entry point</span><br><span class="line">   ???</span><br><span class="line"></span><br><span class="line"><span class="ngb">See Also:</span> #1344,#1346</span><br><span class="line"></span><br><span class="line">Format of IFS request block:</span><br><span class="line">Offset Size    Description (Table 1346)</span><br><span class="line"> 00h   WORD    total size in bytes of request</span><br><span class="line"> 02h   BYTE    class of request</span><br><span class="line">       02h ???</span><br><span class="line">       03h redirection</span><br><span class="line">       04h ???</span><br><span class="line">       05h file access</span><br><span class="line">       06h convert error code to string</span><br><span class="line">       07h ???</span><br><span class="line"> 03h   WORD    returned DOS error code</span><br><span class="line"> 05h   BYTE    IFS driver exit status</span><br><span class="line">       00h success</span><br><span class="line">       01h ???</span><br><span class="line">       02h ???</span><br><span class="line">       03h ???</span><br><span class="line">       04h ???</span><br><span class="line">       FFh internal failure</span><br><span class="line"> 06h 16 BYTEs  ???</span><br><span class="line">---request class 02h---</span><br><span class="line"> 16h   BYTE    function code</span><br><span class="line">       04h ???</span><br><span class="line"> 17h   BYTE    unused???</span><br><span class="line"> 18h   DWORD   pointer to ???</span><br><span class="line"> 1Ch   DWORD   pointer to ???</span><br><span class="line"> 20h  2 BYTEs  ???</span><br><span class="line">---request class 03h---</span><br><span class="line"> 16h   BYTE    function code</span><br><span class="line"> 17h   BYTE    ???</span><br><span class="line"> 18h   DWORD   pointer to ???</span><br><span class="line"> 1Ch   DWORD   pointer to ???</span><br><span class="line"> 22h   WORD    returned ???</span><br><span class="line"> 24h   WORD    returned ???</span><br><span class="line"> 26h   WORD    returned ???</span><br><span class="line"> 28h   BYTE    returned ???</span><br><span class="line"> 29h   BYTE    unused???</span><br><span class="line">---request class 04h---</span><br><span class="line"> 16h   DWORD   pointer to ???</span><br><span class="line"> 1Ah   DWORD   pointer to ???</span><br><span class="line">---request class 05h---</span><br><span class="line"> 16h   BYTE    function code</span><br><span class="line">       01h flush disk buffers</span><br><span class="line">       02h get disk space</span><br><span class="line">       03h MKDIR</span><br><span class="line">       04h RMDIR</span><br><span class="line">       05h CHDIR</span><br><span class="line">       06h delete file</span><br><span class="line">       07h rename file</span><br><span class="line">       08h search directory</span><br><span class="line">       09h file open/create</span><br><span class="line">       0Ah LSEEK</span><br><span class="line">       0Bh read from file</span><br><span class="line">       0Ch write to file</span><br><span class="line">       0Dh lock region of file</span><br><span class="line">       0Eh commit/close file</span><br><span class="line">       0Fh get/set file attributes</span><br><span class="line">       10h printer control</span><br><span class="line">       11h ???</span><br><span class="line">       12h process termination</span><br><span class="line">       13h ???</span><br><span class="line">   ---class 05h function 01h---</span><br><span class="line">    17h  7 BYTEs   ???</span><br><span class="line">    1Eh    DWORD   pointer to ???</span><br><span class="line">    22h  4 BYTEs   ???</span><br><span class="line">    26h    BYTE    ???</span><br><span class="line">    27h    BYTE    ???</span><br><span class="line">   ---class 05h function 02h---</span><br><span class="line">    17h  7 BYTEs   ???</span><br><span class="line">    1Eh    DWORD   pointer to ???</span><br><span class="line">    22h  4 BYTEs   ???</span><br><span class="line">    26h    WORD    returned total clusters</span><br><span class="line">    28h    WORD    returned sectors per cluster</span><br><span class="line">    2Ah    WORD    returned bytes per sector</span><br><span class="line">    2Ch    WORD    returned available clusters</span><br><span class="line">    2Eh    BYTE    returned ???</span><br><span class="line">    2Fh    BYTE    ???</span><br><span class="line">   ---class 05h functions 03h,04h,05h---</span><br><span class="line">    17h  7 BYTEs   ???</span><br><span class="line">    1Eh    DWORD   pointer to ???</span><br><span class="line">    22h  4 BYTEs   ???</span><br><span class="line">    26h    DWORD   pointer to directory name</span><br><span class="line">   ---class 05h function 06h---</span><br><span class="line">    17h  7 BYTEs   ???</span><br><span class="line">    1Eh    DWORD   pointer to ???</span><br><span class="line">    22h  4 BYTEs   ???</span><br><span class="line">    26h    WORD    attribute mask</span><br><span class="line">    28h    DWORD   pointer to filename</span><br><span class="line">   ---class 05h function 07h---</span><br><span class="line">    17h  7 BYTEs   ???</span><br><span class="line">    1Eh    DWORD   pointer to ???</span><br><span class="line">    22h  4 BYTEs   ???</span><br><span class="line">    26h    WORD    attribute mask</span><br><span class="line">    28h    DWORD   pointer to source filespec</span><br><span class="line">    2Ch    DWORD   pointer to destination filespec</span><br><span class="line">   ---class 05h function 08h---</span><br><span class="line">    17h  7 BYTEs   ???</span><br><span class="line">    1Eh    DWORD   pointer to ???</span><br><span class="line">    22h  4 BYTEs   ???</span><br><span class="line">    26h    BYTE    00h FINDFIRST</span><br><span class="line">           01h FINDNEXT</span><br><span class="line">    28h    DWORD   pointer to FindFirst search data + 01h if FINDNEXT</span><br><span class="line">    2Ch    WORD    search attribute if FINDFIRST</span><br><span class="line">    2Eh    DWORD   pointer to filespec if FINDFIRST</span><br><span class="line">   ---class 05h function 09h---</span><br><span class="line">    17h  7 BYTEs   ???</span><br><span class="line">    1Eh    DWORD   pointer to ???</span><br><span class="line">    22h    DWORD   pointer to IFS open file structure (see #1347)</span><br><span class="line">    26h    WORD    ???  \ together, specify open vs. create, whether or</span><br><span class="line">    28h    WORD    ???  / not to truncate</span><br><span class="line">    2Ah  4 BYTEs   ???</span><br><span class="line">    2Eh    DWORD   pointer to filename</span><br><span class="line">    32h  4 BYTEs   ???</span><br><span class="line">    36h    WORD    file attributes on call</span><br><span class="line">           returned ???</span><br><span class="line">    38h    WORD    returned ???</span><br><span class="line">   ---class 05h function 0Ah---</span><br><span class="line">    17h  7 BYTEs   ???</span><br><span class="line">    1Eh    DWORD   pointer to ???</span><br><span class="line">    22h    DWORD   pointer to IFS open file structure (see #1347)</span><br><span class="line">    26h    BYTE    seek type (02h = from end)</span><br><span class="line">    28h    DWORD   offset on call</span><br><span class="line">           returned new absolute position</span><br><span class="line">   ---class 05h functions 0Bh,0Ch---</span><br><span class="line">    17h  7 BYTEs   ???</span><br><span class="line">    1Eh    DWORD   pointer to ???</span><br><span class="line">    22h    DWORD   pointer to IFS open file structure (see #1347)</span><br><span class="line">    28h    WORD    number of bytes to transfer</span><br><span class="line">           returned bytes actually transferred</span><br><span class="line">    2Ah    DWORD   transfer address</span><br><span class="line">   ---class 05h function 0Dh---</span><br><span class="line">    17h  7 BYTEs   ???</span><br><span class="line">    1Eh    DWORD   pointer to ???</span><br><span class="line">    22h    DWORD   pointer to IFS open file structure (see #1347)</span><br><span class="line">    26h    BYTE    file handle???</span><br><span class="line">    27h    BYTE    unused???</span><br><span class="line">    28h    WORD    ???</span><br><span class="line">    2Ah    WORD    ???</span><br><span class="line">    2Ch    WORD    ???</span><br><span class="line">    2Eh    WORD    ???</span><br><span class="line">   ---class 05h function 0Eh---</span><br><span class="line">    17h  7 BYTEs   ???</span><br><span class="line">    1Eh    DWORD   pointer to ???</span><br><span class="line">    22h    DWORD   pointer to IFS open file structure (see #1347)</span><br><span class="line">    26h    BYTE    00h commit file</span><br><span class="line">           01h close file</span><br><span class="line">    27h    BYTE    unused???</span><br><span class="line">   ---class 05h function 0Fh---</span><br><span class="line">    17h  7 BYTEs   ???</span><br><span class="line">    1Eh    DWORD   pointer to ???</span><br><span class="line">    22h  4 BYTEs   ???</span><br><span class="line">    26h    BYTE    02h GET attributes</span><br><span class="line">           03h PUT attributes</span><br><span class="line">    27h    BYTE    unused???</span><br><span class="line">    28h 12 BYTEs   ???</span><br><span class="line">    34h    WORD    search attributes???</span><br><span class="line">    36h    DWORD   pointer to filename</span><br><span class="line">    3Ah    WORD    (GET) returned ???</span><br><span class="line">    3Ch    WORD    (GET) returned ???</span><br><span class="line">    3Eh    WORD    (GET) returned ???</span><br><span class="line">    40h    WORD    (GET) returned ???</span><br><span class="line">    42h    WORD    (PUT) new attributes</span><br><span class="line">           (GET) returned attributes</span><br><span class="line">   ---class 05h function 10h---</span><br><span class="line">    17h  7 BYTEs   ???</span><br><span class="line">    1Eh    DWORD   pointer to ???</span><br><span class="line">    22h    DWORD   pointer to IFS open file structure (see #1347)</span><br><span class="line">    26h    WORD    ???</span><br><span class="line">    28h    DWORD   pointer to ???</span><br><span class="line">    2Ch    WORD    ???</span><br><span class="line">    2Eh    BYTE    ???</span><br><span class="line">    2Fh    BYTE    subfunction</span><br><span class="line">           01h get printer setup</span><br><span class="line">           03h ???</span><br><span class="line">           04h ???</span><br><span class="line">           05h ???</span><br><span class="line">           06h ???</span><br><span class="line">           07h ???</span><br><span class="line">           21h set printer setup</span><br><span class="line">   ---class 05h function 11h---</span><br><span class="line">    17h  7 BYTEs   ???</span><br><span class="line">    1Eh    DWORD   pointer to ???</span><br><span class="line">    22h    DWORD   pointer to IFS open file structure (see #1347)</span><br><span class="line">    26h    BYTE    subfunction</span><br><span class="line">    27h    BYTE    unused???</span><br><span class="line">    28h    WORD    ???</span><br><span class="line">    2Ah    WORD    ???</span><br><span class="line">    2Ch    WORD    ???</span><br><span class="line">    2Eh    BYTE    ???</span><br><span class="line">    2Fh    BYTE    ???</span><br><span class="line">   ---class 05h function 12h---</span><br><span class="line">    17h 15 BYTEs   unused???</span><br><span class="line">    26h    WORD    PSP segment</span><br><span class="line">    28h    BYTE    type of process termination</span><br><span class="line">    29h    BYTE    unused???</span><br><span class="line">   ---class 05h function 13h---</span><br><span class="line">    17h 15 BYTEs   unused???</span><br><span class="line">    26h    WORD    PSP segment</span><br><span class="line">---request class 06h---</span><br><span class="line"> 16h   DWORD   returned pointer to string corresponding to error code at 03h</span><br><span class="line"> 1Ah   BYTE    returned ???</span><br><span class="line"> 1Bh   BYTE    unused</span><br><span class="line">---request class 07h---</span><br><span class="line"> 16h   DWORD   pointer to IFS open file structure (see #1347)</span><br><span class="line"> 1Ah   BYTE    ???</span><br><span class="line"> 1Bh   BYTE    unused???</span><br><span class="line"></span><br><span class="line"><span class="ngb">See Also:</span> #1345,#1344,#1347</span><br><span class="line"></span><br><span class="line">Format of IFS open file structure:</span><br><span class="line">Offset Size    Description (Table 1347)</span><br><span class="line"> 00h   WORD    ???</span><br><span class="line"> 02h   WORD    device info word</span><br><span class="line"> 04h   WORD    file open mode</span><br><span class="line"> 06h   WORD    ???</span><br><span class="line"> 08h   WORD    file attributes</span><br><span class="line"> 0Ah   WORD    owner&#39;s network machine number</span><br><span class="line"> 0Ch   WORD    owner&#39;s PSP segment</span><br><span class="line"> 0Eh   DWORD   file size</span><br><span class="line"> 12h   DWORD   current offset in file</span><br><span class="line"> 16h   WORD    file time</span><br><span class="line"> 18h   WORD    file date</span><br><span class="line"> 1Ah 11 BYTEs  filename in FCB format</span><br><span class="line"> 25h   WORD    ???</span><br><span class="line"> 27h   WORD    hash value of SFT address</span><br><span class="line">       (low word of linear address + segment&amp;F000h)</span><br><span class="line"> 29h  3 WORDs  network info from SFT</span><br><span class="line"> 2Fh   WORD    ???</span><br><span class="line"></span><br><span class="line">Format of one item in DOS 4.0+ list of special program names:</span><br><span class="line">Offset Size    Description (Table 1348)</span><br><span class="line"> 00h   BYTE    length of name (00h = end of list)</span><br><span class="line"> 01h  N BYTEs  name in format name.ext</span><br><span class="line"> N    2 BYTEs  DOS version to return for program (major,minor)</span><br><span class="line">       (see AH=30h,INT 2F/AX=122Fh)</span><br><span class="line">---DOS 4 only---</span><br><span class="line"> N+2   BYTE    number of times to return fake version number (FFh = always)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="ngb">.NG limit reached, continued in next section...</span></span><br></pre>
  
  
  


      </div>

    </div>

    
      <footer>
        <nav class="box">
          <dl>
            <dt>Generated</dt><dd>2025-12-13 13:34:52</dd>
            <dt>Generator</dt><dd><a href="https://ng2web.davep.dev">ng2web v1.5.1 (ngdb v1.2.0)</a></dd>
          </dl>
        </nav>
      </footer>
    

  </body>

</html>

