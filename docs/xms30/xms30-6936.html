





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="xms30-style.css">
    <title>XMS Specification  (version 3.0) » XMS » Overview</title>
    <meta name="description" content="XMS Specification  (version 3.0)">
    <link rel="prev" href="xms30-5768.html">
    <link rel="next" href="xms30-8716.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="../index.html">Guides</a></li>


          

<li><a href="xms30-about.html">About</a></li>


          

<li><a href="xms30-5768.html">Previous</a></li>


          

<li><a href="index.html">Up</a></li>


          

<li><a href="xms30-8716.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>XMS</li>
            <ul>
              <li><a href="index.html">Overview</a></li>
              <li><a href="xms30-18951.html">XMS API</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"><span class="ngb">PRIORITIZING HMA USAGE</span></span><br /><span class="line"></span><br /><span class="line">For DOS users to receive the maximum benefit from the High Memory Area,</span><br /><span class="line">programs which use the HMA must store as much of their resident code in</span><br /><span class="line">it as is possible. It is very important that developers realize that the</span><br /><span class="line">HMA is allocated as a single unit.</span><br /><span class="line"></span><br /><span class="line">For example, a TSR program which grabs the HMA and puts 10K of code into</span><br /><span class="line">it may prevent a later TSR from putting 62K into the HMA.  Obviously,</span><br /><span class="line">regular DOS programs would have more memory available to them below the</span><br /><span class="line">640K line if the 62K TSR was moved into the HMA instead of the 10K one.</span><br /><span class="line"></span><br /><span class="line">♀The first method for dealing with conflicts such as this is to require</span><br /><span class="line">programs which use the HMA to provide a command line option for</span><br /><span class="line">disabling this feature.  It is crucial that TSRs which do not make full</span><br /><span class="line">use of the HMA provide such a switch on their own command line</span><br /><span class="line">(suggested name &#34;/NOHMA&#34;).</span><br /><span class="line"></span><br /><span class="line">The second method for optimizing HMA usage is through the</span><br /><span class="line">/HMAMIN=parameter on the XMS device driver line.  The number after the</span><br /><span class="line">parameter is defined to be the minimum amount of HMA space (in K-bytes)</span><br /><span class="line">used by any driver or TSR. For example, if &#34;DEVICE=HIMEM.SYS /HMAMIN=48&#34;</span><br /><span class="line">is in a user&#39;s CONFIG.SYS file, only programs which request at least 48K</span><br /><span class="line">would be allowed to allocate the HMA.  This number can be adjusted</span><br /><span class="line">either by installation programs or by the user himself.  If this</span><br /><span class="line">parameter is not specified, the default value of 0 is used causing the</span><br /><span class="line">HMA to be allocated on a first come, first served basis.</span><br /><span class="line"></span><br /><span class="line">Note that this problem does not impact application programs.  If the HMA</span><br /><span class="line">is available when an application program starts, the application is free</span><br /><span class="line">to use as much or as little of the HMA as it wants.  For this reason,</span><br /><span class="line">applications should pass FFFFh in DX when calling Function 01h.</span><br /></pre>
  
  
  


      </article>

    </section>

  </body>

</html>

