





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.2.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="progref-style.css">
    <title>Programmers Reference 0.02b » DOS » Functions</title>
    <meta name="description" content="Programmers Reference 0.02b">
    <link rel="prev" href="progref-136262.html">
    <link rel="next" href="progref-145517.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="../index.html">Guides</a></li>


          

<li><a href="progref-about.html">About</a></li>


          

<li><a href="progref-136262.html">Previous</a></li>


          

<li><a href="progref-75576.html">Up</a></li>


          

<li><a href="progref-145517.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      
        <nav class="menu box">
          <ul>
              <li>Low Level</li>
              <ul>
                <li><a href="index.html">BIOS Interrupts</a></li>
                <li><a href="progref-27119.html">Low Memory Usage</a></li>
                <li><a href="progref-66179.html">I/O Addresses</a></li>
                <li><a href="progref-69857.html">Device Adapters</a></li>
                <li><a href="progref-71828.html">System ID-Byte</a></li>
                <li><a href="progref-72459.html">POST</a></li>
                <li><a href="progref-73742.html">Flags Register</a></li>
                
              </ul>
              <li>DOS</li>
              <ul>
                <li><a href="progref-75576.html">Functions</a></li>
                <li><a href="progref-202334.html">Interrupts</a></li>
                <li><a href="progref-217806.html">Error Codes</a></li>
                <li><a href="progref-221299.html">File Attributes</a></li>
                <li><a href="progref-223104.html">Standard Handles</a></li>
                <li><a href="progref-225061.html">PSP Description</a></li>
                <li><a href="progref-227007.html">FCB Fields</a></li>
                
              </ul>
              <li>Xtensions</li>
              <ul>
                <li><a href="progref-229144.html">Mouse Driver</a></li>
                <li><a href="progref-251183.html">EMS Driver</a></li>
                <li><a href="progref-268819.html">Fossil Driver</a></li>
                <li><a href="progref-292076.html">NetBios</a></li>
                <li><a href="progref-292575.html">Windows</a></li>
                
              </ul>
              <li>Misc.</li>
              <ul>
                <li><a href="progref-293074.html">ASCII Chart</a></li>
                <li><a href="progref-298047.html">Line Drawing Chars</a></li>
                <li><a href="progref-298869.html">Special Characters</a></li>
                <li><a href="progref-300756.html">Color Chart</a></li>
                <li><a href="progref-302236.html">Keyboard Codes</a></li>
                <li><a href="progref-314224.html">Credits</a></li>
                <li><a href="progref-314503.html">Future additions</a></li>
                
              </ul>
          </ul>
        </nav>
      

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"><span class="ngb">Function 3Dh (61)        Open a File</span></span><br /><span class="line"></span><br /><span class="line">    Opens a file with the specified access code.</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">On entry:</span>      AH         3Dh</span><br /><span class="line">                      AL         Open mode</span><br /><span class="line">                      DS:DX      Pointer to filename (ASCIIZ string)</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Returns:</span>       AX         File handle</span><br /><span class="line">                                 Error code, if CF is set</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Error codes:</span>   1          Function number invalid</span><br /><span class="line">                      2          File not found</span><br /><span class="line">                      3          Path not found</span><br /><span class="line">                      4          No handle available</span><br /><span class="line">                      5          Access denied</span><br /><span class="line">                      12         Open mode invalid</span><br /><span class="line"></span><br /><span class="line">                      Call Function 59h for extended error code information</span><br /><span class="line">                      (DOS 3.0 and above).</span><br /><span class="line"></span><br /><span class="line">  ──────────────────────────────────────────────────────────────────────────</span><br /><span class="line"></span><br /><span class="line">    This function opens the file whose pathname is specified in the ASCIIZ</span><br /><span class="line">    string at DS:DX using the &#34;open mode&#34; byte to determine how the file</span><br /><span class="line">    may be accessed. The function opens any existing file, including</span><br /><span class="line">    hidden files, and sets the record size to 1 byte.</span><br /><span class="line"></span><br /><span class="line">  ──────────────────────────────────────────────────────────────────────────</span><br /><span class="line">  <span class="ngb">Open Mode Coding in AL</span></span><br /><span class="line"></span><br /><span class="line"><span class="ngb">              AL</span></span><br /><span class="line"><span class="ngb">          Bit Number             Open Mode            DOS 2.x usage</span></span><br /><span class="line">        <span class="ngu">7 6 5 4 3 2 1 0</span></span><br /><span class="line">        . . . . . A A A          Access mode          Read/Write access</span><br /><span class="line">        . . . . R . . .          Reserved             Always 0</span><br /><span class="line">        . S S S . . . .          Sharing mode         Must be 0 in DOS 2</span><br /><span class="line">        I . . . . . . .          Inheritance flag     Must be 0 in DOS 2</span><br /><span class="line"></span><br /><span class="line">  ───────────────────────────────────────────────────────────────────────────</span><br /><span class="line"><span class="ngb">  Access Mode (lower three bits of AL):</span></span><br /><span class="line"></span><br /><span class="line">    The low-order three bits (access mode) are used in the same manner in</span><br /><span class="line">    both DOS 2 and 3. These bits indicate allowable access (read, write,</span><br /><span class="line">    or read/write).</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">             Bit           Hex       Access Mode</span></span><br /><span class="line">            <span class="ngu">2 1 0</span></span><br /><span class="line">            0 0 0           0        Read-only access</span><br /><span class="line">            0 0 1           1        Write-only access</span><br /><span class="line">            0 1 0           2        Read/write access</span><br /><span class="line"></span><br /><span class="line">  ───────────────────────────────────────────────────────────────────────────</span><br /><span class="line"><span class="ngb">  Bit 3 Reserved (must always be zero)</span></span><br /><span class="line"></span><br /><span class="line">  ───────────────────────────────────────────────────────────────────────────</span><br /><span class="line"><span class="ngb">  Sharing Mode (Bits 4, 5, and 6 of AL) ── DOS 3.0 and above</span></span><br /><span class="line"></span><br /><span class="line">    In DOS 3.0 and above, bits 4, 5, and 6 specify a sharing mode (must be</span><br /><span class="line">    set to 0 in DOS 2.x). These bits govern the manner (if any) in which</span><br /><span class="line">    other users on a network may open and use the file after you have</span><br /><span class="line">    opened it. The following settings (and no others) are valid:</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">             Bit           Hex       Sharing Mode</span></span><br /><span class="line">            <span class="ngu">6 5 4</span></span><br /><span class="line">            0 0 0           0        Compatibility mode</span><br /><span class="line">            0 0 1           1        Deny Read/Write mode (Exclusive mode)</span><br /><span class="line">            0 1 0           2        Deny Write mode</span><br /><span class="line">            0 1 1           3        Deny Read mode</span><br /><span class="line">            1 0 0           4        Deny None mode</span><br /><span class="line"></span><br /><span class="line">  ───────────────────────────────────────────────────────────────────────────</span><br /><span class="line"><span class="ngb">  Inheritance Flag (bit 7 of AL) ── DOS 3.0 and above</span></span><br /><span class="line"></span><br /><span class="line">    The Inheritance Flag (bit 7), specifies whether or not child processes</span><br /><span class="line">    will inherit the use of this file. If bit 7 is 0, child processes</span><br /><span class="line">    automatically have access to the file. If bit 7 is 1, the file is not</span><br /><span class="line">    automatically available to child processes. Like any other process,</span><br /><span class="line">    however, a child process can request access to the file on a shared</span><br /><span class="line">    basis; see the discussion of sharing/access mode interactions, below.</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">            Bit 7         Inheritance Flag</span></span><br /><span class="line">              0           File is inherited by child processes</span><br /><span class="line">              1           File is not inherited</span><br /><span class="line"></span><br /><span class="line">  ───────────────────────────────────────────────────────────────────────────</span><br /><span class="line"><span class="ngb">  Availability of an opened file to subsequent processes</span></span><br /><span class="line"></span><br /><span class="line">    Once a file has been opened by a process, the availability of that</span><br /><span class="line">    file to other processes is determined by both the sharing mode and</span><br /><span class="line">    access mode of the original process as well as by the sharing mode and</span><br /><span class="line">    access mode specified by the subsequent process. Here is a case-by-</span><br /><span class="line">    case overview of these interactions:</span><br /><span class="line"></span><br /><span class="line">     <span class="ngb">1.</span>  The file is first opened in compatibility sharing mode.  A file</span><br /><span class="line">         is considered to be in &#34;compatibility&#34; mode if it is opened:</span><br /><span class="line"></span><br /><span class="line">         ■   via an FCB function</span><br /><span class="line">         ■   via any of the CREATE functions</span><br /><span class="line">         ■   via any handle function call in which compatibility mode is</span><br /><span class="line">             specified.</span><br /><span class="line"></span><br /><span class="line">    A file in compatibility mode may be opened any number of times by a</span><br /><span class="line">    single process, unless the file is already open under one of the other</span><br /><span class="line">    four sharing modes. If the file has the read-only attribute, however,</span><br /><span class="line">    and it is currently open in Deny Write sharing mode with Read access,</span><br /><span class="line">    the file may be opened in Compatibility mode with Read access.</span><br /><span class="line"></span><br /><span class="line">     <span class="ngb">2.</span>  The file is opened in one of the other sharing modes.  See the</span><br /><span class="line">         table below.</span><br /><span class="line"></span><br /><span class="line">┌─────────────────────────┬──────────────────────────────────────────────────┐</span><br /><span class="line">│<span class="ngb">A file first opened in</span>   │   <span class="ngb">May be reopened in</span>                             │</span><br /><span class="line">├─────────────────────────┼──────────────────────────────────────────────────┤</span><br /><span class="line">│Deny Read/Write mode,    │   May not be reopened                            │</span><br /><span class="line">│Read Only access         │                                                  │</span><br /><span class="line">│        (AL=X0010000)    │                                                  │</span><br /><span class="line">├─────────────────────────┼──────────────────────────────────────────────────┤</span><br /><span class="line">│Deny Read/Write mode,    │   May not be reopened                            │</span><br /><span class="line">│Write Only access        │                                                  │</span><br /><span class="line">│        (AL=X0010001)    │                                                  │</span><br /><span class="line">├─────────────────────────┼──────────────────────────────────────────────────┤</span><br /><span class="line">│Deny Read/Write mode,    │   May not be reopened                            │</span><br /><span class="line">│Read/Write access        │                                                  │</span><br /><span class="line">│        (AL=X0010010)    │                                                  │</span><br /><span class="line">├─────────────────────────┼──────────────────────────────────────────────────┤</span><br /><span class="line">│Deny Write mode,         │   Deny Write, Read Only         (AL = x0100000)  │</span><br /><span class="line">│Read Only access         │   Deny None, Read Only          (AL = x1000000)  │</span><br /><span class="line">│        (AL=X0100000)    │                                                  │</span><br /><span class="line">├─────────────────────────┼──────────────────────────────────────────────────┤</span><br /><span class="line">│Deny Write mode,         │   Deny Read, Read Only          (AL = x0110000)  │</span><br /><span class="line">│Write Only access        │   Deny None, Read Only          (AL = x1000000)  │</span><br /><span class="line">│        (AL=X0100001)    │                                                  │</span><br /><span class="line">├─────────────────────────┼──────────────────────────────────────────────────┤</span><br /><span class="line">│Deny Write mode,         │   Deny None, Read Only          (AL = x1000000)  │</span><br /><span class="line">│Read/Write access        │                                                  │</span><br /><span class="line">│        (AL=X0100010)    │                                                  │</span><br /><span class="line">├─────────────────────────┼──────────────────────────────────────────────────┤</span><br /><span class="line">│Deny Read mode,          │   Deny Write, Write Only        (AL = x0100001)  │</span><br /><span class="line">│Read Only access         │   Deny None, Write Only         (AL = x1000001)  │</span><br /><span class="line">│        (AL = x0110000)  │                                                  │</span><br /><span class="line">├─────────────────────────┼──────────────────────────────────────────────────┤</span><br /><span class="line">│Deny Read mode,          │   Deny Read,  Write Only        (AL = x0110001)  │</span><br /><span class="line">│Write Only access        │   Deny None,  Write Only        (AL = x1000001)  │</span><br /><span class="line">│        (AL = x0110001)  │                                                  │</span><br /><span class="line">├─────────────────────────┼──────────────────────────────────────────────────┤</span><br /><span class="line">│Deny Read mode,          │   Deny None,  Write Only        (AL = x1000001)  │</span><br /><span class="line">│Read/Write access        │                                                  │</span><br /><span class="line">│        (AL = x0110010)  │                                                  │</span><br /><span class="line">├─────────────────────────┼──────────────────────────────────────────────────┤</span><br /><span class="line">│Deny None mode,          │   Deny Write, Read Only         (AL = x0100000)  │</span><br /><span class="line">│Read Only access         │   Deny Write, Write Only        (AL = x0100001)  │</span><br /><span class="line">│        (AL = x1000000)  │   Deny Write, Read/Write        (AL = x0100010)  │</span><br /><span class="line">│                         │   Deny None,  Read Only         (AL = x1000000)  │</span><br /><span class="line">│                         │   Deny None,  Write Only        (AL = x1000001)  │</span><br /><span class="line">│                         │   Deny None,  Read/Write        (AL = x1000010)  │</span><br /><span class="line">├─────────────────────────┼──────────────────────────────────────────────────┤</span><br /><span class="line">│Deny None mode,          │   Deny Read, Read Only          (AL = x0110000)  │</span><br /><span class="line">│Write Only access        │   Deny Read, Write Only         (AL = x0110001)  │</span><br /><span class="line">│        (AL = x1000001)  │   Deny Read, Read/Write         (AL = x0110010)  │</span><br /><span class="line">│                         │   Deny None, Read Only          (AL = x1000000)  │</span><br /><span class="line">│                         │   Deny None, Write Only         (AL = x1000001)  │</span><br /><span class="line">│                         │   Deny None, Read/Write         (AL = x1000010)  │</span><br /><span class="line">├─────────────────────────┼──────────────────────────────────────────────────┤</span><br /><span class="line">│Deny None mode,          │   Deny None, Read Only          (AL = x1000000)  │</span><br /><span class="line">│Read/Write access        │   Deny None, Write Only         (AL = x1000001)  │</span><br /><span class="line">│        (AL = x1000010)  │   Deny None, Read/Write         (AL = x1000010)  │</span><br /><span class="line">└─────────────────────────┴──────────────────────────────────────────────────┛</span><br /><span class="line"></span><br /><span class="line">  ──────────────────────────────────────────────────────────────────────────</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Notes:</span>         Files that end with a colon (devices) are not opened</span><br /><span class="line">                      with this function call.</span><br /><span class="line"></span><br /><span class="line">                      File sharing must be loaded for the sharing modes of</span><br /><span class="line">                      this function to work.</span><br /><span class="line"></span><br /><span class="line">                      Child processes that inherit files also inherit</span><br /><span class="line">                      their sharing and access restrictions.</span><br /></pre>
  
  
  
    <nav class="seeAlso">
      <ul>
        <li>See Also:</li>
        
          <li>
            
              <a href="progref-94211.html">0Fh</a>
            
          </li>
        
          <li>
            
              <a href="progref-103409.html">16h</a>
            
          </li>
        
          <li>
            
              <a href="progref-136262.html">3Ch</a>
            
          </li>
        
          <li>
            
              <a href="progref-189594.html">5Ah</a>
            
          </li>
        
          <li>
            
              <a href="progref-190622.html">5Bh</a>
            
          </li>
        
          <li>
            
              <a href="progref-186441.html">59h</a>
            
          </li>
        
      </ul>
    </nav>
  


      </article>

    </section>

    
      <footer>
        <nav class="box">
          <dl>
            <dt>Generated</dt><dd>2025-12-02 09:10:31</dd>
            <dt>Generator</dt><dd><a href="https://ng2web.davep.dev">ng2web v1.2.0 (ngdb v1.1.0)</a></dd>
          </dl>
        </nav>
      </footer>
    

  </body>

</html>

