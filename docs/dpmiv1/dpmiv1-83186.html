





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.2.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="dpmiv1-style.css">
    <title>DPMI v1 Norton Guide » DPMI » Functions</title>
    <meta name="description" content="DPMI v1 Norton Guide">
    <link rel="prev" href="dpmiv1-79969.html">
    <link rel="next" href="dpmiv1-86362.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="../index.html">Guides</a></li>


          

<li><a href="dpmiv1-about.html">About</a></li>


          

<li><a href="dpmiv1-79969.html">Previous</a></li>


          

<li><a href="index.html">Up</a></li>


          

<li><a href="dpmiv1-86362.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      
        <nav class="menu box">
          <ul>
              <li>DPMI</li>
              <ul>
                <li><a href="index.html">Functions</a></li>
                <li><a href="dpmiv1-126452.html">Errors</a></li>
                
              </ul>
          </ul>
        </nav>
      

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line">Map Conventional Memory in Memory Block</span><br /><span class="line"></span><br /><span class="line">Aliases linear  addresses below the 1 MB boundary onto the</span><br /><span class="line">linear addresses of a memory block previously allocated with</span><br /><span class="line">Int 31H Fn  0504H.</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Call With:</span></span><br /><span class="line"></span><br /><span class="line">   AX     = 0509H</span><br /><span class="line">   ESI    = memory block handle</span><br /><span class="line">   EBX    = offset within memory block of page(s) to be</span><br /><span class="line">           mapped (must be page-aligned)</span><br /><span class="line">   ECX    = number of pages to map</span><br /><span class="line">   EDX    = linear address of conventional memory (must be</span><br /><span class="line">           page-aligned)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Returns:</span></span><br /><span class="line"></span><br /><span class="line">   if function successful</span><br /><span class="line">   Carry flag= clear</span><br /><span class="line"></span><br /><span class="line">   if function unsuccessful</span><br /><span class="line">   Carry flag= set</span><br /><span class="line">   AX     = error code</span><br /><span class="line">           8001H   unsupported function (Conventional Memory</span><br /><span class="line">                   Mapping Capability not supported)</span><br /><span class="line">           8003H   system integrity (invalid conventional</span><br /><span class="line">                   memory address)</span><br /><span class="line">           8023H   invalid handle (in ESI)</span><br /><span class="line">           8025H   invalid linear address (specified range</span><br /><span class="line">                   is not within specified block, or EBX/EDX</span><br /><span class="line">                   is not page aligned)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Notes:</span></span><br /><span class="line"></span><br /><span class="line">o  16-bit DPMI hosts will not support this function.  A</span><br /><span class="line">   16-bit client of a 32-bit DPMI 1.0 host can use this</span><br /><span class="line">   function.</span><br /><span class="line">o  Support of this call by 32-bit DPMI hosts is optional.</span><br /><span class="line">   Application programs or DOS Extenders which require this</span><br /><span class="line">   call in order to run are not DPMI Compliant.</span><br /><span class="line">o  Any committed or mapped pages resided in the linear</span><br /><span class="line">   address range that is being mapped into will be</span><br /><span class="line">   uncommitted or unmapped automatically by the host.</span><br /><span class="line">o  A client may only map conventional memory that it already</span><br /><span class="line">   owns; i.e. memory which the client previously allocated</span><br /><span class="line">   with Int 31H Fn 0100H or by calling DOS&#39;s Int 21H</span><br /><span class="line">   Function 48H directly via the translation services.</span><br /><span class="line">o  All pages created by this call have the mapped bit (bit</span><br /><span class="line">   2) set in the attributes returned by the Get Page</span><br /><span class="line">   Attributes function (Int 31H Fn 0506H).</span><br /><span class="line">o  DPMI hosts that do not implement virtual memory can</span><br /><span class="line">   support this function by simply copying page table</span><br /><span class="line">   entries.  The entries must be marked as mapped so that</span><br /><span class="line">   the host knows not to free up those physical pages when</span><br /><span class="line">   the memory block is freed.</span><br /><span class="line">o  DPMI hosts that provide virtual memory must implement</span><br /><span class="line">   some form of page aliasing in order to support this</span><br /><span class="line">   function.</span><br /><span class="line">o  The function can provide a large contiguous memory space</span><br /><span class="line">   without virtual memory support.</span><br /><span class="line"></span><br /><span class="line">§  Implementors of DPMI hosts which do not provide virtual</span><br /><span class="line">   memory are encouraged to support this function.  Without</span><br /><span class="line">   this function, conventional memory may be inaccessible to</span><br /><span class="line">   a 32-bit nonsegmented client, because the client may need</span><br /><span class="line">   contiguous linear memory for its code and data.  32-bit</span><br /><span class="line">   clients can always guarantee that conventional memory is</span><br /><span class="line">   not wasted with the following strategy:</span><br /><span class="line"></span><br /><span class="line">§  Call DOS to allocate any free conventional memory</span><br /><span class="line">§  If the DPMI host supports virtual memory, call the Mark</span><br /><span class="line">   Real Mode Region Pageable function (Int 31H Function</span><br /><span class="line">   0602H) to ensure that the host has not locked down</span><br /><span class="line">   conventional memory.</span><br /><span class="line">§  If the host does not support virtual memory but supports</span><br /><span class="line">   the Map Conventional Memory function (Int 31H Function</span><br /><span class="line">   0509H), allocate a memory block with uncommitted pages,</span><br /><span class="line">   then use Function 0509H to make the physical memory</span><br /><span class="line">   allocated below 640 KB addressable in the memory block,</span><br /><span class="line">   and therefore useable by the 32-bit application program.</span><br /></pre>
  
  
  


      </article>

    </section>

    
      <footer>
        <nav class="box">
          <dl>
            <dt>Generated</dt><dd>2025-12-02 09:10:24</dd>
            <dt>Generator</dt><dd><a href="https://ng2web.davep.dev">ng2web v1.2.0 (ngdb v1.1.0)</a></dd>
          </dl>
        </nav>
      </footer>
    

  </body>

</html>

