





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Memory</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-138829.html">
    <link rel="next" href="rbint-146272.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-138829.html">Previous</a></li>


          

<li><a href="rbint-64347.html">Up</a></li>


          

<li><a href="rbint-146272.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>Lists</li>
            <ul>
              <li><a href="index.html">Comments</a></li>
              <li><a href="rbint-7995.html">Interrupts</a></li>
              <li><a href="rbint-15401.html">Glossary</a></li>
              <li><a href="rbint-64347.html">Memory</a></li>
              <li><a href="rbint-180090.html">CMOS</a></li>
              <li><a href="rbint-250757.html">86 Bugs</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Format of S3 Local Peripheral Bus memory-mapped registers</span></span><br /><span class="line"></span><br /><span class="line">Offset  Size    Description     (Table M095)</span><br /><span class="line">FF00h  DWORD   &#34;mode&#34; various bit flags (see #M096)</span><br /><span class="line">FF04h  DWORD   FIFO status</span><br /><span class="line">       (bits 3-0 = 1000 when ready for data access via FF40h)</span><br /><span class="line">FF08h  DWORD   interrupt status</span><br /><span class="line">       bit 1: IRQ disable?  (also see S3 CR32 bit 4)</span><br /><span class="line">       bit 2: card is asserting IRQ (write 1 to clear)</span><br /><span class="line">       bit 17: ?  (also related to S3 CR32 bit 4)</span><br /><span class="line">       bit 18: ?  (also related to S3 CR32 bit 4)</span><br /><span class="line">FF0Ch  DWORD   frame buffer address 0</span><br /><span class="line">       offset within frame buffer at which to store incoming data from</span><br /><span class="line">         LPB</span><br /><span class="line">       (read by RFM_GETVIDEOATTRIBUTES function 0066h)</span><br /><span class="line">FF10h  DWORD   frame buffer address 1</span><br /><span class="line">       (W95 drivers copy this into 81D4h when unfreezing video)</span><br /><span class="line">FF14h  DWORD   &#34;direct address&#34; = index for FF18h (see #M099)</span><br /><span class="line">FF18h  DWORD   &#34;direct data&#34; (see #M099)</span><br /><span class="line">FF1Ch  DWORD   general purpose I/O</span><br /><span class="line">       bits 3-0: ???</span><br /><span class="line">       bits 7-4: ???  (read-only?)</span><br /><span class="line">       bits 31-8: unused? (read-only 0)</span><br /><span class="line">FF20h  DWORD   &#34;serial port&#34; -- I2C access (see #M098)</span><br /><span class="line">FF24h  DWORD   input window size (high word = rows, low word = columns)</span><br /><span class="line">FF28h  DWORD   data offsets</span><br /><span class="line">       (video alignment; high word = rows ; low word = columns)</span><br /><span class="line">FF2Ch  DWORD   horizontal decimation</span><br /><span class="line">       bits 0-31 set indicate that pixels [bytes???] 0-31 (mod 32)</span><br /><span class="line">         of each line should be dropped</span><br /><span class="line">FF30h  DWORD   vertical decimation</span><br /><span class="line">       bits 0-31 set indicate that lines 0-31 (mod 32) should be</span><br /><span class="line">         dropped, i.e. setting this DWORD to 55555555h will drop</span><br /><span class="line">         every other line</span><br /><span class="line">FF34h  DWORD   line stride (number of bytes between starts of successive lines</span><br /><span class="line">         of video data)</span><br /><span class="line">       must be multiple of 4 -- lowest two bits forced to 0</span><br /><span class="line">FF38h  3 DWORDs unused??? (seem to echo FF34h)</span><br /><span class="line">FF40h  DWORD   &#34;output FIFO&#34; - data transfer</span><br /><span class="line">       on ISA bus, there must be a delay between successive writes</span><br /><span class="line">FF44h 7 DWORDs unused??? (seem to echo FF40h)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #M097</span><br /><span class="line">Bitfields for S3 Local Peripheral Bus &#34;Mode&#34; register:</span><br /><span class="line">Bit(s) Description (Table M096)</span><br /><span class="line"> 0 ???  (Win95 drivers clear at startup)</span><br /><span class="line"> 2-1   ???  (Win95 drivers clear at startup)</span><br /><span class="line"> 3 ???  (Win95 drivers set at startup)</span><br /><span class="line"> 4 ???  (Win95 drivers pulse this bit at times)</span><br /><span class="line"> 5 freezes video image when set</span><br /><span class="line"> 6 (switches colors to magenta/green) (refer to bit 26 below)</span><br /><span class="line"> 9-7   ???</span><br /><span class="line"> 10    ??? messes up video image when set</span><br /><span class="line"> 15-11 read-only???</span><br /><span class="line"> 16    ???</span><br /><span class="line"> 17    ???</span><br /><span class="line"> 19-18 read-only???</span><br /><span class="line"> 20    read-only???</span><br /><span class="line"> 21    ???</span><br /><span class="line"> 22    ???</span><br /><span class="line"> 23    read-only???</span><br /><span class="line"> 24    ??? (if =0, colors are messed up, and horizontal jitter added)</span><br /><span class="line"> 25    ???</span><br /><span class="line"> 26    ??? (switches colors to magenta/green)</span><br /><span class="line">   bits 26&amp;6:</span><br /><span class="line">       00  magenta/green</span><br /><span class="line">       01  (default) normal</span><br /><span class="line">       10  internal byte-swapping???</span><br /><span class="line">       11  magenta/green</span><br /><span class="line"> 27    ???</span><br /><span class="line"> 28    current odd/even video field status</span><br /><span class="line"> 29    field inversion - when set, the LPB&#39;s FIELD pin state is inverted</span><br /><span class="line">     before being reported in bit 28</span><br /><span class="line"> 31-30 ??? (read-only 0)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span> RFM_OPEN sets this register to 00200049h</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #M095</span><br /><span class="line">(Table M099)</span><br /><span class="line">Values for S3 Local Peripheral Bus &#34;direct address&#34; index:</span><br /><span class="line"> 0000h CP3 installation (FF18h reads 00C3h if installed)</span><br /><span class="line"> 0001h ?</span><br /><span class="line"> 0002h ?</span><br /><span class="line"> 0003h ?</span><br /><span class="line">   bit 7: ???</span><br /><span class="line">   bits 6-0: ???</span><br /><span class="line"> 0004h ?</span><br /><span class="line"> 0005h ?</span><br /><span class="line">   bits 7-0: ???</span><br /><span class="line"> 0020h ?</span><br /><span class="line"> 0028h ?</span><br /><span class="line"> 0034h ?</span><br /><span class="line"> 0500h ?</span><br /><span class="line"> 0504h ?</span><br /><span class="line"> 0508h ?</span><br /><span class="line"> 050Ch ?</span><br /><span class="line"> 0510h ?</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #M095</span><br /><span class="line">Bitfields for S3 Local Peripheral Bus serial-port register:</span><br /><span class="line">Bit(s) Description (Table M098)</span><br /><span class="line"> 0 I2C clock line [SCL] (write)</span><br /><span class="line"> 1 I2C data line [SDA] (write)</span><br /><span class="line"> 2 I2C clock line (read)</span><br /><span class="line"> 3 I2C data line (read)</span><br /><span class="line"> 4 enable I2C interface?</span><br /><span class="line"> 31-5  ???</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  see file I2C.LST for details of the I2C device registers accessible</span><br /><span class="line">     through this interface</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #M095</span><br /><span class="line">--------V-MB0000000--------------------------</span><br /><span class="line">MEM B000h:0000h - MDA TEXT BUFFER</span><br /><span class="line">Size:  4096 BYTEs</span><br /><span class="line">--------V-MB0000000--------------------------</span><br /><span class="line">MEM B000h:0000h - HGC+ RAMFont-MODE TEXT BUFFER</span><br /><span class="line">Size:  16384 BYTEs</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  in RAMFont Mode 1, the memory is filled with the usual</span><br /><span class="line">     character/attribute pairs; in RAMFont Mode 2, four bits of each</span><br /><span class="line">     &#39;attribute&#39; byte is used to provide 12 bits for specifying the</span><br /><span class="line">     character</span><br /><span class="line">--------V-MB0000000--------------------------</span><br /><span class="line">MEM B000h:0000h - HGC GRAPHICS BUFFER (PAGE 0)</span><br /><span class="line">Size:  32768 BYTEs</span><br /><span class="line">--------V-MB4000000--------------------------</span><br /><span class="line">MEM B400h:0000h - HGC+ RAMFont BUFFER</span><br /><span class="line">Size:  4096 BYTEs</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Notes:</span> apparently write-only</span><br /><span class="line">   RAMFont Mode 1: 256 characters (8 bits each for char and attribute)</span><br /><span class="line">   RAMFont Mode 2: 3072 characters (12 bits for char, 4 bits for attrib)</span><br /><span class="line">   each character definition is 8 pixels wide (with 9th-column duplication</span><br /><span class="line">     if appropriate) by 8-16 pixels high</span><br /><span class="line">--------V-MB8000000--------------------------</span><br /><span class="line">MEM B800h:0000h - CGA TEXT/GRAPHICS BUFFER</span><br /><span class="line">Size:  16384 BYTEs</span><br /><span class="line">--------V-MB8000000--------------------------</span><br /><span class="line">MEM B800h:0000h - EGA/VGA+ TEXT BUFFER</span><br /><span class="line">Size:  32768 BYTEs</span><br /><span class="line">--------V-MB8000000--------------------------</span><br /><span class="line">MEM B800h:0000h - HGC GRAPHICS BUFFER (PAGE 1)</span><br /><span class="line">Size:  32768 BYTEs</span><br /><span class="line">--------V-MBFF00000--------------------------</span><br /><span class="line">MEM BFF0h:0000h - ET4000/W32 ACL accelerator</span><br /><span class="line">Size:  169 BYTES</span><br /></pre>
  
  
  


      </article>

    </section>

  </body>

</html>

