





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » 86 Bugs</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-358036.html">
    <link rel="next" href="rbint-359608.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="../index.html">Guides</a></li>


          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-358036.html">Previous</a></li>


          

<li><a href="rbint-250757.html">Up</a></li>


          

<li><a href="rbint-359608.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>Lists</li>
            <ul>
              <li><a href="index.html">Comments</a></li>
              <li><a href="rbint-7995.html">Interrupts</a></li>
              <li><a href="rbint-15401.html">Glossary</a></li>
              <li><a href="rbint-64347.html">Memory</a></li>
              <li><a href="rbint-180090.html">CMOS</a></li>
              <li><a href="rbint-250757.html">86 Bugs</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Function:</span></span><br /><span class="line"></span><br /><span class="line">FPREM calculates the modulus remainder of ST divided by ST(1) and stores</span><br /><span class="line">the result into ST. The procedure can also be seen as a repeated</span><br /><span class="line">subtraction of ST by ST(1).</span><br /><span class="line"></span><br /><span class="line">There are several interesting things about this instruction:</span><br /><span class="line"></span><br /><span class="line">The exponent magnitude difference should be no more than 63 or else the</span><br /><span class="line">instruction cannot reduce the ST properly in one execution. This means</span><br /><span class="line">you would have to execute the instruction several times to get a correct</span><br /><span class="line">result for large magnitude differences.</span><br /><span class="line">If this is the case, condition code bit C2 is set until the result in ST</span><br /><span class="line">is ok. Storing the Status Word and checking C2 should be done if the</span><br /><span class="line">condition could occur in your data set.</span><br /><span class="line"></span><br /><span class="line">In addition to that, if the instruction is done, the least-significant</span><br /><span class="line">three bits of the quotient are stored in C3,C1 and C0.</span><br /><span class="line">If arguments to the tangent function are reduced by PI/4 the codes</span><br /><span class="line">represent one of the eight octants of a radius for which the tangent is</span><br /><span class="line">to be calculated.</span><br /><span class="line"></span><br /><span class="line">FPREM does not operate according to the IEEE 754 standard, FPREM1</span><br /><span class="line">with opcode d9 f5 does, but is about 15-25 clocks slower than FPREM.</span><br /><span class="line"></span><br /><span class="line">The bug appears on the 87 and 287 when 64<span class="fg11 bg0"> is performed with a&gt;=1</span></span><br /><span class="line">and b==1 or 2. In that case the condition code bits represent an</span><br /><span class="line">incorrect value. There is no FP workaround. Test to prevent the situation.</span><br /><span class="line">Apparently this bug does not appear in the FPREM1 instruction.</span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line">FPTAN  Calculate tangent of ST</span><br /><span class="line">──────────────────────────────────────────────────────────────────────────────</span><br /></pre>
  
  
  


      </article>

    </section>

  </body>

</html>

