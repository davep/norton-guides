





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.2.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Interrupts</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-614966.html">
    <link rel="next" href="rbint-623850.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="../index.html">Guides</a></li>


          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-614966.html">Previous</a></li>


          

<li><a href="rbint-578992.html">Up</a></li>


          

<li><a href="rbint-623850.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      
        <nav class="menu box">
          <ul>
              <li>Lists</li>
              <ul>
                <li><a href="index.html">Comments</a></li>
                <li><a href="rbint-7995.html">Interrupts</a></li>
                <li><a href="rbint-15401.html">Glossary</a></li>
                <li><a href="rbint-64347.html">Memory</a></li>
                <li><a href="rbint-180090.html">CMOS</a></li>
                <li><a href="rbint-250757.html">86 Bugs</a></li>
                
              </ul>
          </ul>
        </nav>
      

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Int 10 Fn 4F13  - Vesa Vbe/ai (audio Interface) - Query Device           </span>  [<span class="ngb">s</span>]</span><br /><span class="line"></span><br /><span class="line">   AX = 4F13h</span><br /><span class="line">   BX = 0002h</span><br /><span class="line">   CX = handle</span><br /><span class="line">   DX = query</span><br /><span class="line">       0001h return length of GeneralDeviceClass</span><br /><span class="line">       0002h return copy   of GeneralDeviceClass (see #0089)</span><br /><span class="line">       0003h return length of Volume Info Structure</span><br /><span class="line">       0004h return copy   of Volume Info Structure (see #0099)</span><br /><span class="line">       0005h return length of Volume Services Structure</span><br /><span class="line">       0006h return copy   of Volume Services Structure (see #0101)</span><br /><span class="line">       0007h-000Fh reserved</span><br /><span class="line">       0010h-FFFFh device-specific</span><br /><span class="line">   SI:DI -&gt; buffer (functions 0002h,0004h,0006h)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Return:</span> AL = 4Fh if function supported</span><br /><span class="line">   AH = status</span><br /><span class="line">       00h successful</span><br /><span class="line">       SI:DI = length (functions 1,3,5)</span><br /><span class="line">       SI:DI buffer filled (functions 2,4,6)</span><br /><span class="line">       01h failed</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  functions 0003h to 0006h are only supported for the Volume device</span><br /><span class="line"></span><br /><span class="line">Format of GeneralDeviceClass structure:</span><br /><span class="line">Offset Size    Description (Table 0089)</span><br /><span class="line"> 00h   4 BYTEs name of the structure (&#34;GENI&#34;)</span><br /><span class="line"> 04h   DWORD   structure length</span><br /><span class="line"> 08h   WORD    type of device (1=Wave, 2=MIDI)</span><br /><span class="line"> 0Ah   WORD    version of VESA driver support (0100h for 1.00)</span><br /><span class="line"> 10h   var for CX=handle for Wave device:</span><br /><span class="line">           Wave Info structure (see #0090)</span><br /><span class="line">           some bytes ???</span><br /><span class="line">       for CX=handle for MIDI device:</span><br /><span class="line">           MIDI Info Structure (see #0095)</span><br /><span class="line">           first 8 bytes of MIDI Service Structure ???</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #0099,#0101</span><br /><span class="line"></span><br /><span class="line">Format of WAVE Info Structure:</span><br /><span class="line">Offset Size    Description (Table 0090)</span><br /><span class="line"> 00h   4 BYTEs name of the structure (&#34;WAVI&#34;)</span><br /><span class="line"> 04h   DWORD   structure length [0000007Eh]</span><br /><span class="line"> 08h   DWORD   driver software version [00000003h]</span><br /><span class="line"> 0Ch 32 BYTEs  vendor name, etc. (ASCIZ string)</span><br /><span class="line"> 2Ch 32 BYTEs  vendor product name</span><br /><span class="line"> 4Ch 32 BYTEs  vendor chip/hardware description</span><br /><span class="line"> 6Ch   BYTE    installed board number</span><br /><span class="line"> 6Dh   3 BYTEs unused data</span><br /><span class="line"> 70h   DWORD   feature bits (see #0091)</span><br /><span class="line"> 74h   WORD    user determined preference field</span><br /><span class="line"> 76h   WORD    memory required for driver use [0200h]</span><br /><span class="line"> 78h   WORD    number of timer tick callbacks per second [0000h]</span><br /><span class="line"> 7Ah   WORD    channels: 1 = mono, 2 = stereo</span><br /><span class="line">       stereo is assumed to be interleaved data</span><br /><span class="line"> 7Ch   WORD    bitfield of max sample sizes (see #0092)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #0095</span><br /><span class="line"></span><br /><span class="line">Bitfields for Wave feature bits:</span><br /><span class="line">Bit(s) Description (Table 0091)</span><br /><span class="line"> 0 8000hz Mono Playback</span><br /><span class="line"> 1 8000hz Mono Record</span><br /><span class="line"> 2 8000hz Stereo Record</span><br /><span class="line"> 3 8000hz Stereo Playback</span><br /><span class="line"> 4 8000hz Full Duplex Play/Record</span><br /><span class="line"> 5 11025hz Mono Playback</span><br /><span class="line"> 6 11025hz Mono Record</span><br /><span class="line"> 7 11025hz Stereo Record</span><br /><span class="line"> 8 11025hz Stereo Playback</span><br /><span class="line"> 9 11025hz Full Duplex Play/Record</span><br /><span class="line"> 10    22050hz Mono Playback</span><br /><span class="line"> 11    22050hz Mono Record</span><br /><span class="line"> 12    22050hz Stereo Record</span><br /><span class="line"> 13    22050hz Stereo Playback</span><br /><span class="line"> 14    22050hz Full Duplex Play/Record</span><br /><span class="line"> 15    44100hz Mono Playback</span><br /><span class="line"> 16    44100hz Mono Record</span><br /><span class="line"> 17    44100hz Stereo Record</span><br /><span class="line"> 18    44100hz Stereo Playback</span><br /><span class="line"> 19    44100hz Full Duplex Play/Record</span><br /><span class="line"> 20-26 reserved (0)</span><br /><span class="line"> 27    driver must pre-handle the data</span><br /><span class="line"> 28    Variable Sample mono   playback</span><br /><span class="line"> 29    Variable Sample stereo playback</span><br /><span class="line"> 30    Variable Sample mono   record</span><br /><span class="line"> 31    Variable Sample stereo record</span><br /><span class="line"></span><br /><span class="line">(Table 0092)</span><br /><span class="line">Values for Sample data size:</span><br /><span class="line"> 01h   8bit play</span><br /><span class="line"> 02h   16bit play</span><br /><span class="line"> 10h   8bit record</span><br /><span class="line"> 20h   16bit record</span><br /><span class="line"></span><br /><span class="line">Format of WAVE Audio Services structure:</span><br /><span class="line">Offset Size    Description (Table 0093)</span><br /><span class="line"> 00h   4 BYTEs name of the structure</span><br /><span class="line"> 04h   DWORD   structure length</span><br /><span class="line"> 08h 16 BYTEs  for future expansion</span><br /><span class="line">---entry points (details???)---</span><br /><span class="line"> 18h   DWORD   DeviceCheck</span><br /><span class="line">       11h compression (see also #0094)</span><br /><span class="line">       12h driver state</span><br /><span class="line">       13h get current pos</span><br /><span class="line">       14h sample rate</span><br /><span class="line">       15h set preference</span><br /><span class="line">       16h get DMA,IRQ</span><br /><span class="line">       17h get IO address</span><br /><span class="line">       18h get mem address</span><br /><span class="line">       19h get mem free</span><br /><span class="line">       1Ah full duplex</span><br /><span class="line">       1Bh get block size</span><br /><span class="line">       1Ch get PCM format</span><br /><span class="line">       1Dh enable PCM format</span><br /><span class="line">       80h-.. vendors can add DevChks above 0x80</span><br /><span class="line"> 1Ch   DWORD   PCMInfo</span><br /><span class="line"> 20h   DWORD   PlayBlock</span><br /><span class="line"> 24h   DWORD   PlayCont</span><br /><span class="line"> 28h   DWORD   RecordBlock</span><br /><span class="line"> 2Ch   DWORD   RecordCont</span><br /><span class="line"> 30h   DWORD   PauseIO</span><br /><span class="line"> 34h   DWORD   ResumeIO</span><br /><span class="line"> 38h   DWORD   StopIO</span><br /><span class="line"> 3Ch   DWORD   WavePrepare</span><br /><span class="line"> 40h   DWORD   WaveRegister</span><br /><span class="line"> 44h   DWORD   GetLastError</span><br /><span class="line">       01h unsupported feature/function</span><br /><span class="line">       02h bad sample rate</span><br /><span class="line">       03h bad block length</span><br /><span class="line">       04h bad block address</span><br /><span class="line">       05h app. missed an IRQ</span><br /><span class="line">       06h don&#39;t understand the PCM size/format</span><br /><span class="line">       80h-.. vendors specific errors</span><br /><span class="line"> 48h   DWORD   TimerTick</span><br /><span class="line"> 4Ch   DWORD   ApplPSyncCB: CallBack: play filled in by the app</span><br /><span class="line"> 50h   DWORD   ApplRSyncCB: CallBack: rec filled in by the app</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #0097,#0101</span><br /><span class="line"></span><br /><span class="line">(Table 0094)</span><br /><span class="line">Values for type of compression:</span><br /><span class="line"> 01h   IMA play</span><br /><span class="line"> 02h   ALAW play</span><br /><span class="line"> 03h   ULAW play</span><br /><span class="line"> 11h   IMA record</span><br /><span class="line"> 12h   ALAW record</span><br /><span class="line"> 13h   ULAW record</span><br /><span class="line"></span><br /><span class="line">Format of MIDI Info Structure:</span><br /><span class="line">Offset Size    Description (Table 0095)</span><br /><span class="line"> 00h   4 BYTEs name of the structure (&#34;MIDI&#34;)</span><br /><span class="line"> 04h   DWORD   structure length</span><br /><span class="line"> 08h   DWORD   driver software version [00000003h]</span><br /><span class="line"> 0Ch 32 BYTEs  vendor name, etc. (ASCIZ string)</span><br /><span class="line"> 2Ch 32 BYTEs  vendor product name</span><br /><span class="line"> 4Ch 32 BYTEs  vendor chip/hardware description</span><br /><span class="line"> 6Ch   BYTE    installed board number</span><br /><span class="line"> 6Dh   3 BYTEs unused data</span><br /><span class="line"> 70h 14 BYTEs  the patch library file name [OPL2.BNK 00..]</span><br /><span class="line"> 7Eh   DWORD   feature bits (see #0096)</span><br /><span class="line"> 80h   WORD    user determined preference field</span><br /><span class="line"> 82h   WORD    memory required for driver use</span><br /><span class="line"> 84h   WORD    # of timer tick callbacks per second</span><br /><span class="line"> 86h   WORD    max # of tones (voices, partials)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #0089,#0097,#0099</span><br /><span class="line"></span><br /><span class="line">Bitfields for MIDI feature bits:</span><br /><span class="line">Bit(s) Description (Table 0096)</span><br /><span class="line"> 0-3   reserved for GM extensions</span><br /><span class="line"> 4 Transmitter/Receiver only</span><br /><span class="line"> 5 Patches preloaded</span><br /><span class="line"> 6 MIDI receive has time stamp</span><br /><span class="line"> 8 MIDI interrupt driven input supported</span><br /><span class="line"> 9 MIDI polled input supported</span><br /><span class="line"> 10    MIDI remote patches supported</span><br /><span class="line"></span><br /><span class="line">Format of MIDI Service structure:</span><br /><span class="line">Offset Size    Description (Table 0097)</span><br /><span class="line"> 00h   4 BYTEs name of the structure (&#34;MIDS&#34;)</span><br /><span class="line"> 04h   DWORD   structure length</span><br /><span class="line"> 08h 16 WORDs  patches loaded table bit field</span><br /><span class="line"> 28h 16 BYTEs  for future expansion</span><br /><span class="line">---entry points (details???)---</span><br /><span class="line"> 38h   DWORD   device check</span><br /><span class="line">       11h return available tones</span><br /><span class="line">       12h return TRUE/FALSE if patch is understood</span><br /><span class="line">       13h set preference</span><br /><span class="line">       14h allow/disallow voice stealing</span><br /><span class="line">       15h get FIFO sizes</span><br /><span class="line">       16h get DMA,IRQ</span><br /><span class="line">       17h get IO address</span><br /><span class="line">       18h get mem address</span><br /><span class="line">       19h get mem free</span><br /><span class="line">       80h-.. vendors can add DevChks above 0x80</span><br /><span class="line"> 3Ch   DWORD   global reset</span><br /><span class="line"> 40h   DWORD   MIDI msg</span><br /><span class="line"> 44h   DWORD   poll MIDI</span><br /><span class="line"> 48h   DWORD   preload patch</span><br /><span class="line"> 4Ch   DWORD   unload patch</span><br /><span class="line"> 50h   DWORD   timer tick</span><br /><span class="line"> 54h   DWORD   get last error</span><br /><span class="line">       01h unsupported feature/function</span><br /><span class="line">       02h unknown patch type (see #0098)</span><br /><span class="line">       03h all tones are used</span><br /><span class="line">       04h messages are out of sync</span><br /><span class="line">       05h an incoming patch was incomplete</span><br /><span class="line">       06h an incoming patch couldn&#39;t be stored</span><br /><span class="line">       07h had to drop an incoming byte</span><br /><span class="line">       08h driver is failing a patch download</span><br /><span class="line">       80h-.. vendors specific errors</span><br /><span class="line"> 58h   DWORD   Patch Block free callback</span><br /><span class="line"> 5Ch   DWORD   MIDI byte avail. callback</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #0093,#0101</span><br /><span class="line"></span><br /><span class="line">(Table 0098)</span><br /><span class="line">Values for MIDI Registered Patch Types:</span><br /><span class="line"> 10h   OPL2</span><br /><span class="line"> 11h   OPL3</span><br /><span class="line"></span><br /><span class="line">Format of Volume Info Structure:</span><br /><span class="line">Offset Size    Description (Table 0099)</span><br /><span class="line"> 00h  4    BYTEs   name of the structure (&#34;VOLI&#34;)</span><br /><span class="line"> 04h   DWORD   structure length (00000092h)</span><br /><span class="line"> 08h   DWORD   driver software version [00000001h]</span><br /><span class="line"> 0Ch 32 BYTEs  vendor name, etc. (ASCIZ string)</span><br /><span class="line"> 2Ch 32 BYTEs  vendor product name</span><br /><span class="line"> 4Ch 32 BYTEs  vendor chip/hardware description</span><br /><span class="line"> 6Ch   BYTE    installed board number (0 for 1st/only board)</span><br /><span class="line"> 6Dh  3    BYTEs   unused data (0)</span><br /><span class="line"> 70h 24 BYTEs  text name of the mixer channel</span><br /><span class="line"> 88h   DWORD   features bits (see #0100)</span><br /><span class="line"> 8Ch   WORD    minimum volume setting</span><br /><span class="line"> 8Eh   WORD    maximum volume setting</span><br /><span class="line"> 90h   WORD    attenuation/gain crossover</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #0089,#0101</span><br /><span class="line"></span><br /><span class="line">Bitfields for Volume feature bits:</span><br /><span class="line">Bit(s) Description (Table 0100)</span><br /><span class="line"> 0 Stereo Volume control available</span><br /><span class="line"> 2 Low Pass Filter is available</span><br /><span class="line"> 3 High Pass Filter is available</span><br /><span class="line"> 4 Parametric Tone Control is available</span><br /><span class="line"> 5 selectable output paths</span><br /><span class="line"> 8 Azimuth Field positioning supported</span><br /><span class="line"> 9 Phi Field positioning supported</span><br /><span class="line"> 10-30 unused???</span><br /><span class="line"> 31    Master Volume device</span><br /><span class="line"></span><br /><span class="line">Format of Volume Services Structure:</span><br /><span class="line">Offset Size    Description (Table 0101)</span><br /><span class="line"> 00h   4 BYTEs name of the structure (&#34;VOLS&#34;)</span><br /><span class="line"> 04h   DWORD   structure length (00000038h)</span><br /><span class="line"> 08h 16 BYTEs  16 bytes for future expansion (0)</span><br /><span class="line">---entry points (details???)---</span><br /><span class="line"> 18h   DWORD   device check</span><br /><span class="line">       0011h filter range</span><br /><span class="line">       0012h filter setting</span><br /><span class="line">       0013h filter current</span><br /><span class="line">       0014h tone range</span><br /><span class="line">       0015h tone setting</span><br /><span class="line">       0016h tone current</span><br /><span class="line">       0017h path</span><br /><span class="line">       0018h get IO address</span><br /><span class="line">       0080h-.. vendors can add DevChks above 0x80</span><br /><span class="line"> 1Ch   DWORD   set vol to an absolute setting</span><br /><span class="line">       01h User master volume setting</span><br /><span class="line">       02h application master volume setting</span><br /><span class="line"> 20h   DWORD   set 3D volume</span><br /><span class="line"> 24h   DWORD   tone control</span><br /><span class="line"> 28h   DWORD   filter control</span><br /><span class="line"> 2Ch   DWORD   output path</span><br /><span class="line"> 30h   DWORD   reset channel</span><br /><span class="line"> 34h   DWORD   get last error</span><br /><span class="line">       01h unsupported feature/function</span><br /><span class="line">       02h out of range parameter value</span><br /><span class="line">       80h+ vendor-specific errors</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #0093,#0097</span><br /></pre>
  
  
  


      </article>

    </section>

    
      <footer>
        <nav class="box">
          <dl>
            <dt>Generated</dt><dd>2025-12-02 09:10:33</dd>
            <dt>Generator</dt><dd><a href="https://ng2web.davep.dev">ng2web v1.2.0 (ngdb v1.1.0)</a></dd>
          </dl>
        </nav>
      </footer>
    

  </body>

</html>

