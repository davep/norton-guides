





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.2.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Interrupts</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-1458510.html">
    <link rel="next" href="rbint-1470472.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="../index.html">Guides</a></li>


          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-1458510.html">Previous</a></li>


          

<li><a href="rbint-1340639.html">Up</a></li>


          

<li><a href="rbint-1470472.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      
        <nav class="menu box">
          <ul>
              <li>Lists</li>
              <ul>
                <li><a href="index.html">Comments</a></li>
                <li><a href="rbint-7995.html">Interrupts</a></li>
                <li><a href="rbint-15401.html">Glossary</a></li>
                <li><a href="rbint-64347.html">Memory</a></li>
                <li><a href="rbint-180090.html">CMOS</a></li>
                <li><a href="rbint-250757.html">86 Bugs</a></li>
                
              </ul>
          </ul>
        </nav>
      

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Int 15 Fn DE2E  U - Desqview V2.50+ - Socket Api                         </span>  [<span class="ngb">Q</span>]</span><br /><span class="line"></span><br /><span class="line">   AX = DE2Eh</span><br /><span class="line">   DX:BX -&gt; socket record (see #0482)</span><br /><span class="line">       0000h:0000h to create a new socket record</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Return:</span> CX = size of socket record in bytes</span><br /><span class="line">   DX:BX -&gt; socket record which was used</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Notes:</span> DESQview 2.50-2.52 are distributed as part of DESQview/X v1.0x.</span><br /><span class="line">   socket records are allocated from common memory</span><br /><span class="line">   for Unix compatibility, each socket and connection on a socket is</span><br /><span class="line">     allocated a DOS file handle (referencing an SFT for NUL) which is</span><br /><span class="line">     used on various calls to specify which of possibly multiple</span><br /><span class="line">     connections is to be operated upon</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> AX=DE2Dh,INT 61/AX=0001h/SF=0001h&#34;VINES&#34;,INT 63&#34;DESQview&#34;</span><br /><span class="line"></span><br /><span class="line">(Table 0481)</span><br /><span class="line">Values for DESQview/X socket API function number:</span><br /><span class="line"> 0000h initialize socket???</span><br /><span class="line"> 0001h &#34;gethostname&#34;</span><br /><span class="line"> 0002h &#34;ioctl&#34; check for input</span><br /><span class="line"> 0003h &#34;sleep&#34; delay for specified period</span><br /><span class="line"> 0004h &#34;htons&#34; convert word to network (big-endian) byte order</span><br /><span class="line"> 0005h &#34;select&#34;</span><br /><span class="line"> 0006h &#34;bsd_close&#34;/&#34;so_close&#34; close socket</span><br /><span class="line"> 0007h NOP</span><br /><span class="line"> 0008h &#34;connect&#34; initiate connection on socket</span><br /><span class="line"> 0009h &#34;recv&#34;/&#34;recvfrom&#34; read from socket</span><br /><span class="line"> 000Ah &#34;socket&#34;</span><br /><span class="line"> 000Bh ???</span><br /><span class="line"> 000Ch &#34;gethostbyname&#34;</span><br /><span class="line"> 000Dh &#34;send&#34;/&#34;sendto&#34; write to socket</span><br /><span class="line"> 000Eh ??? (does something to all connections for process)</span><br /><span class="line"> 000Fh &#34;getpid&#34; get process identifier</span><br /><span class="line"> 0010h &#34;gettimeofday&#34;</span><br /><span class="line"> 0011h &#34;bind&#34; assign name to socket</span><br /><span class="line"> 0012h &#34;listen&#34; listen for connections on socket</span><br /><span class="line"> 0013h &#34;accept&#34; accept connection on socket</span><br /><span class="line"> 0014h connect to X server</span><br /><span class="line"> 0015h &#34;gethostbyaddr&#34; get host information for an address</span><br /><span class="line"> 0016h &#34;getprotobyname&#34;</span><br /><span class="line"> 0017h &#34;getprotobynumber&#34;</span><br /><span class="line"> 0018h &#34;getservbyname&#34;</span><br /><span class="line"> 0019h &#34;getservbyport&#34;</span><br /><span class="line"> 001Ah &#34;getsockname&#34; determine name bound to socket</span><br /><span class="line"> 001Bh &#34;getpeername&#34; get name of connected peer</span><br /><span class="line"> 001Ch &#34;getsockopt&#34;/&#34;setsockopt&#34;</span><br /><span class="line"> 001Dh &#34;so_exit&#34;    close all sockets for calling process</span><br /><span class="line"> 001Eh &#34;issock&#34; determine whether file handle references socket</span><br /><span class="line"> 001Fh &#34;so_attach&#34; reattach previously detached socket</span><br /><span class="line"> 0020h &#34;so_detach&#34; temporarily detach socket</span><br /><span class="line"> 0021h &#34;dvpath&#34; get DESQview directory (see also AX=DE24h)</span><br /><span class="line"> 0022h &#34;NewProc&#34; start new application (see also AX=102Ch)</span><br /><span class="line"> 0023h &#34;so_linkup&#34;</span><br /><span class="line"> 0024h &#34;CanonicalPath&#34; canonicalize filename (see also INT 21/AH=60h)</span><br /><span class="line"> 0025h indirect INT 15h call</span><br /><span class="line"> 0026h Network Manager interface</span><br /><span class="line"> 0027h &#34;so_unlink&#34;    close connection from &#34;so_linkup&#34;</span><br /><span class="line"> 0028h &#34;raisepriority&#34;</span><br /><span class="line"> 0029h &#34;lowerpriority&#34;</span><br /><span class="line"> 002Ah &#34;so_private&#34; ???</span><br /><span class="line"> FFFFh &#34;NetExit&#34; (appears to be a NOP)</span><br /><span class="line"></span><br /><span class="line">Format of DESQview/X socket record:</span><br /><span class="line">Offset Size    Description (Table 0482)</span><br /><span class="line"> 00h   WORD    signature F0ADh</span><br /><span class="line"> 02h   WORD    function number (see #0481)</span><br /><span class="line"> 04h   WORD    returned error code (see #0502)</span><br /><span class="line"> 06h   WORD    maximum message size??? (usually 0400h)</span><br /><span class="line"> 08h   WORD    PSP segment to use or 0000h if socket not valid</span><br /><span class="line"> 0Ah   WORD    scratch space (JFT size)</span><br /><span class="line"> 0Ch   DWORD   scratch space (JFT address)</span><br /><span class="line"> 10h   DWORD   mailbox handle (initialized by function 0000h)</span><br /><span class="line"> 14h   DWORD   timer object handle (initialized by function 0000h)</span><br /><span class="line">---function 0000h---</span><br /><span class="line"> 18h   WORD    (ret) ???</span><br /><span class="line">---function 0001h---</span><br /><span class="line"> 18h   WORD    (ret) status???</span><br /><span class="line"> 1Ah 128 BYTEs (ret) ASCIZ hostname (empty string if not on network)</span><br /><span class="line"> 9Ah   WORD    maximum length of hostname to return</span><br /><span class="line">---function 0002h---</span><br /><span class="line"> 18h   WORD    (ret) status</span><br /><span class="line"> 1Ah   WORD    socket&#39;s file handle</span><br /><span class="line"> 1Ch   WORD    IOCTL function</span><br /><span class="line">       05h &#34;FIONREAD&#34; determine available input</span><br /><span class="line">       06h &#34;FIONBIO&#34; set blocking state of socket</span><br /><span class="line"> 1Eh   WORD    (return, subfn 05h) number of bytes available for reading</span><br /><span class="line">       (call, subfn 06h) 0000h blocking, nonzero nonblocking</span><br /><span class="line">---function 0003h---</span><br /><span class="line"> 18h  2 BYTEs  unused</span><br /><span class="line"> 1Ah   WORD    delay time in seconds</span><br /><span class="line">---function 0004h---</span><br /><span class="line"> 18h   WORD    (ret) result in network (big-endian) byte order</span><br /><span class="line"> 1Ah   WORD    value to convert to network byte order</span><br /><span class="line">---function 0005h---</span><br /><span class="line"> 18h   WORD    (ret) number of handles meeting the specified conditions???</span><br /><span class="line"> 1Ah   WORD    number of file handles in each bitset</span><br /><span class="line"> 1Ch   DWORD   bitset of socket handles to check for readability</span><br /><span class="line"> 20h   DWORD   bitset of socket handles to check for writability</span><br /><span class="line"> 24h   DWORD   bitset of socket handles to check for errors</span><br /><span class="line"> 28h   WORD    timeout in ??? or 0000h to block until some socket ready</span><br /><span class="line"> 2Ah   DWORD   ???</span><br /><span class="line"> 2Eh   DWORD   ???</span><br /><span class="line">---function 0006h---</span><br /><span class="line"> 18h   WORD    (ret) status: 0000h if successful, FFFFh on error</span><br /><span class="line"> 1Ah   WORD    socket&#39;s file handle</span><br /><span class="line">---function 0008h---</span><br /><span class="line"> 18h   WORD    (ret) status: 0000h if successful, FFFFh on error</span><br /><span class="line"> 1Ah   WORD    socket&#39;s file handle</span><br /><span class="line"> 1Ch   WORD    0001h if socket name specified, 0000h if not</span><br /><span class="line"> 1Eh   WORD    length of socket name</span><br /><span class="line"> 20h  N BYTEs  name of socket to which to connect</span><br /><span class="line">---function 0009h---</span><br /><span class="line"> 18h   WORD    (ret) number of bytes actually read, 0000h if connection</span><br /><span class="line">           closed, or FFFFh on error</span><br /><span class="line"> 1Ah   WORD    socket&#39;s file handle</span><br /><span class="line"> 1Ch   WORD    number of bytes to read</span><br /><span class="line"> 1Eh   WORD    flags</span><br /><span class="line"> 20h   WORD    0000h if no source address desired</span><br /><span class="line">       0001h if source address is to be stored (datagram sockets)</span><br /><span class="line"> 22h   WORD    length of source address</span><br /><span class="line"> 24h 110 BYTEs source address</span><br /><span class="line"> 92h 1K BYTEs  buffer for data to be read</span><br /><span class="line">---function 000Ah---</span><br /><span class="line"> 18h   WORD    (ret) socket&#39;s file handle or FFFFh on error</span><br /><span class="line"> 1Ah   WORD    address family (0001h,0002h)</span><br /><span class="line"> 1Ch   WORD    socket type</span><br /><span class="line"> 1Eh   WORD    protocol</span><br /><span class="line">---function 000Bh---</span><br /><span class="line"> 18h   WORD    (ret) 0001h if ??? or FFFFh on error</span><br /><span class="line"> 1Ah   WORD    socket&#39;s file handle</span><br /><span class="line"> 1Eh   WORD    (call) ???</span><br /><span class="line">---function 000Ch---</span><br /><span class="line"> 18h 128 BYTEs ASCIZ hostname (special case if empty string or &#34;unix&#34;)</span><br /><span class="line"> 98h   ??? (ret) packed &#39;hostent&#39; structure</span><br /><span class="line"> A2h   ??? (ret) ???</span><br /><span class="line">---function 000Dh---</span><br /><span class="line"> 18h   WORD    (ret) number of bytes actually written or FFFFh on error</span><br /><span class="line"> 1Ah   WORD    socket&#39;s file handle</span><br /><span class="line"> 1Ch   WORD    number of bytes to write</span><br /><span class="line"> 1Eh   WORD    number of bytes to follow in subsequent writes???</span><br /><span class="line"> 20h   WORD    flags</span><br /><span class="line"> 22h   WORD    0000h if no destination specified, 0001h if destination present</span><br /><span class="line"> 24h   WORD    0001h if broadcast message???, 0000h if not</span><br /><span class="line">       (ignored if no destination specified)</span><br /><span class="line"> 26h   WORD    length of destination address</span><br /><span class="line"> 28h 110 BYTEs destination address</span><br /><span class="line"> 96h 1K BYTEs  buffer containing data to be written</span><br /><span class="line">---function 000Eh---</span><br /><span class="line"> no additional fields</span><br /><span class="line">---function 000Fh---</span><br /><span class="line"> 18h   DWORD   (ret) DESQview task handle of calling process</span><br /><span class="line">---function 0010h---</span><br /><span class="line"> 18h   DWORD   (ret) current time</span><br /><span class="line"> 1Ch   DWORD   (ret) ???</span><br /><span class="line">---function 0011h---</span><br /><span class="line"> 18h   WORD    (ret) status: 0000h if successful, FFFFh on error</span><br /><span class="line"> 1Ah   WORD    socket&#39;s file handle</span><br /><span class="line"> 1Ch   WORD    length of name</span><br /><span class="line"> 1Eh  N BYTEs  buffer for socket name</span><br /><span class="line">---function 0012h---</span><br /><span class="line"> 18h   WORD    (ret) status: 0000h if successful, FFFFh on error</span><br /><span class="line"> 1Ah   WORD    socket&#39;s file handle</span><br /><span class="line"> 1Ch   WORD    maximum backlog of pending connections allowed on socket</span><br /><span class="line">---function 0013h---</span><br /><span class="line"> 18h   WORD    (ret) file handle for new connection or FFFFh on error</span><br /><span class="line"> 1Ah   WORD    listen()ing socket&#39;s file handle</span><br /><span class="line"> 1Ch   WORD    (call) length of buffer for connecting entity&#39;s address</span><br /><span class="line">       (ret) actual length of address</span><br /><span class="line"> 1Eh  N BYTEs  buffer for connecting entity&#39;s address (110 bytes???)</span><br /><span class="line">---function 0014h---</span><br /><span class="line"> 18h   WORD    (ret) socket&#39;s file handle or FFFFh on error</span><br /><span class="line"> 1Ah  4 BYTEs  (ret) ???</span><br /><span class="line"> 1Eh   WORD    (ret) ???</span><br /><span class="line"> 20h   WORD    (ret) ???</span><br /><span class="line"> 22h 256 BYTEs ASCIZ X display name</span><br /><span class="line">122h   ???</span><br /><span class="line">---function 0015h---</span><br /><span class="line"> 18h   WORD    (call) type of address??? (test for 0001h seen)</span><br /><span class="line"> 1Ah   WORD    (call) length of buffer for host address</span><br /><span class="line"> 1Ch 110 BYTEs buffer containing ASCIZ host address</span><br /><span class="line"> 8Ah   WORD    (ret) offset of official host name</span><br /><span class="line"> 8Ch   WORD    (ret) offset of alias list???</span><br /><span class="line"> 8Eh   WORD    (ret) address type???</span><br /><span class="line"> 90h   WORD    (ret) length of an address in bytes???</span><br /><span class="line"> 92h   WORD    (ret) offset of address???</span><br /><span class="line"> 9Ah  N BYTEs  (ret) buffer for hostname, alias list, and host address</span><br /><span class="line">---function 0016h---</span><br /><span class="line"> 18h   ??? buffer for ASCIZ protocol name</span><br /><span class="line"> 98h   ???</span><br /><span class="line">---function 0017h---</span><br /><span class="line"> 18h   WORD    (call) protocol number</span><br /><span class="line"> 1Ah   WORD    (ret) ??? or 0001h</span><br /><span class="line">---function 0018h---</span><br /><span class="line"> 18h 128 BYTEs buffer containing ASCIZ ???</span><br /><span class="line"> 98h 128 BYTEs buffer containing ASCIZ ???</span><br /><span class="line">118h   WORD    (ret) ???</span><br /><span class="line">---function 0019h---</span><br /><span class="line"> 18h   WORD    port number</span><br /><span class="line"> 1Ah 128 BYTEs (call) ASCIZ host name</span><br /><span class="line">       (ret) packed servent strctures???</span><br /><span class="line"> 9Ah   WORD    (ret) ???</span><br /><span class="line">---function 001Ah---</span><br /><span class="line"> 18h   WORD    (ret) 0000h if successful, FFFFh on error</span><br /><span class="line"> 1Ah   WORD    socket&#39;s file handle</span><br /><span class="line"> 1Ch   WORD    (call) length of buffer for socket name</span><br /><span class="line">       (ret) actual length of socket name</span><br /><span class="line"> 1Eh  N BYTEs  buffer for socket name</span><br /><span class="line">---function 001Bh---</span><br /><span class="line"> 18h   WORD    (ret) status: 0000h if successful, FFFFh on error</span><br /><span class="line"> 1Ah   WORD    socket&#39;s file handle</span><br /><span class="line"> 1Ch   WORD    (call) size of buffer for name</span><br /><span class="line">       (ret) actual size of name</span><br /><span class="line"> 1Eh  N BYTEs  buffer for peer&#39;s name</span><br /><span class="line">---function 001Ch---</span><br /><span class="line"> 18h   WORD    (ret) status: 0000h if successful, FFFFh on error</span><br /><span class="line"> 1Ah   WORD    direction: 0000h to get, 0001h to set</span><br /><span class="line"> 1Ch   WORD    socket&#39;s file handle</span><br /><span class="line"> 1Eh   WORD    option level</span><br /><span class="line"> 20h   WORD    option name</span><br /><span class="line"> 22h   WORD    (call) length of buffer for option value</span><br /><span class="line">       (ret) actual length of option value</span><br /><span class="line"> 24h  N BYTEs  buffer for option value</span><br /><span class="line">---function 001Dh---</span><br /><span class="line"> no additional fields</span><br /><span class="line">---function 001Eh---</span><br /><span class="line"> 18h   WORD    (ret) status: 0000h ??? or 0001h ???</span><br /><span class="line"> 1Ah   WORD    file handle which may or may not be a socket</span><br /><span class="line">---function 001Fh---</span><br /><span class="line"> 18h   WORD    (ret) file handle or FFFFh on error</span><br /><span class="line"> 1Ah   DWORD   (call) pointer to Socket Context Record (see #0503) of a</span><br /><span class="line">           previously detached socket</span><br /><span class="line">---function 0020h---</span><br /><span class="line"> 18h   WORD    (ret) status: 0000h if successful or FFFFh on error</span><br /><span class="line"> 1Ah   WORD    socket&#39;s file handle</span><br /><span class="line"> 1Ch   DWORD   (ret) pointer to Socket Context Record (see #0503) for</span><br /><span class="line">           the file handle</span><br /><span class="line">---function 0021h---</span><br /><span class="line"> 18h 64 BYTEs  buffer for DESQview startup directory (see AX=DE25h)</span><br /><span class="line">---function 0022h---</span><br /><span class="line"> 18h   DWORD   (ret) task handle of new application</span><br /><span class="line"> 1Ch   WORD    size of .DVP data</span><br /><span class="line"> 1Eh 129 BYTEs ASCIZ ???</span><br /><span class="line"> 9Fh  N BYTEs  .DVP data (see #0353 at AX=102Ch)</span><br /><span class="line">---function 0023h---</span><br /><span class="line"> 18h   WORD    (ret) ??? or FFFFh on error</span><br /><span class="line"> 1Ah   WORD    socket&#39;s file handle???</span><br /><span class="line">---function 0024h---</span><br /><span class="line"> 18h   WORD    (ret) DOS error code (see #1366 at INT 21/AH=59h/BX=0000h)</span><br /><span class="line">           0000h if successful</span><br /><span class="line"> 1Ah 129 BYTEs ASCIZ filename/pathname</span><br /><span class="line">11Bh 129 BYTEs ASCIZ canonicalized filename/pathname (see INT 21/AH=60h)</span><br /><span class="line">---function 0025h---</span><br /><span class="line"> 18h   WORD    value of AX</span><br /><span class="line"> 1Ah   WORD    value of BX</span><br /><span class="line"> 1Ch   WORD    (call) value of CX for call if AH value other than 12h</span><br /><span class="line">       (call) number of stack parameters if AH value is 12h</span><br /><span class="line">       (ret) returned CX for calls other than INT 15/AH=12h</span><br /><span class="line"> 1Eh   WORD    value of DX</span><br /><span class="line"> 20h   WORD    value of DI</span><br /><span class="line"> 22h   WORD    value of SI</span><br /><span class="line"> 24h   WORD    value of DS</span><br /><span class="line"> 26h   WORD    value of ES</span><br /><span class="line"> 28h   WORD    (ret) value of FLAGS after call</span><br /><span class="line"> 2Ah  N DWORDs (call) stack parameters for INT 15/AH=12h call</span><br /><span class="line">       (ret) stack results from INT 15/AH=12h call</span><br /><span class="line">---function 0026h---</span><br /><span class="line"> 18h   WORD    (call) Network Manager subfunction (see #0483)</span><br /><span class="line">       (ret) status??? (0000h on error)</span><br /><span class="line"> 1Ah   WORD    (call) size of parameter data</span><br /><span class="line">       (ret) size of returned data</span><br /><span class="line"> 1Ch  N BYTEs  (call) parameter data required by call (see #0484,#0485,#0501)</span><br /><span class="line">       (ret) result data (see #0494,#0495,#0500)</span><br /><span class="line">---function 0027h---</span><br /><span class="line"> 18h   WORD    (ret) status: 0000h if successful, FFFFh on error</span><br /><span class="line"> 1Ah   WORD    socket&#39;s file handle</span><br /><span class="line">---functions 0028h,0029h---</span><br /><span class="line"> 18h   WORD    (call) file handle for which to set priority low/high</span><br /><span class="line">           FFFFh to change calling task&#39;s priority</span><br /><span class="line">---function 002Ah---</span><br /><span class="line"> no additional fields</span><br /><span class="line"></span><br /><span class="line">(Table 0483)</span><br /><span class="line">Values for DESQview/X Network Manager subfunction:</span><br /><span class="line"> 0004h &#34;so_exit&#34;???</span><br /><span class="line"> 0005h &#34;gethostbyname&#34;</span><br /><span class="line"> 0006h &#34;gethostname&#34;</span><br /><span class="line"> 0009h &#34;socket&#34;</span><br /><span class="line"> 000Dh &#34;gethostbyaddr&#34;</span><br /><span class="line"> 000Fh &#34;getprotobyname&#34;</span><br /><span class="line"> 0010h get protocol name for protocol number</span><br /><span class="line"> 0011h &#34;getservbyname&#34;</span><br /><span class="line"> 0012h &#34;getservbyport&#34; (see #0487)</span><br /><span class="line"> 0013h &#34;getsockname&#34;??? (see #0488)</span><br /><span class="line"> 0016h &#34;shutdown&#34; (see #0489)</span><br /><span class="line"> 0017h kill Network Manager</span><br /><span class="line"> 0018h &#34;getpeername&#34;??? (see #0490)</span><br /><span class="line"> 0019h ??? (called by socket function 0000h) (see #0491)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">.NG limit reached, continued in next section...</span></span><br /></pre>
  
  
  


      </article>

    </section>

    
      <footer>
        <nav class="box">
          <dl>
            <dt>Generated</dt><dd>2025-12-02 09:10:33</dd>
            <dt>Generator</dt><dd><a href="https://ng2web.davep.dev">ng2web v1.2.0 (ngdb v1.1.0)</a></dd>
          </dl>
        </nav>
      </footer>
    

  </body>

</html>

