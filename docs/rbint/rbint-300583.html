





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » 86 Bugs</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-300420.html">
    <link rel="next" href="rbint-304065.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-300420.html">Previous</a></li>


          

<li><a href="rbint-250757.html">Up</a></li>


          

<li><a href="rbint-304065.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>Lists</li>
            <ul>
              <li><a href="index.html">Comments</a></li>
              <li><a href="rbint-7995.html">Interrupts</a></li>
              <li><a href="rbint-15401.html">Glossary</a></li>
              <li><a href="rbint-64347.html">Memory</a></li>
              <li><a href="rbint-180090.html">CMOS</a></li>
              <li><a href="rbint-250757.html">86 Bugs</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Function: </span></span><br /><span class="line"></span><br /><span class="line">Loads virtually all processor registers with defined values from memory.</span><br /><span class="line">Initialises processor to specified state. Apparently aliased on the 286 by</span><br /><span class="line">opcode 0f 04.</span><br /><span class="line"></span><br /><span class="line">The 286 LOADALL instruction reads a block of 102 bytes into the chip,</span><br /><span class="line">starting at address 000800 hex.</span><br /><span class="line"></span><br /><span class="line">          Memory description for LOADALL read area on 286:</span><br /><span class="line">          (addresses are in hexadecimal, lengths in decimal)</span><br /><span class="line"></span><br /><span class="line">          0800:  6   N/A</span><br /><span class="line">          0806:  2   MSW (Machine Status Word)</span><br /><span class="line">          0808: 14   N/A</span><br /><span class="line">          0816:  2   TR (Task Register)</span><br /><span class="line">          0818:  2   FLAGS (286 Flags)</span><br /><span class="line">          081a:  2   IP (Instruction Pointer)</span><br /><span class="line">          081c:  2   LDT (Local Descriptortable)</span><br /><span class="line">          081e:  2   DS (Data Segment)</span><br /><span class="line">          0820:  2   SS (Stack Segment)</span><br /><span class="line">          0822:  2   CS (Code Segment)</span><br /><span class="line">          0824:  2   ES (Extra Segment)</span><br /><span class="line">          0826:  2   DI (Destination Index)</span><br /><span class="line">          0828:  2   SI (Source Index)</span><br /><span class="line">          082a:  2   BP (Base Pointer)</span><br /><span class="line">          082c:  2   SP (Stack Pointer)</span><br /><span class="line">          082e:  2   BX (BX register)</span><br /><span class="line">          0830:  2   DX (DX register)</span><br /><span class="line">          0832:  2   CX (CX register)</span><br /><span class="line">          0834:  2   AX (AX register)</span><br /><span class="line">          0836:  6   ES cache (ES descriptor _cache_)</span><br /><span class="line">          083c:  6   CS cache (CS descriptor _cache_)</span><br /><span class="line">          0842:  6   SS cache (SS descriptor _cache_)</span><br /><span class="line">          0848:  6   DS cache (DS descriptor _cache_)</span><br /><span class="line">          084e:  6   GDTR (Global Descriptor Table)</span><br /><span class="line">          0854:  6   LDT cache (Local Descriptor_cache_)</span><br /><span class="line">          085a:  6   IDTR (Interrupt Descriptor table)</span><br /><span class="line">          0860:  6   TSS cache (Task State Segment _cache_)</span><br /><span class="line"></span><br /><span class="line">          Descriptor caches layout:</span><br /><span class="line">          3 bytes    24 bit physical address of segment</span><br /><span class="line">          1 byte     access rights byte, same format as access right byte</span><br /><span class="line">                     in a regular descriptor. The &#39;present&#39; bit now</span><br /><span class="line">                     represents a &#39;valid&#39; bit. If this bit is cleared</span><br /><span class="line">                     (zero) the segment is invalid and accessing it will</span><br /><span class="line">                     trigger exception 0dh.</span><br /><span class="line">                     The DPL (Descriptor Privilege Level) fields of the CS</span><br /><span class="line">                     and SS descriptor caches determine the CPL</span><br /><span class="line">                     (Current Privilege Level).</span><br /><span class="line">          2 bytes    16 bit segment length limit.</span><br /><span class="line"></span><br /><span class="line">This layout is the same for the GDTR and IDTR registers,</span><br /><span class="line">except that the access rights byte must be zero.</span><br /><span class="line"></span><br /><span class="line">The register caches are internal CPU registers containing a copy of the last</span><br /><span class="line">in protected mode (e.g. ES). An outline of the basics of 286 protected</span><br /><span class="line">mode register caching and register layout is beyond the scope of this file</span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line">The 386 LOADALL loads 204 (dec) bytes from the address at ES:EDI and resumes</span><br /><span class="line">execution in the specified state.</span><br /><span class="line"></span><br /><span class="line">          Memory description for LOADALL read area on 386+:</span><br /><span class="line">          (addresses are in hexadecimal, lengths in decimal)</span><br /><span class="line"></span><br /><span class="line">          relative offset: Bytes:   Registers:</span><br /><span class="line">          0000:  4   CR0</span><br /><span class="line">          0004:  4   EFLAGS</span><br /><span class="line">          0008:  4   EIP</span><br /><span class="line">          000c:  4   EDI</span><br /><span class="line">          0010:  4   ESI</span><br /><span class="line">          0014:  4   EBP</span><br /><span class="line">          0018:  4   ESP</span><br /><span class="line">          001c:  4   EBX</span><br /><span class="line">          0020:  4   EDX</span><br /><span class="line">          0024:  4   ECX</span><br /><span class="line">          0028:  4   EAX</span><br /><span class="line">          002c:  4   DR6</span><br /><span class="line">          0030:  4   DR7</span><br /><span class="line">          0034:  4   TR</span><br /><span class="line">          0038:  4   LDT</span><br /><span class="line">          003c:  4   GS (zero extended)</span><br /><span class="line">          0040:  4   FS (zero extended)</span><br /><span class="line">          0044:  4   DS (zero extended)</span><br /><span class="line">          0048:  4   SS (zero extended)</span><br /><span class="line">          004c:  4   CS (zero extended)</span><br /><span class="line">          0050:  4   ES (zero extended)</span><br /><span class="line">          0054: 12   TSS descriptor cache</span><br /><span class="line">          0060: 12   IDT descriptor cache</span><br /><span class="line">          006c: 12   GDT descriptor cache</span><br /><span class="line">          0078: 12   LDT descriptor cache</span><br /><span class="line">          0084: 12   GS descriptor cache</span><br /><span class="line">          0090: 12   FS descriptor cache</span><br /><span class="line">          009c: 12   DS descriptor cache</span><br /><span class="line">          00a8: 12   SS descriptor cache</span><br /><span class="line">          00b4: 12   CS descriptor cache</span><br /><span class="line">          00c0: 12   ES descriptor cache</span><br /><span class="line"></span><br /><span class="line">          Descriptor caches layout:</span><br /><span class="line">          1 byte     zero</span><br /><span class="line">          1 byte     access rights byte, same as 286</span><br /><span class="line">          2 bytes    zero</span><br /><span class="line">          4 bytes    32 bit physical base address of segment</span><br /><span class="line">          4 bytes    32 bit segment length limit</span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line">LSL   Load Segment Limit</span><br /><span class="line">──────────────────────────────────────────────────────────────────────────────</span><br /></pre>
  
  
  


      </article>

    </section>

  </body>

</html>

