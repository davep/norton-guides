





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Interrupts</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-4074059.html">
    <link rel="next" href="rbint-4096501.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="../index.html">Guides</a></li>


          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-4074059.html">Previous</a></li>


          

<li><a href="rbint-4031282.html">Up</a></li>


          

<li><a href="rbint-4096501.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>Lists</li>
            <ul>
              <li><a href="index.html">Comments</a></li>
              <li><a href="rbint-7995.html">Interrupts</a></li>
              <li><a href="rbint-15401.html">Glossary</a></li>
              <li><a href="rbint-64347.html">Memory</a></li>
              <li><a href="rbint-180090.html">CMOS</a></li>
              <li><a href="rbint-250757.html">86 Bugs</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Int 2F Fn 7A20  - Novell Netware - Adv Netware 4.0 Dos Requester - Get Vlm Call Address  <span class="ngb">(Cont.)</span></span></span><br /><span class="line"></span><br /><span class="line">   ES:DI -&gt; buffer for statistics (see #2551)</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = status (0000h if successful)</span><br /><span class="line">       buffer filled if successful</span><br /><span class="line"> 04h   VLM internal use</span><br /><span class="line">   BX = function</span><br /><span class="line">       0000h get interrupt vector (calls INT 21/AH=35h)</span><br /><span class="line">       0001h begin critical section (calls INT 2F/AX=1681h)</span><br /><span class="line">       0002h end critical section (calls INT 2F/AX=1682h)</span><br /><span class="line">       0003h ???</span><br /><span class="line"></span><br /><span class="line">Format of VLM.EXE statistics:</span><br /><span class="line">Offset Size    Description (Table 2551)</span><br /><span class="line"> 00h   WORD    size of statistics record in bytes (including this word)</span><br /><span class="line"> 02h   WORD    number of times a VLM has been mapped into memory</span><br /><span class="line"> 04h   WORD    number of times a VLM has been called</span><br /><span class="line"> 06h   WORD    offset of vcbArray buffer</span><br /><span class="line"> 08h   WORD    VLM ID of VLM currently mapped into memory</span><br /><span class="line"> 0Ah   BYTE    memory type: conventional/EMS/XMS</span><br /><span class="line"> 0Bh   BYTE    number of loaded VLMs</span><br /><span class="line"> 0Ch   WORD    EMS/XMS handle or 0000h if conventional memory</span><br /><span class="line"> 0Eh   WORD    start segment for conventional memory swap</span><br /><span class="line"> 10h   WORD    segment for global memory, or 0000h if conventional memory</span><br /><span class="line"> 12h 12 BYTEs  queue structure for asynchronous calls (see #2552)</span><br /><span class="line"> 1Eh 12 BYTEs  queue structure for synchronous calls (see #2552)</span><br /><span class="line"> 2Ah   WORD    current re-entrance level</span><br /><span class="line"> 2Ch   WORD    number of times EMS/XMS map-out performed</span><br /><span class="line"> 2Eh   BYTE    stack switch control</span><br /><span class="line"> 2Fh   BYTE    flag: nonzero if switcher loaded</span><br /><span class="line"> 30h 80 BYTEs  pathname of configuration file</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #2550</span><br /><span class="line"></span><br /><span class="line">Format of VLM.EXE queue structure:</span><br /><span class="line">Offset Size    Description (Table 2552)</span><br /><span class="line"> 00h   DWORD   queue head (initially 00000000h)</span><br /><span class="line"> 04h   DWORD   queue tail (initialized to be same as head)</span><br /><span class="line"> 08h   WORD    current queue size (number of nodes in queue)</span><br /><span class="line"> 0Ah   WORD    maximum queue size (in nodes)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #2551</span><br /><span class="line"></span><br /><span class="line">(Table 2553)</span><br /><span class="line">Call Connection Manager (CONN.VLM, ID 0010h) with:</span><br /><span class="line">Func   Description/Registers</span><br /><span class="line"> 01h   Conn Get Version</span><br /><span class="line">   BX = function</span><br /><span class="line">       0000h get version</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> AX = status (see #2546)</span><br /><span class="line">           BX = major version of VLM supported (0001h)</span><br /><span class="line">           CX = minor version of VLM supported (0000h)</span><br /><span class="line"> 03h   Conn Statistics</span><br /><span class="line">   CX = length of buffer</span><br /><span class="line">   ES:DI -&gt; buffer for connection statistics (see #2554)</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = status (0000h successful)</span><br /><span class="line"> 04h   Conn Alloc Handle</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = status (0000h successful)</span><br /><span class="line">       CX = connection handle</span><br /><span class="line"> 05h   Conn Validate Handle</span><br /><span class="line">   CX = connection handle</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = 0000h if valid handle</span><br /><span class="line"> 06h   Conn Free Handle</span><br /><span class="line">   CX = connection handle</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = status (0000h successful)</span><br /><span class="line"> 07h   Conn Get Entry Field</span><br /><span class="line">   BH = connection parameter (see #2556)</span><br /><span class="line">   CX = connection handle</span><br /><span class="line">   DX = value if BH is non-array parameter</span><br /><span class="line">   DH = offset in array if BH is array parameter</span><br /><span class="line">   DL = number of bytes to copy if BH is array</span><br /><span class="line">   ES:DI -&gt; return buffer if BH is array</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = 0000h if successful</span><br /><span class="line">       DL/DX = value if non-array parameter</span><br /><span class="line">       DH = maximum number of bytes in buffer if array parameter</span><br /><span class="line">       DL = number of bytes copied if array</span><br /><span class="line">       BX destroyed</span><br /><span class="line"> 08h   Conn Set Entry Field</span><br /><span class="line">   BH = connection parameter (see #2556)</span><br /><span class="line">   CX = connection handle</span><br /><span class="line">   DL/DX = value if BH is non-array parameter</span><br /><span class="line">   DH = offset in array if BH is array parameter</span><br /><span class="line">   DL = number of bytes to copy if BH is array</span><br /><span class="line">   DS:SI -&gt; buffer if BH is array</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = 0000h if successful</span><br /><span class="line">       DH = maximum number of bytes in buffer</span><br /><span class="line">       DL = number of bytes copied</span><br /><span class="line">       BX destroyed</span><br /><span class="line"> 09h   Conn Reset Entry Field</span><br /><span class="line">   BH = connection parameter (see #2556)</span><br /><span class="line">   CX = connection handle</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = 0000h if successful</span><br /><span class="line">       BX,DX destroyed</span><br /><span class="line"> 0Ah   Conn Lookup Handle</span><br /><span class="line">   BL = lookup type (00h equal, 40h not equal)</span><br /><span class="line">   BH = connection parameter (see #2556)</span><br /><span class="line">   CX = connection handle, 0000h if first</span><br /><span class="line">   DL/DX = value if BH is non-array parameter</span><br /><span class="line">   DH = offset in array if BH is array parameter</span><br /><span class="line">   DL = number of bytes to copy if BH is array</span><br /><span class="line">   DS:SI (ES:DI???) -&gt; buffer if BH is array</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = 0000h if successful</span><br /><span class="line">       CX = handle matching given parameters</span><br /><span class="line"> 0Dh   Conn Name Lookup</span><br /><span class="line">   CX = connection handle</span><br /><span class="line">   ES:DI -&gt; 49-byte buffer for server name or 0000h:0000h</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = 0000h if successful</span><br /><span class="line">       BX = length of server name</span><br /><span class="line">       ES:DI buffer filled if pointer not 0000h:0000h</span><br /><span class="line"> 0Eh   Conn Name To Handle</span><br /><span class="line">   DS:SI -&gt; uppercased server name</span><br /><span class="line">   CX = length of server name, 0000h if ASCIZ name</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = error code or 0000h if successful</span><br /><span class="line">           CX = connection handle if successful</span><br /><span class="line"> 0Fh   Conn Get Num Connections</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = status (0000h if successful)</span><br /><span class="line">       DX = number of connections</span><br /><span class="line">       CX = segment of connection table</span><br /><span class="line">           first entry in table (See #2555)</span><br /><span class="line"></span><br /><span class="line">Format of VLM connection statistics:</span><br /><span class="line">Offset Size    Description (Table 2554)</span><br /><span class="line"> 00h   WORD    total length of statistics record (including this word)</span><br /><span class="line"> 02h   WORD    number of connection handles allocated</span><br /><span class="line"> 04h   WORD    average name length (configured in NET.CFG)</span><br /><span class="line"> 06h   WORD    maximum number of tasks (configured in NET.CFG)</span><br /><span class="line"> 08h   WORD    number of failed &#34;allocate handle&#34; calls</span><br /><span class="line"> 0Ah   WORD    number of failed &#34;add name&#34; calls</span><br /><span class="line"> 0Ch   WORD    number of failed task calls</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  some versions of the NetWare requester reportedly do not implement</span><br /><span class="line">     this correctly</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #2553</span><br /><span class="line"></span><br /><span class="line">Format of NetWare VLM Connection Table [array]:</span><br /><span class="line">Offset Size    Description (Table 2555)</span><br /><span class="line"> 00h   WORD    Protocol VLMid    0032(NDS) 0031(BIND)      Func 07 equiv.</span><br /><span class="line">                 0033(PNW) 0000(unused)       BH=01h</span><br /><span class="line"> 02h   BYTE    (connection status)</span><br /><span class="line">       bit 6: connection locked               BH=16h</span><br /><span class="line">       bit 5: authenticated                   BH=03h</span><br /><span class="line">       bit 4: permanent                   BH=02h</span><br /><span class="line">       bit 2: broadcast msg waiting               BH=12h</span><br /><span class="line"> 03h   BYTE    (connection capabilities)</span><br /><span class="line">       bit 5: Large Internet Packets              none</span><br /><span class="line">       bit 3: Packet Burst Reset              BH=07h</span><br /><span class="line">       bit 2: Max I/O                     BH=06h</span><br /><span class="line">       bit 1: SFT3 change                 BH=05h</span><br /><span class="line">       bit 0: Packet Burst Support            BH=04h</span><br /><span class="line"> 04h   WORD    reference count                    BH=09h</span><br /><span class="line"> 06h   WORD    soft resource count                BH=15h</span><br /><span class="line"> 08h   BYTE    NCP Order Number                   BH=0Eh</span><br /><span class="line"> 09h   BYTE    Server security options                BH=14h</span><br /><span class="line">       bit 0: CRC enabled</span><br /><span class="line">       bit 1: packet signing required</span><br /><span class="line">       bit 5: packet signing enabled</span><br /><span class="line"> 0Ah   BYTE    OS Major Version                   BH=08h</span><br /><span class="line"> 0Bh   BYTE    OS Minor Version                   BH=08h</span><br /><span class="line"> 0Ch   WORD    Hops to Server                     BH=0Ah</span><br /><span class="line"> 0Eh   WORD    Maximum Packet Size for this connection        BH=0Bh</span><br /><span class="line"> 10h   WORD    LIP Parameters                     BH=13h</span><br /><span class="line"> 12h   WORD    NCP Request Type                   BH=10h</span><br /><span class="line"> 14h   BYTE    NCP Sequence                       BH=0Ch</span><br /><span class="line"> 15h   WORD    Connection Number                  BH=0Dh</span><br /><span class="line"> 17h   BYTE    ???                        none</span><br /><span class="line"> 18h   WORD    Transport VLMid 21(IPXNCP) 22(TCPNCP)          BH=0Fh</span><br /><span class="line"> 1Ah   BYTE    Node Address[4]                    BH=11h</span><br /><span class="line"> 1Eh   BYTE    Network[6]                     BH=11h</span><br /><span class="line"> 24h   BYTE    Socket[2]                      BH=11h</span><br /><span class="line"> 26h   BYTE    Local Target[6]                    BH=11h</span><br /><span class="line"> 2Ch   WORD    Round Trip Time                    BH=11h</span><br /><span class="line"> 2Eh   WORD    ???                        none</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #2553</span><br /><span class="line"></span><br /><span class="line">(Table 2556)</span><br /><span class="line">Values for NetWare Connection Manager CEI (Connection Entry Information):</span><br /><span class="line"> number    flags   description</span><br /><span class="line"> 00h   FR  error</span><br /><span class="line"> 01h   WL  VLM id of transport protocol (NDS/BIND/PNW)</span><br /><span class="line">       00h = wildcard</span><br /><span class="line"> 02h   FR  permanent flag (01h if connection is permanent)</span><br /><span class="line"> 03h   F   authenticated flag (01h if connection is authenticated)</span><br /><span class="line"> 04h   F   packet burst supported</span><br /><span class="line"> 05h   FR  SFT3 change status</span><br /><span class="line"> 06h   FR  connection needs maximum I/O transmission</span><br /><span class="line"> 07h   FR  packet burst reset needed</span><br /><span class="line"> 08h   W   server version</span><br /><span class="line"> 09h   W   reference count (tasks using connection, 00h = dynamic)</span><br /><span class="line"> 0Ah   W   distance to server associated with connection</span><br /><span class="line"> 0Bh   W   maximum packet size supported by transport protocol</span><br /><span class="line"> 0Ch   B   NCP sequence number</span><br /><span class="line"> 0Dh   W   connection number</span><br /><span class="line"> 0Eh   B   NCP order number</span><br /><span class="line"> 0Fh   WL  VLM id for transport protocol</span><br /><span class="line">       00h = wildcard, 21h = IPX, 22h = TCP</span><br /><span class="line"> 10h   W   NCP request type</span><br /><span class="line"> 11h   A   transport specific buffer</span><br /><span class="line">       12 byte server address</span><br /><span class="line">       6 byte  router address</span><br /><span class="line">       2 byte round trip time</span><br /><span class="line"> 12h   FR  broadcast message waiting</span><br /><span class="line"> 13h   W   large internet packets supported</span><br /><span class="line"> 14h   B   security options</span><br /><span class="line">       bit 0: CRC enabled</span><br /><span class="line">       bit 1: packet signing enabled</span><br /><span class="line">       bit 5: packet signing active</span><br /><span class="line"> 15h   W   soft resource count</span><br /><span class="line"> 16h   FR  connection locked</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  flag meanings</span><br /><span class="line">       F=flag value</span><br /><span class="line">       B=byte value</span><br /><span class="line">       W=word value</span><br /><span class="line">       A=array</span><br /><span class="line">       R=resettable</span><br /><span class="line">       L=settable only before authentication</span><br /><span class="line">       others=read only</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #2553</span><br /><span class="line"></span><br /><span class="line">(Table 2557)</span><br /><span class="line">Call TRAN.VLM (VLM ID 0020h) with:</span><br /><span class="line">Func   Description/Registers</span><br /><span class="line"> 01h   TRAN Get Version</span><br /><span class="line">   BX = function</span><br /><span class="line">       0000h get version</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> AX = status (see #2546)</span><br /><span class="line">           BX = major version of VLM supported (0001h)</span><br /><span class="line">           CX = minor version of VLM supported (0000h)</span><br /><span class="line"> 03h   TRAN Statistics</span><br /><span class="line"> 06h   TRAN Request Reply (see INT 21/AH=F2h)</span><br /><span class="line">   AL = NCP request code (see #1783 at INT 21/AH=F2h)</span><br /><span class="line">   BH = error handler flag</span><br /><span class="line">       00h default error handler</span><br /><span class="line">       01h return network errors to caller</span><br /><span class="line">       02h handle network errors in requester</span><br /><span class="line">   BL = request list length (max 5 fragments) (see #2558)</span><br /><span class="line">   CX = connection handle</span><br /><span class="line">   DH = 00h (reserved)</span><br /><span class="line">   DL = reply list length (max 5 fragments) (see #2558)</span><br /><span class="line">   DS:SI -&gt; address list (each element is DWORD address + WORD length)</span><br /><span class="line">   ES:DI -&gt; address list</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = error code, 0000h if successful (see #2546)</span><br /><span class="line">       BX,DX destroyed</span><br /><span class="line">       ES:DI buffer filled with reply packet fragments</span><br /><span class="line"> 08h   TRAN Schedule/Cancel Event</span><br /><span class="line">   BX = subfunction</span><br /><span class="line">       0000h schedule event</span><br /><span class="line">       AX = number of timer ticks to delay before calling function</span><br /><span class="line">       ES:SI -&gt; event control block (including valid call address)</span><br /><span class="line">       0001h cancel event</span><br /><span class="line">       ES:SI -&gt; event control block (including call address)</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = status (0000h = successful) (see #2546)</span><br /><span class="line"> 09h   TRAN Get Max Phys Size</span><br /><span class="line">   BX = subfunction</span><br /><span class="line">       00h get maximum node size</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> AX = status (0000h = successful) (see #2546)</span><br /><span class="line">           BX = maximum supported physical packet size</span><br /><span class="line">           DX = size of protocol header</span><br /><span class="line">           SI = RequestReply socket number</span><br /><span class="line">       01h get maximum route size to specified server</span><br /><span class="line">       CX = connection handle for route to be checked</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> AX = status (0000h = successful) (see #2546)</span><br /><span class="line">           DX = maximum supported packet size for current route</span><br /><span class="line"> 0Ah   TRAN Broadcast Mux</span><br /><span class="line">   BX = subfunction</span><br /><span class="line">       0001h get stored broadcast (Personal NetWare)</span><br /><span class="line">       ES:DI -&gt; 60-byte buffer for counted ASCIZ message string</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = status (0000h = successful) (see #2546)</span><br /><span class="line"></span><br /><span class="line">Format of TRAN.VLM request/reply fragment descriptor (array):</span><br /><span class="line">Offset Size    Description (Table 2558)</span><br /><span class="line"> 00h   DWORD   address of buffer</span><br /><span class="line"> 04h   WORD    length of buffer</span><br /><span class="line"></span><br /><span class="line">(Table 2559)</span><br /><span class="line">Call IPXNCP.VLM (VLM ID 0021h) with:</span><br /><span class="line">Func   Description/Registers</span><br /><span class="line"> 01h   IPX Get Version</span><br /><span class="line">   BX = function</span><br /><span class="line">       0000h get version</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> AX = status (see #2546)</span><br /><span class="line">           BX = major version of VLM supported (0001h)</span><br /><span class="line">           CX = minor version of VLM supported (0000h)</span><br /><span class="line"> 03h   IPX Statistics</span><br /><span class="line">   CX = length of buffer</span><br /><span class="line">   ES:DI -&gt; buffer for statistics (see #2560)</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = status (see #2546)</span><br /><span class="line"> 06h   IPXNCP Request Reply???</span><br /><span class="line">   functionally equivalent to Tran Request Reply???</span><br /><span class="line"></span><br /><span class="line">Format of NetWare IPX statistics:</span><br /><span class="line">Offset Size    Description (Table 2560)</span><br /><span class="line"> 00h   WORD    size of statistics, including this word</span><br /><span class="line"> 02h   DWORD   number of TRAN Request Reply calls made</span><br /><span class="line"> 06h   WORD    number of user aborts</span><br /><span class="line"> 08h   WORD    number of user retries</span><br /><span class="line"> 0Ah   WORD    IPX receive errors</span><br /><span class="line"> 0Ch   WORD    IPX send errors</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">.NG limit reached, continued in next section...</span></span><br /></pre>
  
  
  


      </article>

    </section>

  </body>

</html>

