





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » 86 Bugs</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-354714.html">
    <link rel="next" href="rbint-357119.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="../index.html">Guides</a></li>


          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-354714.html">Previous</a></li>


          

<li><a href="rbint-250757.html">Up</a></li>


          

<li><a href="rbint-357119.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>Lists</li>
            <ul>
              <li><a href="index.html">Comments</a></li>
              <li><a href="rbint-7995.html">Interrupts</a></li>
              <li><a href="rbint-15401.html">Glossary</a></li>
              <li><a href="rbint-64347.html">Memory</a></li>
              <li><a href="rbint-180090.html">CMOS</a></li>
              <li><a href="rbint-250757.html">86 Bugs</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Function:</span></span><br /><span class="line"></span><br /><span class="line">This instruction is available only on the IIT (Integrated Information</span><br /><span class="line">Technology Inc.) math processors. The instruction performs a 4x4 matrix</span><br /><span class="line">multiply in one instruction using three banks of 8 floating point registers.</span><br /><span class="line">The operands must be loaded to a specific bank in a specific order using</span><br /><span class="line"></span><br /><span class="line">Xn = (A00 * Xo) + (A01 * Xo) + (A02 * Xo) + (A03 * Xo)</span><br /><span class="line">Yn = (A10 * Yo) + (A11 * Yo) + (A12 * Yo) + (A13 * Yo)</span><br /><span class="line">Zn = (A20 * Zo) + (A21 * Zo) + (A22 * Zo) + (A23 * Zo)</span><br /><span class="line">Vn = (A30 * Vo) + (A31 * Vo) + (A32 * Vo) + (A33 * Vo)</span><br /><span class="line"></span><br /><span class="line">Where Xo stands for the original X value and Xn for the result. Operands</span><br /><span class="line">must be loaded to the following registers in the specified banks in the</span><br /><span class="line">specified order.</span><br /><span class="line"></span><br /><span class="line">          Before FMUL4X4             After FMUL4X4</span><br /><span class="line"></span><br /><span class="line">                   bank              bank</span><br /><span class="line">          Register: 0    1    2      0</span><br /><span class="line"></span><br /><span class="line">          ST(0)     Xo   A33  A31    Xn</span><br /><span class="line">          ST(1)     Yo   A23  A21    Yn</span><br /><span class="line">          ST(2)     Zo   A13  A11    Zn</span><br /><span class="line">          ST(3)     Vo   A03  A01    Vn</span><br /><span class="line">          ST(4)          A32  A30     ?</span><br /><span class="line">          ST(5)          A22  A20     ?</span><br /><span class="line">          ST(6)          A12  A10     ?</span><br /><span class="line">          ST(7)          A02  A00     ?</span><br /><span class="line"></span><br /><span class="line">All four banks can be selected by using the bankswitching instructions,</span><br /><span class="line">but only bank 0, 1 and 2 make sense since bank 3 is an internal scratchpad.</span><br /><span class="line">The separate banks can contain 8 floating point numbers and may be used</span><br /><span class="line">with normal instructions. Each bank acts like an independent 287.</span><br /><span class="line">Provided the status of the status word is saved inbetween and restored</span><br /><span class="line">properly after a bankswitch each bank can be used simultaneously.</span><br /><span class="line"></span><br /><span class="line">Alternatively you could keep an eye on the TOP and STACKPOINTER indicators,</span><br /><span class="line">making sure they are the same as before when initiating a bankswitch.</span><br /><span class="line">By using FFREE, FFREEP and FINCSTP or FDECSTP instructions you may manually</span><br /><span class="line">manipulate the stack.</span><br /><span class="line"></span><br /><span class="line">This feature of the IIT chips can be used to perform complex operations</span><br /><span class="line">in registers with many components remaining the same for a large dataset,</span><br /><span class="line">only saving intermediary results to one memory location, bankswitching</span><br /><span class="line">to the next series of operands, loading that one operand and continuing the</span><br /><span class="line">calculation with the next set of operands already in that bank. This does</span><br /><span class="line">require another read into the new bank but may save time and memoryspace</span><br /><span class="line">compared to memory based operands or multiple pass algorithms with multiple</span><br /><span class="line">arrays of intermediary results.</span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line">FENI / FDISI  Enable /Disable Floating point interrupts</span><br /><span class="line">──────────────────────────────────────────────────────────────────────────────</span><br /></pre>
  
  
  


      </article>

    </section>

  </body>

</html>

