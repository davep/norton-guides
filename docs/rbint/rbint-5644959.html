





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Interrupts</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-5641184.html">
    <link rel="next" href="rbint-5655963.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-5641184.html">Previous</a></li>


          

<li><a href="rbint-5624141.html">Up</a></li>


          

<li><a href="rbint-5655963.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>Lists</li>
            <ul>
              <li><a href="index.html">Comments</a></li>
              <li><a href="rbint-7995.html">Interrupts</a></li>
              <li><a href="rbint-15401.html">Glossary</a></li>
              <li><a href="rbint-64347.html">Memory</a></li>
              <li><a href="rbint-180090.html">CMOS</a></li>
              <li><a href="rbint-250757.html">86 Bugs</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Int 6F Fn 00  - Hp Vectra Ex-bios - &#34;f_isr&#34; (internal) - Respond To Logic</span>  [<span class="ngb">b</span>]</span><br /><span class="line"></span><br /><span class="line">   AH = 00h</span><br /><span class="line">   BP = ID for driver (see #3412)</span><br /><span class="line">   DH = data type (see #3413)</span><br /><span class="line">   DL = physical device driver&#39;s index (driver ID / 6)</span><br /><span class="line">   BX,CX = data</span><br /><span class="line">   ES:0000h -&gt; physical device&#39;s Describe Record (see #3420)</span><br /><span class="line">   ---keypress event data---</span><br /><span class="line">       BH = keyboard state (only if bit 5 of DH set) (see #3414)</span><br /><span class="line">       BL = scancode (if bit 4 of DH clear)</span><br /><span class="line">       CX = number of scancodes in list (if bit 4 of DH set)</span><br /><span class="line">       ES:SI -&gt; scancode list (if bit 4 of DH set)</span><br /><span class="line">   ---motion event data---</span><br /><span class="line">       BX = new X position (abs device) or X increment (relative device)</span><br /><span class="line">       CX = new Y position (abs device) or Y increment (relative device)</span><br /><span class="line">   ---button event data</span><br /><span class="line">       BL = button information</span><br /><span class="line">       bits 15-8 reserved</span><br /><span class="line">       bit 7: button state (0 = down, 1 = up)</span><br /><span class="line">       bits 6-0: button number (0-7)</span><br /><span class="line">       BH = reserved</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Return:</span> AH = status (see #3415)</span><br /><span class="line">   BP,DS destroyed</span><br /><span class="line">   ---if device is keyboard translator---</span><br /><span class="line">       BL = translated scancode</span><br /><span class="line">       BH = new keyboard state (if DH bit 5 set) (see #3414)</span><br /><span class="line">       DH = new scancode type (see #3413)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Notes:</span> INT 6F corresponds to IRQ23 on the original HP Vectra AT, which is</span><br /><span class="line">     unavailable because of its use as a BIOS extension software interrupt</span><br /><span class="line">   the INT 6F handler consists of an instruction to load DS with the</span><br /><span class="line">     driver&#39;s data segment followed by an indexed far jump using BP to</span><br /><span class="line">     select the destination vector; since the interrupt handler is</span><br /><span class="line">     located immediately following the dispatch table, the HP_VECTOR_TABLE</span><br /><span class="line">     may be found by looking at offset 0000h in the INT 6F segment, and</span><br /><span class="line">     its size is equal to the offset of the interrupt handler</span><br /><span class="line">   each entry in the HP_VECTOR table consists of a DWORD for the driver&#39;s</span><br /><span class="line">     entry point address and a WORD for the driver&#39;s data segment</span><br /><span class="line">   this function is not user-callable, as it is a response to a physical</span><br /><span class="line">     event, and assumes that the caller has already handled the physical</span><br /><span class="line">     interrupt and updated the Describe Record (see #3420) to reflect</span><br /><span class="line">     the event</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> INT 6C&#34;HP Vectra&#34;,INT 6F/AX=0200h&#34;HP Vectra&#34;</span><br /><span class="line"></span><br /><span class="line">(Table 3412)</span><br /><span class="line">Values for HP Vectra EX-BIOS driver ID:</span><br /><span class="line"> 0000h V_SCOPY (null driver, but DS value points at system copyright string)</span><br /><span class="line"> 0006h V_DOLITTLE (null driver)</span><br /><span class="line"> 000Ch V_PNULL (null driver)</span><br /><span class="line"> 0012h V_SYSTEM</span><br /><span class="line"> 0018h reserved</span><br /><span class="line"> 001Eh V_S8259</span><br /><span class="line"> 0024h reserved</span><br /><span class="line"> 002Ah V_SINPUT</span><br /><span class="line"> 0030h reserved</span><br /><span class="line"> 0036h V_QWERTY (keyboard translator)</span><br /><span class="line"> 003Ch V_SOFTKEY (keyboard translator)</span><br /><span class="line"> 0042h V_FUNCTION (keyboard translator)</span><br /><span class="line"> 0048h V_NUMPAD (keyboard translator)</span><br /><span class="line"> 004Eh V_CCP (keyboard translator)</span><br /><span class="line"> 0054h V_SVIDEO</span><br /><span class="line"> 005Ah V_STRACK</span><br /><span class="line"> 0060h V_EVENT_TOUCH</span><br /><span class="line"> 0066h V_EVENT_TABLET</span><br /><span class="line"> 006Ch V_EVENT_POINTER</span><br /><span class="line"> 0072h reserved</span><br /><span class="line"> 0078h reserved</span><br /><span class="line"> 007Eh reserved</span><br /><span class="line"> 0084h reserved</span><br /><span class="line"> 008Ah V_CCPCUR (keyboard translator)</span><br /><span class="line"> 0090h V_RAW (keyboard translator)</span><br /><span class="line"> 0096h V_CCPNUM (keyboard translator)</span><br /><span class="line"> 009Ch V_OFF (keyboard translator)</span><br /><span class="line"> 00A2h V_CCPGID (translator: cursor control pad keys to GID data)</span><br /><span class="line"> 00A8h V_SKEY2FKEY (keyboard translator)</span><br /><span class="line"> 00AEh V_8041</span><br /><span class="line"> 00B4h V_PGID_CCP</span><br /><span class="line"> 00BAh C_LTABLET</span><br /><span class="line"> 00C0h V_LPOINTER (pointing device: mouse, etc.)</span><br /><span class="line"> 00C6h V_LTOUCH (touch screen)</span><br /><span class="line"> 00CCh V_LHPMOUSE</span><br /><span class="line"> 00D2h ???</span><br /><span class="line"> ...</span><br /><span class="line"> 0102h ???</span><br /><span class="line"> 0108h V_LNULL</span><br /><span class="line"> 010Eh reserved</span><br /><span class="line"> 0114h V_HPHIL</span><br /><span class="line"> 011Ah-01C2h reserved</span><br /><span class="line"> 016Eh V_SCANDOOR (scancode management chip driver) (ES/QS/RS only)</span><br /><span class="line"> 01C8h-0228h available</span><br /><span class="line"></span><br /><span class="line">(Table 3413)</span><br /><span class="line">Values for HP Vectra EX-BIOS ISR data type:</span><br /><span class="line"> 00h   reserved &#34;T_KC_R0&#34;</span><br /><span class="line"> 01h   reserved &#34;T_KC_R1&#34;</span><br /><span class="line"> 02h   ASCII data</span><br /><span class="line"> 03h   reserved &#34;T_KC_R3&#34;</span><br /><span class="line"> 04h   HP150 keyboard (ITF) scancode</span><br /><span class="line"> 05h   reserved &#34;T_KC_R5&#34;</span><br /><span class="line"> 06h   device-definable type</span><br /><span class="line"> 07h   HP Vectra keyboard set</span><br /><span class="line"> 08h   IBM AT scancode set</span><br /><span class="line"> 09h   button data</span><br /><span class="line"> 0Ah   IBM PC scancode set</span><br /><span class="line"> 0Bh   Softkey keypad (F1-F8)</span><br /><span class="line"> 0Ch   function key keypad (F1-F10)</span><br /><span class="line"> 0Dh   HP Cursor Control Pad keypad</span><br /><span class="line"> 0Eh   Qwerty keypad</span><br /><span class="line"> 0Fh   Numeric keypad</span><br /><span class="line"> 1xh   bit 4 set: string of CX scancode of type 0xh at ES:SI</span><br /><span class="line"> 2xh   bit 5 set: BH contains current keyboard state</span><br /><span class="line"> 40h   signed 8-bit relative data</span><br /><span class="line"> 41h   signed 16-bit relative data</span><br /><span class="line"> 42h   unsigned 8-bit absolute data</span><br /><span class="line"> 43h   unsigned 16-bit absolute data</span><br /><span class="line"> 45h   specially-formed data (80x25) generated by V_LTOUCH</span><br /><span class="line"> 46h   specially-formed data (640x200) generated by V_LTABLET</span><br /><span class="line"> 47h   specially-formed data (640x200) generated by V_LPOINTER</span><br /><span class="line"></span><br /><span class="line">Bitfields for HP Vectra EX-BIOS keyboard state:</span><br /><span class="line">Bit(s) Description (Table 3414)</span><br /><span class="line"> 0 Alt pressed</span><br /><span class="line"> 1 Left Shift pressed</span><br /><span class="line"> 2 Right Shift pressed</span><br /><span class="line"> 3 Ctrl pressed</span><br /><span class="line"> 4 CapsLock active</span><br /><span class="line"> 5 NumLock active</span><br /><span class="line"> 6 Right unlabeled key pressed (some international keyboards)</span><br /><span class="line"> 7 Left unlabeled key pressed (some international keyboards)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #0506</span><br /><span class="line"></span><br /><span class="line">(Table 3415)</span><br /><span class="line">Values for HP Vectra EX-BIOS status:</span><br /><span class="line"> 00h   successful</span><br /><span class="line"> 02h   unsupported function</span><br /><span class="line"> 04h   not serviced</span><br /><span class="line"> 06h   done (no further processing should be performed on the ISR event)</span><br /><span class="line"> F2h   device is out of paper</span><br /><span class="line"> F4h   device is offline</span><br /><span class="line"> F6h   no more space for more drivers</span><br /><span class="line"> F8h   driver is busy</span><br /><span class="line"> FAh   bad parameter</span><br /><span class="line"> FEh   operation failed</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  status codes are always even; negative values (&gt;= 80h) indicate errors</span><br /><span class="line">     while positive values indicate exceptional conditions</span><br /><span class="line"></span><br /><span class="line">Format of HP EX-BIOS driver header data:</span><br /><span class="line">Offset Size    Description (Table 3416)</span><br /><span class="line"> 00h   WORD    driver attributes (see #3417)</span><br /><span class="line"> 02h   WORD    string index of driver&#39;s name</span><br /><span class="line"> 04h   WORD    driver&#39;s default logical device vector (see #3412)</span><br /><span class="line"> 06h   WORD    driver&#39;s parent class (bitset) (see #3418)</span><br /><span class="line"> 08h   WORD    driver&#39;s child class (bitset)</span><br /><span class="line"> 0Ah   WORD    driver&#39;s parent vector</span><br /><span class="line"> 0Ch   WORD    driver&#39;s child vector</span><br /><span class="line"> 0Eh   BYTE    major subaddress</span><br /><span class="line"> 0Fh   BYTE    minor subaddress</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Notes:</span> this structure is located at offset 0 in the driver&#39;s data segment,</span><br /><span class="line">     which in turn may be read from the HP_VECTOR_TABLE (refer to note in</span><br /><span class="line">     main entry)</span><br /><span class="line">   only the first WORD is required, and everything from offset 6 onward</span><br /><span class="line">     is only required if the device wishes to perform device mapping</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #3419,#3420</span><br /><span class="line"></span><br /><span class="line">Bitfields for HP EX-BIOS driver header attributes:</span><br /><span class="line">Bit(s) Description (Table 3417)</span><br /><span class="line"> 15    this is a complete driver header</span><br /><span class="line"> 14    &#34;ATR_DEVCFG&#34; reserved</span><br /><span class="line"> 13    driver can be mapped with the parent vector at offset 0Ah</span><br /><span class="line"> 12    driver can be mapped with the child vector at offset 0Ch</span><br /><span class="line"> 11-9  driver type</span><br /><span class="line">   000 reserved vector</span><br /><span class="line">   001 free vector</span><br /><span class="line">   010 EX-BIOS service</span><br /><span class="line">   011 logical driver (mapped from parent to child)</span><br /><span class="line">   100 mappable driver (cannot be last in driver chain)</span><br /><span class="line">   101 mappable driver that is last in driver chain</span><br /><span class="line">   110 input driver (mappable)</span><br /><span class="line">   111 reserved</span><br /><span class="line"> 8 &#34;ATR_STRING&#34; reserved</span><br /><span class="line"> 7 call SF_START whenever driver is remapped</span><br /><span class="line"> 6-5   addressing requirements</span><br /><span class="line">   00 no subaddresses required</span><br /><span class="line">   01 requires major address be stored at offset 0Eh</span><br /><span class="line">   10 requires minor address be stored at offset 0Fh</span><br /><span class="line">   11 required major,minor, and mid addresses (minor in low nybble of</span><br /><span class="line">         offset 0Fh, mid address in high nybble of 0Fh)</span><br /><span class="line"> 4 driver can be shared between several parent drivers</span><br /><span class="line"> 3 driver can be shared between several child drivers</span><br /><span class="line"> 2 this driver header is in ROM</span><br /><span class="line"> 1 &#34;ATR_YIELD&#34; reserved</span><br /><span class="line"> 0 reserved</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #3416,#3418</span><br /><span class="line"></span><br /><span class="line">Bitfields for HP EX-BIOS driver class:</span><br /><span class="line">Bit(s) Description (Table 3418)</span><br /><span class="line"> 15    maps F1 to F8 softkeys</span><br /><span class="line"> 14    keyboard</span><br /><span class="line"> 13    cursor pad</span><br /><span class="line"> 12    console device</span><br /><span class="line"> 11    serial output device (may be capable of limited input)</span><br /><span class="line"> 10    &#34;CL_COMM&#34; reserved</span><br /><span class="line"> 9 interfaces multiple resources transparent to operating system</span><br /><span class="line"> 8 serial output device filter (can be mapped between logical and physical</span><br /><span class="line">     driver to perform translations)</span><br /><span class="line"> 7 addressed block device</span><br /><span class="line"> 6 priority boot device</span><br /><span class="line"> 5 logical graphics input device</span><br /><span class="line"> 4 physical graphics input device (can map to child of another driver)</span><br /><span class="line"> 3 &#34;CL_GID&#34; can map to an event</span><br /><span class="line"> 2 physical touch device</span><br /><span class="line"> 1 reserved</span><br /><span class="line"> 0 class extension bit</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  special values: FFFFh maps to all other devices (V_PNULL), and 0000h</span><br /><span class="line">     maps to no other driver</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #3416</span><br /><span class="line"></span><br /><span class="line">Format of HP EX-BIOS global data area:</span><br /><span class="line">Offset Size    Description (Table 3419)</span><br /><span class="line"> 00h 20 BYTEs  reserved</span><br /><span class="line"> 14h   BYTE    sound driver status</span><br /><span class="line"> 15h   BYTE    number of pending key clicks (max 4) (see AH=34h/BP=0012h)</span><br /><span class="line"> 16h   BYTE    current tick duration scaling factor</span><br /><span class="line"> 17h   BYTE    current key click volume</span><br /><span class="line"> 18h   WORD    current beep period (10 us increments) (see AH=3Ch/BP=0012h)</span><br /><span class="line"> 1Ah   WORD    current beep duration (10 us increments)</span><br /><span class="line"> 1Ch   BYTE    number of pending beep functions (max 4) (see AH=3Ah/BP=0012h)</span><br /><span class="line"> 1Dh   BYTE    reserved</span><br /><span class="line"> 1Eh   WORD    next unused string index number</span><br /><span class="line"> 20h   ... reserved</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #3416</span><br /><span class="line"></span><br /><span class="line">Format of HP EX-BIOS Driver Describe Record:</span><br /><span class="line">Offset Size    Description (Table 3420)</span><br /><span class="line"> 00h 16 BYTEs  EX-BIOS driver header data (see #3416)</span><br /><span class="line"> 10h   BYTE    device GID type</span><br /><span class="line">       bits 7-4: device type</span><br /><span class="line">       bits 3-0: physical device link address</span><br /><span class="line"> 11h   BYTE    physical device ID (see #3422)</span><br /><span class="line"> 12h   WORD    logical device status bits (see #3421)</span><br /><span class="line"> 14h   BYTE    physical device vector number (driver ID / 6)</span><br /><span class="line"> 15h   BYTE    maximum number of axes reported (0-2)</span><br /><span class="line"> 16h   BYTE    device class</span><br /><span class="line">       bits 7-4: current class</span><br /><span class="line">       bits 3-0: default class</span><br /><span class="line"> 17h   BYTE    number of buttons/prompts</span><br /><span class="line">       bits 7-4: number of prompts</span><br /><span class="line">       bits 3-0: number of buttons</span><br /><span class="line"> 18h   BYTE    reserved</span><br /><span class="line"> 19h   BYTE    (physical devices only) maximum output burst length</span><br /><span class="line"> 1Ah   BYTE    (physical devices only) number of write registers</span><br /><span class="line"> 1Bh   BYTE    (physical devices only) number of read registers</span><br /><span class="line"> 1Ch   BYTE    button transition flags (bit 0 = button0, etc.)</span><br /><span class="line"> 1Dh   BYTE    current button states (bit 0 = button0, etc.)</span><br /><span class="line"> 1Eh   WORD    device resolution</span><br /><span class="line"> 20h   WORD    maximum x-axis count</span><br /><span class="line"> 22h   WORD    maximum y-axis count</span><br /><span class="line"> 24h   WORD    X position data for absolute devices</span><br /><span class="line"> 26h   WORD    Y position data for absolute devices</span><br /><span class="line"> 28h   WORD    X delta for relative devices</span><br /><span class="line"> 2Ah   WORD    Y delta for relative devices</span><br /><span class="line"> 2Ch   WORD    (logical devices only) X-axis scaling accumulator</span><br /><span class="line">       (fraction of one logical unit)</span><br /><span class="line"> 2Eh   WORD    (logical devices only) Y-axis scaling accumulator</span><br /><span class="line">       (fraction of one logical unit)</span><br /><span class="line"></span><br /><span class="line">Bitfields for HP logical device status flags:</span><br /><span class="line">Bit(s) Description (Table 3421)</span><br /><span class="line"> 15-5  reserved</span><br /><span class="line"> 4 event enabled</span><br /><span class="line"> 3 tracking enabled</span><br /><span class="line"> 2 clipping enabled</span><br /><span class="line"> 1 button error occurred</span><br /><span class="line"> 0 interrupt in progress</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #3420</span><br /><span class="line"></span><br /><span class="line">(Table 3422)</span><br /><span class="line">Values for HP-HIL device ID:</span><br /><span class="line"> 00h-02h reserved</span><br /><span class="line"> 03h   Swiss-French keyboard</span><br /><span class="line"> 04h-06h reserved</span><br /><span class="line"> 07h   Canadian-English keyboard</span><br /><span class="line"> 08h-0Ah reserved</span><br /><span class="line"> 0Bh   Italian keyboard</span><br /><span class="line"> 0Ch   reserved</span><br /><span class="line"> 0Dh   Dutch keyboard</span><br /><span class="line"> 0Eh   Swedish keyboard</span><br /><span class="line"> 0Fh   German keyboard</span><br /><span class="line"> 10h-12h reserved</span><br /><span class="line"> 13h   Spanish keyboard</span><br /><span class="line"> 14h   reserved</span><br /><span class="line"> 15h   Belgian (Flemish) keyboard</span><br /><span class="line"> 16h   Finnish keyboard</span><br /><span class="line"> 17h   UK keyboard</span><br /><span class="line"> 18h   French-Canadian keyboard</span><br /><span class="line"> 19h   Swiss-German keyboard</span><br /><span class="line"> 1Ah   Nerwegian keyboard</span><br /><span class="line"> 1Bh   Frensh keyboard</span><br /><span class="line"> 1Ch   Danish keyboard</span><br /><span class="line"> 1Dh   Katakana keyboard</span><br /><span class="line"> 1Eh   Latin American-Spanish keyboard</span><br /><span class="line"> 1Fh   US-American keyboard</span><br /><span class="line"> 20h-2Bh reserved</span><br /><span class="line"> 2Ch-2Fh tone generator</span><br /><span class="line"> 30h-3Fh reserved</span><br /><span class="line"> 40h-5Bh reserved (character entry)</span><br /><span class="line"> 5Ch-5Fh barcode reader</span><br /><span class="line"> 60h-67h reserved (relative positions)</span><br /><span class="line"> 68h-6Bh mouse</span><br /><span class="line"> 6Ch-6Fh trackball</span><br /><span class="line"> 70h-7Fh reserved (relative positions)</span><br /><span class="line"> 80h-87h reserved (absolute positions)</span><br /><span class="line"> 88h-8Bh touchpad</span><br /><span class="line"> 8Ch-8Fh touch screen</span><br /><span class="line"> 90h-97h graphics tablet</span><br /><span class="line"> 98h-9Fh reserved (absolute positions)</span><br /><span class="line"> A0h-BFh compressed keyboard (91-93 keys)</span><br /><span class="line"> C0h-DFh extended keyboard (107-109 keys)</span><br /><span class="line"> E0h-FFh standard keyboard (85-87 keys)</span><br /></pre>
  
  
  


      </article>

    </section>

  </body>

</html>

