





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Interrupts</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-2446259.html">
    <link rel="next" href="rbint-2466328.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-2446259.html">Previous</a></li>


          

<li><a href="rbint-2204700.html">Up</a></li>


          

<li><a href="rbint-2466328.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>Lists</li>
            <ul>
              <li><a href="index.html">Comments</a></li>
              <li><a href="rbint-7995.html">Interrupts</a></li>
              <li><a href="rbint-15401.html">Glossary</a></li>
              <li><a href="rbint-64347.html">Memory</a></li>
              <li><a href="rbint-180090.html">CMOS</a></li>
              <li><a href="rbint-250757.html">86 Bugs</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Int 21 Fn 4B  - Dos 2+ - &#34;exec&#34; - Load And/or Execute Program  <span class="ngb">(Cont.)</span></span></span><br /><span class="line"></span><br /><span class="line">               bit 0: non-empty bundle</span><br /><span class="line">               bit 1: 32-bit entry</span><br /><span class="line">        01h    WORD    object number</span><br /><span class="line">        03h    BYTE    entry type flags</span><br /><span class="line">               bit 0: exported</span><br /><span class="line">               bit 1: uses single data rather than instance</span><br /><span class="line">               bit 2: reserved</span><br /><span class="line">               bits 3-7: number of stack parameters</span><br /><span class="line">        04h    DWORD   offset of entry point</span><br /><span class="line">        08h  2 BYTEs   ???</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  empty bundles (bit flags at 00h = 00h) are used to skip unused indices,</span><br /><span class="line">     and do not contain the remaining nine bytes</span><br /><span class="line"></span><br /><span class="line">Format of LX linear executable entry table [array]:</span><br /><span class="line">Offset Size    Description (Table 1302)</span><br /><span class="line"> 00h   BYTE    number of bundles following (00h = end of entry table)</span><br /><span class="line"> 01h   BYTE    bundle type</span><br /><span class="line">       00h empty</span><br /><span class="line">       01h 16-bit entry</span><br /><span class="line">       02h 286 callgate entry</span><br /><span class="line">       03h 32-bit entry</span><br /><span class="line">       04h forwarder entry</span><br /><span class="line">       bit 7 set if additional parameter typing information is present</span><br /><span class="line">---bundle type 00h---</span><br /><span class="line"> no additional fields</span><br /><span class="line">---bundle type 01h---</span><br /><span class="line"> 02h   WORD    object number</span><br /><span class="line"> 04h   BYTE    entry flags</span><br /><span class="line">       bit 0: exported</span><br /><span class="line">       bits 7-3: number of stack parameters</span><br /><span class="line"> 05h   WORD    offset of entry point in object (shifted by page size shift)</span><br /><span class="line">---bundle type 02h---</span><br /><span class="line"> 02h   WORD    object number</span><br /><span class="line"> 04h   BYTE    entry flags</span><br /><span class="line">       bit 0: exported</span><br /><span class="line">       bits 7-3: number of stack parameters</span><br /><span class="line"> 05h   WORD    offset of entry point in object</span><br /><span class="line"> 07h   WORD    reserved for callgate selector (used by loader)</span><br /><span class="line">---bundle type 03h---</span><br /><span class="line"> 02h   WORD    object number</span><br /><span class="line"> 04h   BYTE    entry flags</span><br /><span class="line">       bit 0: exported</span><br /><span class="line">       bits 7-3: number of stack parameters</span><br /><span class="line"> 05h   DWORD   offset of entry point in object</span><br /><span class="line">---bundle type 04h---</span><br /><span class="line"> 02h   WORD    reserved</span><br /><span class="line"> 04h   BYTE    forwarder flags</span><br /><span class="line">       bit 0: import by ordinal</span><br /><span class="line">       bits 7-1 reserved</span><br /><span class="line"> 05h   WORD    module ordinal</span><br /><span class="line">       (forwarder&#39;s index into Import Module Name table)</span><br /><span class="line"> 07h   DWORD   procedure name offset or import ordinal number</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  all fields after the first two bytes are repeated N times</span><br /><span class="line"></span><br /><span class="line">Bitfields for linear executable fixup type:</span><br /><span class="line">Bit(s) Description (Table 1303)</span><br /><span class="line"> 7 ordinal is BYTE rather than WORD</span><br /><span class="line"> 6 16-rather than 8-object number/module ordinal</span><br /><span class="line"> 5 addition with DWORD rather than WORD</span><br /><span class="line"> 4 relocation info has size with new two bytes at end</span><br /><span class="line"> 3 reserved (0)</span><br /><span class="line"> 2 set if add to destination, clear to replace destination</span><br /><span class="line"> 1-0   type</span><br /><span class="line">   00 internal fixup</span><br /><span class="line">   01 external fixup, imported by ordinal</span><br /><span class="line">   10 external fixup, imported by name</span><br /><span class="line">   11 internal fixup via entry table</span><br /><span class="line"></span><br /><span class="line">Format of linear executable fixup record:</span><br /><span class="line">Offset Size    Description (Table 1304)</span><br /><span class="line"> 00h   BYTE    type</span><br /><span class="line">       bits 7-4: modifier (0001 single, 0011 multiple)</span><br /><span class="line">       bits 3-0: type</span><br /><span class="line">           0000 byte offset</span><br /><span class="line">           0010 word segment</span><br /><span class="line">           0011 16-bit far pointer (DWORD)</span><br /><span class="line">           0101 16-bit offset</span><br /><span class="line">           0110 32-bit far pointer (PWORD)</span><br /><span class="line">           0111 32-bit offset</span><br /><span class="line">           1000 near call or jump, WORD/DWORD based on seg attrib</span><br /><span class="line"> 01h   BYTE    linear executable fixup type (see #1303)</span><br /><span class="line">---if single type---</span><br /><span class="line"> 02h   WORD    offset within page</span><br /><span class="line"> 04h   relocation information</span><br /><span class="line">   ---internal fixup---</span><br /><span class="line">   BYTE    object number</span><br /><span class="line">   ---external,ordinal---</span><br /><span class="line">   BYTE    one-based module number in Import Module table</span><br /><span class="line">   BYTE/WORD ordinal number</span><br /><span class="line">   WORD/DWORD value to add (only present if modifier bit 4 set)</span><br /><span class="line">   ---external,name---</span><br /><span class="line">   BYTE    one-based module number in Import Module table</span><br /><span class="line">   WORD    offset in Import Procedure names</span><br /><span class="line">   WORD/DWORD value to add (only present if modifier bit 4 set)</span><br /><span class="line">---if multiple type---</span><br /><span class="line"> 02h   BYTE    number of items</span><br /><span class="line"> 03h   var relocation info as for &#34;single&#34; type (above)</span><br /><span class="line">      N WORDs  offsets of items to relocate</span><br /><span class="line"></span><br /><span class="line">Format of old Phar Lap .EXP file header:</span><br /><span class="line">Offset Size    Description (Table 1305)</span><br /><span class="line"> 00h  2 BYTEs  &#34;MP&#34; (4Dh 50h) signature</span><br /><span class="line"> 02h   WORD    remainder of image size / page size (page size = 512h)</span><br /><span class="line"> 04h   WORD    size of image in pages</span><br /><span class="line"> 06h   WORD    number of relocation items</span><br /><span class="line"> 08h   WORD    header size in paragraphs</span><br /><span class="line"> 0Ah   WORD    minimum number of extra 4K pages to be allocated at the end</span><br /><span class="line">         of program, when it is loaded</span><br /><span class="line"> 0Ch   WORD    maximum number of extra 4K pages to be allocated at the end</span><br /><span class="line">         of program, when it is loaded</span><br /><span class="line"> 0Eh   DWORD   initial ESP</span><br /><span class="line"> 12h   WORD    word checksum of file</span><br /><span class="line"> 14h   DWORD   initial EIP</span><br /><span class="line"> 18h   WORD    offset of first relocation item</span><br /><span class="line"> 1Ah   WORD    overlay number</span><br /><span class="line"> 1Ch   WORD    ??? (wants to be 1)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1306</span><br /><span class="line"></span><br /><span class="line">Format of new Phar Lap .EXP file header:</span><br /><span class="line">Offset Size    Description (Table 1306)</span><br /><span class="line"> 00h  2 BYTEs  signature (&#34;P2&#34; for 286 .EXP executable, &#34;P3&#34; for 386 .EXP)</span><br /><span class="line"> 02h   WORD    level (01h flat-model file, 02h multisegmented file)</span><br /><span class="line"> 04h   WORD    header size</span><br /><span class="line"> 06h   DWORD   file size in bytes</span><br /><span class="line"> 0Ah   WORD    checksum</span><br /><span class="line"> 0Ch   DWORD   offset of run-time parameters within file (see #1308)</span><br /><span class="line"> 10h   DWORD   size of run-time parameters in bytes</span><br /><span class="line"> 14h   DWORD   offset of relocation table within file</span><br /><span class="line"> 18h   DWORD   size of relocation table in bytes</span><br /><span class="line"> 1Ch   DWORD   offset of segment information table within file (see #1307)</span><br /><span class="line"> 20h   DWORD   size of segment information table in bytes</span><br /><span class="line"> 24h   WORD    size of segment information table entry in bytes</span><br /><span class="line"> 26h   DWORD   offset of load image within file</span><br /><span class="line"> 2Ah   DWORD   size of load image on disk</span><br /><span class="line"> 2Eh   DWORD   offset of symbol table within file or 00000000h</span><br /><span class="line"> 32h   DWORD   size of symbol table in bytes</span><br /><span class="line"> 36h   DWORD   offset of GDT within load image</span><br /><span class="line"> 3Ah   DWORD   size of GDT in bytes</span><br /><span class="line"> 3Eh   DWORD   offset of LDT within load image</span><br /><span class="line"> 42h   DWORD   size of LDT in bytes</span><br /><span class="line"> 46h   DWORD   offset of IDT within load image</span><br /><span class="line"> 4Ah   DWORD   size of IDT in bytes</span><br /><span class="line"> 4Eh   DWORD   offset of TSS within load image</span><br /><span class="line"> 52h   DWORD   size of TSS in bytes</span><br /><span class="line"> 56h   DWORD   minimum number of extra bytes to be allocated at end of program</span><br /><span class="line">       (level 1 executables only)</span><br /><span class="line"> 5Ah   DWORD   maximum number of extra bytes to be allocated at end of program</span><br /><span class="line">       (level 1 executables only)</span><br /><span class="line"> 5Eh   DWORD   base load offset (level 1 executables only)</span><br /><span class="line"> 62h   DWORD   initial ESP</span><br /><span class="line"> 66h   WORD    initial SS</span><br /><span class="line"> 68h   DWORD   initial EIP</span><br /><span class="line"> 6Ch   WORD    initial CS</span><br /><span class="line"> 6Eh   WORD    initial LDT</span><br /><span class="line"> 70h   WORD    initial TSS</span><br /><span class="line"> 72h   WORD    flags</span><br /><span class="line">       bit 0: load image is packed</span><br /><span class="line">       bit 1: 32-bit checksum is present</span><br /><span class="line">       bits 4-2: type of relocation table</span><br /><span class="line"> 74h   DWORD   memory requirements for load image</span><br /><span class="line"> 78h   DWORD   32-bit checksum (optional)</span><br /><span class="line"> 7Ch   DWORD   size of stack segment in bytes</span><br /><span class="line"> 80h 256 BYTEs reserved (0)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1305,#1309</span><br /><span class="line"></span><br /><span class="line">Format of Phar Lap segment information table entry:</span><br /><span class="line">Offset Size    Description (Table 1307)</span><br /><span class="line"> 00h   WORD    selector number</span><br /><span class="line"> 02h   WORD    flags</span><br /><span class="line"> 04h   DWORD   base offset of selector</span><br /><span class="line"> 08h   DWORD   minimum number of extra bytes to be allocated to the segment</span><br /><span class="line"></span><br /><span class="line">Format of 386|DOS-Extender run-time parameters:</span><br /><span class="line">Offset Size    Description (Table 1308)</span><br /><span class="line"> 00h  2 BYTEs  signature &#34;DX&#34; (44h 58h)</span><br /><span class="line"> 02h   WORD    minimum number of real-mode params to leave free at run time</span><br /><span class="line"> 04h   WORD    maximum number of real-mode params to leave free at run time</span><br /><span class="line"> 06h   WORD    minimum interrupt buffer size in KB</span><br /><span class="line"> 08h   WORD    maximum interrupt buffer size in KB</span><br /><span class="line"> 0Ah   WORD    number of interrupt stacks</span><br /><span class="line"> 0Ch   WORD    size in KB of each interrupt stack</span><br /><span class="line"> 0Eh   DWORD   offset of byte past end of real-mode code and data</span><br /><span class="line"> 12h   WORD    size in KB of call buffers</span><br /><span class="line"> 14h   WORD    flags</span><br /><span class="line">       bit 0: file is virtual memory manager</span><br /><span class="line">       bit 1: file is a debugger</span><br /><span class="line"> 16h   WORD    unprivileged flag (if nonzero, executes at ring 1, 2, or 3)</span><br /><span class="line"> 18h 104 BYTEs reserved (0)</span><br /><span class="line"></span><br /><span class="line">Format of Phar Lap repeat block header:</span><br /><span class="line">Offset Size    Description (Table 1309)</span><br /><span class="line"> 00h   WORD    byte count</span><br /><span class="line"> 02h   BYTE    repeat string length</span><br /><span class="line"></span><br /><span class="line">Format of Borland debugging information header (following load image):</span><br /><span class="line">Offset Size    Description (Table 1310)</span><br /><span class="line"> 00h   WORD    signature 52FBh</span><br /><span class="line"> 02h   WORD    version ID</span><br /><span class="line"> 04h   DWORD   size of name pool in bytes</span><br /><span class="line"> 08h   WORD    number of names in name pool</span><br /><span class="line"> 0Ah   WORD    number of type entries</span><br /><span class="line"> 0Ch   WORD    number of structure members</span><br /><span class="line"> 0Eh   WORD    number of symbols</span><br /><span class="line"> 10h   WORD    number of global symbols</span><br /><span class="line"> 12h   WORD    number of modules</span><br /><span class="line"> 14h   WORD    number of locals (optional)</span><br /><span class="line"> 16h   WORD    number of scopes in table</span><br /><span class="line"> 18h   WORD    number of line-number entries</span><br /><span class="line"> 1Ah   WORD    number of include files</span><br /><span class="line"> 1Ch   WORD    number of segment records</span><br /><span class="line"> 1Eh   WORD    number of segment/file correlations</span><br /><span class="line"> 20h   DWORD   size of load image after removing uninitialized data and debug</span><br /><span class="line">         information</span><br /><span class="line"> 24h   DWORD   debugger hook; pointer into debugged program whose meaning</span><br /><span class="line">         depends on program flags</span><br /><span class="line"> 28h   BYTE    program flags</span><br /><span class="line">       bit 0: case-sensitive link</span><br /><span class="line">       bit 1: pascal overlay program</span><br /><span class="line"> 29h   WORD    no longer used</span><br /><span class="line"> 2Bh   WORD    size of data pool in bytes</span><br /><span class="line"> 2Dh   BYTE    padding</span><br /><span class="line"> 2Eh   WORD    size of following header extension (currently 00h, 10h, or 20h)</span><br /><span class="line"> 30h   WORD    number of classes</span><br /><span class="line"> 32h   WORD    number of parents</span><br /><span class="line"> 34h   WORD    number of global classes (currently unused)</span><br /><span class="line"> 36h   WORD    number of overloads (currently unused)</span><br /><span class="line"> 38h   WORD    number of scope classes</span><br /><span class="line"> 3Ah   WORD    number of module classes</span><br /><span class="line"> 3Ch   WORD    number of coverage offsets</span><br /><span class="line"> 3Eh   DWORD   offset relative to symbol base of name pool</span><br /><span class="line"> 42h   WORD    number of browser information records</span><br /><span class="line"> 44h   WORD    number of optimized symbol records</span><br /><span class="line"> 46h   WORD    debugging flags</span><br /><span class="line"> 48h  8 BYTEs  padding</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  additional information on the Borland debugging info may be found in</span><br /><span class="line">     Borland&#39;s Open Architecture Handbook</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1286</span><br /></pre>
  
  
  


      </article>

    </section>

  </body>

</html>

