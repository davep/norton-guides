





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Memory</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-130653.html">
    <link rel="next" href="rbint-137086.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-130653.html">Previous</a></li>


          

<li><a href="rbint-64347.html">Up</a></li>


          

<li><a href="rbint-137086.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>Lists</li>
            <ul>
              <li><a href="index.html">Comments</a></li>
              <li><a href="rbint-7995.html">Interrupts</a></li>
              <li><a href="rbint-15401.html">Glossary</a></li>
              <li><a href="rbint-64347.html">Memory</a></li>
              <li><a href="rbint-180090.html">CMOS</a></li>
              <li><a href="rbint-250757.html">86 Bugs</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Format of S3 Streams Processor memory-mapped registers</span></span><br /><span class="line"></span><br /><span class="line">Offset  Size    Description     (Table M097)</span><br /><span class="line">8180h  DWORD   primary stream control (write-only)</span><br /><span class="line">       bits 30-28: ??? (set to 7 for 32bpp, 5 for 5-6-5, 3 for 5-5-5,</span><br /><span class="line">           0 for 8bpp)</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Note:</span> the primary stream is the output from the display RAM</span><br /><span class="line">8184h  DWORD   chroma key control (write-only)</span><br /><span class="line">       bits 31-29: ???</span><br /><span class="line">       bit 28: =1 strict chroma-key</span><br /><span class="line">           =0 relaxed chroma-key</span><br /><span class="line">       bit 27: ???</span><br /><span class="line">       bits 26-24: ???</span><br /><span class="line">       bits 23-0: chroma-key color value</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Note:</span> Win95 drivers write this register twice</span><br /><span class="line">8188h  DWORD   unused??? (high word seems to echo 8184h, low word 8180h)</span><br /><span class="line">818Ch  DWORD   unused??? (high word seems to echo 8184h, low word 8180h)</span><br /><span class="line">8190h  DWORD   secondary stream control (write-only)</span><br /><span class="line">       bits 11-0: ??? (set to 2*inwidth-outwidth-1)</span><br /><span class="line">       bits 27-12: ???</span><br /><span class="line">       bits 29-28: scaling factor</span><br /><span class="line">           (ratio between inwidth &amp; outwidth:</span><br /><span class="line">             03 = greater than 4</span><br /><span class="line">             02 = 2 .. 4</span><br /><span class="line">             01 = 1 .. 2</span><br /><span class="line">             00 = other )</span><br /><span class="line">       bit 30: ???</span><br /><span class="line">       bit 31: ???</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Note:</span> the secondary stream is typically live video</span><br /><span class="line">8194h  DWORD   chroma key upper bound (write-only)</span><br /><span class="line">       (actually, only bits 28-31 are write-only)</span><br /><span class="line">8198h  DWORD   secondary stream stretch (write-only)</span><br /><span class="line">       (actually, only bits 27-31 are write-only)</span><br /><span class="line">       bits 26-16: input width - output width</span><br /><span class="line">       bit 11: ???</span><br /><span class="line">       bits 10-0: input width - 1</span><br /><span class="line">       (the above two fields together determine the actual stretch/</span><br /><span class="line">         shrink factor)</span><br /><span class="line">819Ch  DWORD   ???</span><br /><span class="line">81A0h  DWORD   blend control (write-only) (see #M104)</span><br /><span class="line">81A4h 3 DWORDs unused??? (reads as FFFFFFFFh)</span><br /><span class="line">81B0h 4 DWORDs ???</span><br /><span class="line">81C0h  DWORD   primary frame buffer address 0</span><br /><span class="line">81C4h  DWORD   primary frame buffer address 1</span><br /><span class="line">81C8h  DWORD   primary stream stride (bits 11-0 only)</span><br /><span class="line">81CCh  DWORD   double buffer control (bit flags)</span><br /><span class="line">       bit 0: ??? (if set, display messed up)</span><br /><span class="line">       bit 1: secondary stream buffer select</span><br /><span class="line">           =0 use frame buffer address 0 (81D0h)</span><br /><span class="line">           =1 use frame buffer address 1 (81D4h)</span><br /><span class="line">       bit 2: primary stream buffer select???</span><br /><span class="line">       bit 3: ???</span><br /><span class="line">       bit 4: ??? (if set, causes direct writes to video memory)</span><br /><span class="line">       bits 6-5: ???</span><br /><span class="line">       bits 31-7: ???</span><br /><span class="line">81D0h  DWORD   secondary frame buffer address 0</span><br /><span class="line">81D4h  DWORD   secondary frame buffer address 1</span><br /><span class="line">81D8h  DWORD   secondary stream stride (bits 11-0 only)</span><br /><span class="line">81DCh  DWORD   opaque overlay control (some bits seem to be read-only)</span><br /><span class="line">       bit 31: ???</span><br /><span class="line">81E0h  DWORD   K1 -- vertical stretch (lines in)</span><br /><span class="line">       (bits 10-0 only)  set to one less than # lines in</span><br /><span class="line">81E4h  DWORD   K2 -- vertical stretch (stretch factor)</span><br /><span class="line">       (bits 10-0 only)  set to (#lines_in - #lines_out)</span><br /><span class="line">81E8h  DWORD   &#34;DDA_vert&#34; (bits 11-0 only) (lines out)</span><br /><span class="line">       set to 1-(#lines_out)</span><br /><span class="line">81ECh  DWORD   streams FIFO</span><br /><span class="line">       bit 2: ???</span><br /><span class="line">       bit 3: ???</span><br /><span class="line">       bit 6: ???</span><br /><span class="line">       bit 7: ???</span><br /><span class="line">       bit 12: ???  (if clear, DOS-box scrolls cause snow)</span><br /><span class="line">       bit 13: ???</span><br /><span class="line">       bit 14: ???</span><br /><span class="line">       bits 18-15: ???</span><br /><span class="line">       bit 19: ??? (set by Win95 driver when using ISA bus)</span><br /><span class="line">       bits 22-20: ???</span><br /><span class="line">       bits 31-23: read-only 0000</span><br /><span class="line">81F0h  DWORD   primary start coordinate</span><br /><span class="line">       bits 26-16: X (column)</span><br /><span class="line">       bits 10-0: Y (row)</span><br /><span class="line">       other bits appear to be read-only</span><br /><span class="line">81F4h  DWORD   primary window size</span><br /><span class="line">       bits 26-16: width</span><br /><span class="line">       bits 10-0: height</span><br /><span class="line">       other bits appear to be read-only</span><br /><span class="line">81F8h  DWORD   secondary start coordinate</span><br /><span class="line">       bits 26-16: X (column)</span><br /><span class="line">       bits 10-0: Y (row)</span><br /><span class="line">       other bits appear to be read-only</span><br /><span class="line">81FCh  DWORD   secondary window size</span><br /><span class="line">       bits 26-16: width</span><br /><span class="line">       bits 10-0: height</span><br /><span class="line">       other bits appear to be read-only</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #M095,#M100,#M101</span><br /><span class="line">Bitfields for S3 Streams Processor blend control:</span><br /><span class="line">Bit(s) Description (Table M104)</span><br /><span class="line"> 31-27 unused???</span><br /><span class="line"> 26-24 blend type</span><br /><span class="line">   000 show secondary stream (video) unconditionally</span><br /><span class="line">   001 disable secondary stream</span><br /><span class="line">   010 blend pri/sec. streams (secondary at full intensity)</span><br /><span class="line">   011 blend pri/sec. streams</span><br /><span class="line">   100 blank display</span><br /><span class="line">   101 show secondary stream only where chroma-key color present</span><br /><span class="line">   110 show secondary stream (video) unconditionally</span><br /><span class="line">   111 blank display</span><br /><span class="line"> 23-13 unused???</span><br /><span class="line"> 12-8  primary stream intensity (04h-1Fh)</span><br /><span class="line">   (values of 00h-03h force secondary stream to black)</span><br /><span class="line"> 4-0   secondary stream intensity (00h-1Fh)</span><br /><span class="line">   (ignored for blend type 010)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #M097</span><br /><span class="line">--------V-MA0008200--------------------------</span><br /><span class="line">MEM A000h:8200h - S3 - MEMORY-MAPPED MEMORY-PORT CONTROL REGISTERS</span><br /><span class="line">Size:  40 BYTEs</span><br /><span class="line">Access:    Write-Only ???</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  the S3 graphics processor registers can be mapped at either</span><br /><span class="line">     linear 000A0000h or at offset 16M from the start of the linear</span><br /><span class="line">     frame buffer</span><br /></pre>
  
  
  


      </article>

    </section>

  </body>

</html>

