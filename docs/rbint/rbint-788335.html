





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Interrupts</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-787136.html">
    <link rel="next" href="rbint-790269.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-787136.html">Previous</a></li>


          

<li><a href="rbint-764933.html">Up</a></li>


          

<li><a href="rbint-790269.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>Lists</li>
            <ul>
              <li><a href="index.html">Comments</a></li>
              <li><a href="rbint-7995.html">Interrupts</a></li>
              <li><a href="rbint-15401.html">Glossary</a></li>
              <li><a href="rbint-64347.html">Memory</a></li>
              <li><a href="rbint-180090.html">CMOS</a></li>
              <li><a href="rbint-250757.html">86 Bugs</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Int 13 Fn 057F  - 2m - Format Track                                      </span>  [<span class="ngb">d</span>]</span><br /><span class="line"></span><br /><span class="line">   AX = 057Fh</span><br /><span class="line">   SI = 324Dh (&#34;2M&#34;)</span><br /><span class="line">   CH = track number</span><br /><span class="line">   DH = head number</span><br /><span class="line">   DL = drive number</span><br /><span class="line">   ES:BX -&gt; boot sector of future 2M diskette</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Return:</span> CF set on error</span><br /><span class="line">   CF clear if successful</span><br /><span class="line">   AH = status (see #0166)</span><br /><span class="line">Program: 2M is a TSR developed by Ciriaco Garcia de Celis to support</span><br /><span class="line">     non standard diskettes with 820-902/1476-1558K (5.25 DD/HD)</span><br /><span class="line">     and 984-1066/1804-1886K/3608-3772K (3.5 DD/HD/ED)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Notes:</span> it is not necessary to call AH=17h or AH=18h first (will be ignored)</span><br /><span class="line">   the diskette format must always begin on cylinder 0 head 0</span><br /><span class="line">   the boot sector can be obtained from an already-formatted 2M diskette</span><br /><span class="line">     (by calling AH=02h with head number 00h in 2M v1.x and with head</span><br /><span class="line">     number 80h for 2M v2+)</span><br /><span class="line">   the installation check for 2M must search for a &#34;CiriSOFT:2M:1.3&#34; or</span><br /><span class="line">     &#34;CiriSOFT:2MX:3.0&#34; or similar (recomended &#34;:2M:&#34;, &#34;:2MX:&#34;, or &#34;:2MB:&#34;</span><br /><span class="line">     substrings) in CiriSOFT TSR interface</span><br /><span class="line">   since 2M v2.0, the BOOT sector is emulated using the first physical</span><br /><span class="line">     sector of FAT2; the second-sixth physical sectors of FAT2 in HD or ED</span><br /><span class="line">     diskettes store the SuperBOOT code. To skip the FAT2 emulation (using</span><br /><span class="line">     FAT1) of 2M, in order to read the SuperBOOT code, head number must be</span><br /><span class="line">     80h-81h instead 0-1 (bit 7 active) in standard read/write functions.</span><br /><span class="line">     This lets diskcopy programs format 2M target diskettes copying</span><br /><span class="line">     SuperBOOT code. If the target diskette is already 2MF formatted</span><br /><span class="line">     (containing boot code) this trick it is not necessary.</span><br /><span class="line">   when using STV technology (offset 65 of boot sector equal to 1) it is</span><br /><span class="line">     necessary to write the full track before formatting (except track 0</span><br /><span class="line">     side 0) to complete the format and skip future CRC errors on read; in</span><br /><span class="line">     track 0 side 1 the head used must be 81h instead 1. Diskcopy programs</span><br /><span class="line">     may do a format-write-verify sequential phases to improve performance</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> AH=05h&#34;FLOPPY&#34;,AH=18h/CX=5055h,INT 2F&#34;CiriSOFT&#34;</span><br /></pre>
  
  
  


      </article>

    </section>

  </body>

</html>

