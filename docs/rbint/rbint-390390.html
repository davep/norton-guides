





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Interrupts</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-389597.html">
    <link rel="next" href="rbint-397250.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-389597.html">Previous</a></li>


          

<li><a href="rbint-372526.html">Up</a></li>


          

<li><a href="rbint-397250.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>Lists</li>
            <ul>
              <li><a href="index.html">Comments</a></li>
              <li><a href="rbint-7995.html">Interrupts</a></li>
              <li><a href="rbint-15401.html">Glossary</a></li>
              <li><a href="rbint-64347.html">Memory</a></li>
              <li><a href="rbint-180090.html">CMOS</a></li>
              <li><a href="rbint-250757.html">86 Bugs</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Int 09  C - Irq1 - Keyboard Data Ready                                   </span>  [<span class="ngb">H</span>]</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Desc:</span>  this interrupt is generated when data is received from the keyboard.</span><br /><span class="line">     This is normally a scan code (from either a keypress *or* a key</span><br /><span class="line">     release), but may also be an ACK or NAK of a command on AT-class</span><br /><span class="line">     keyboards.</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Notes:</span> this IRQ may be masked by setting bit 1 on I/O port 21h</span><br /><span class="line">   if the BIOS supports an enhanced (101/102-key) keyboard, it calls</span><br /><span class="line">     INT 15/AH=4Fh after reading the scan code (see #0005) from the</span><br /><span class="line">     keyboard and before further processing; all further processing uses</span><br /><span class="line">     the scan code returned from INT 15/AH=4Fh</span><br /><span class="line">   the default interrupt handler is at F000h:E987h in 100%-compatible</span><br /><span class="line">     BIOSes</span><br /><span class="line">   the interrupt handler performs the following actions for certain</span><br /><span class="line">     special keystrokes:</span><br /><span class="line">       Ctrl-Break   clear keyboard buffer, place word 0000h in buffer,</span><br /><span class="line">            invoke INT 1B, and set flag at 0040h:0071h</span><br /><span class="line">       SysReq   invoke INT 15/AH=85h (SysReq is often labeled SysRq)</span><br /><span class="line">       Ctrl-Numlock place system in a tight wait loop until next INT 09</span><br /><span class="line">       Ctrl-Alt-Del jump to BIOS startup code (either F000h:FFF0h or the</span><br /><span class="line">              destination of the jump at that address)</span><br /><span class="line">       Shift-PrtSc  invoke INT 05</span><br /><span class="line">       Ctrl-Alt-Plus (HP Vectra) enable keyclick</span><br /><span class="line">       Ctrl-Alt-Plus (many clones) set clock speed to high</span><br /><span class="line">       Ctrl-Alt-Minus (HP Vectra) reduce keyclick volume</span><br /><span class="line">       Ctrl-Alt-Minus (many clones) set clock speed to low</span><br /><span class="line">       Ctrl-Alt-SysReq (HP Vectra) generate hard reset</span><br /><span class="line">       Ctrl-Alt-S  (many clones) run BIOS setup program</span><br /><span class="line">       Ctrl-Alt-Esc (many clones) run BIOS setup program</span><br /><span class="line">       Ctrl-Alt-Ins (many clones) run BIOS setup program</span><br /><span class="line">       Ctrl-Alt-LeftShift-GrayMinus (some clones) turn off system cache</span><br /><span class="line">       Ctrl-Alt-LeftShift-GrayPlus (some clones) turn on system cache</span><br /><span class="line">   DR DOS hooks this interrupt to control the cursor shape (underscore/</span><br /><span class="line">     half block) for overwrite/insert mode</span><br /><span class="line">   DR Multiuser DOS hooks this interrupt for cursor shape control and to</span><br /><span class="line">     control whether Ctrl-Alt-Del reboots the current session or the</span><br /><span class="line">     entire system</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> INT 05&#34;PRINT SCREEN&#34;,INT 0B&#34;HP 95LX&#34;,INT 15/AH=4Fh,INT 15/AH=85h</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> INT 16/AH=00h,INT 16/AH=10h,INT 1B,INT 2F/AX=A901h,INT 4A/AH=00h&#34;TI&#34;</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> INT 51&#34;DESQview&#34;,INT 59&#34;DoubleDOS&#34;,INT 79&#34;GO32&#34;</span><br /><span class="line"></span><br /><span class="line">(Table 0005)</span><br /><span class="line">Values for keyboard make/break (scan) code:</span><br /><span class="line"> 01h   Esc      31h    N</span><br /><span class="line"> 02h   1 !      32h    M</span><br /><span class="line"> 03h   2 @      33h    , &lt;      63h    F16</span><br /><span class="line"> 04h   3 #      34h    . &gt;      64h    F17</span><br /><span class="line"> 05h   4 $      35h    / ?      65h    F18</span><br /><span class="line"> 06h   5 %      36h    Right Shift  66h    F19</span><br /><span class="line"> 07h   6       37h    Grey*        67h    F20</span><br /><span class="line"> 08h   7 &amp;      38h    Alt      68h    F21 (Fn) [*]</span><br /><span class="line"> 09h   8 *      39h    SpaceBar     69h    F22</span><br /><span class="line"> 0Ah   9 (      3Ah    CapsLock     6Ah    F23</span><br /><span class="line"> 0Bh   0 )      3Bh    F1       6Bh    F24</span><br /><span class="line"> 0Ch   - _      3Ch    F2       6Ch    --</span><br /><span class="line"> 0Dh   = +      3Dh    F3       6Dh    EraseEOF</span><br /><span class="line"> 0Eh   Backspace    3Eh    F4</span><br /><span class="line"> 0Fh   Tab      3Fh    F5       6Fh    Copy/Play</span><br /><span class="line"> 10h   Q        40h    F6</span><br /><span class="line"> 11h   W        41h    F7</span><br /><span class="line"> 12h   E        42h    F8       72h    CrSel</span><br /><span class="line"> 13h   R        43h    F9       73h    &lt;delta&gt; [*]</span><br /><span class="line"> 14h   T        44h    F10      74h    ExSel</span><br /><span class="line"> 15h   Y        45h    NumLock      75h    --</span><br /><span class="line"> 16h   U        46h    ScrollLock   76h    Clear</span><br /><span class="line"> 17h   I        47h    Home         77h    [Note2] Joyst But1</span><br /><span class="line"> 18h   O        48h    UpArrow      78h    [Note2] Joyst But2</span><br /><span class="line"> 19h   P        49h    PgUp         79h    [Note2] Joyst Right</span><br /><span class="line"> 1Ah   [ {      4Ah    Grey-        7Ah    [Note2] Joyst Left</span><br /><span class="line"> 1Bh   ] }      4Bh    LeftArrow    7Bh    [Note2] Joyst Up</span><br /><span class="line"> 1Ch   Enter        4Ch    Keypad 5     7Ch    [Note2] Joyst Down</span><br /><span class="line"> 1Dh   Ctrl         4Dh    RightArrow   7Dh    [Note2] right mouse</span><br /><span class="line"> 1Eh   A        4Eh    Grey+        7Eh    [Note2] left mouse</span><br /><span class="line"> 1Fh   S        4Fh    End</span><br /><span class="line"> 20h   D        50h    DownArrow</span><br /><span class="line"> 21h   F        51h    PgDn</span><br /><span class="line"> 22h   G        52h    Ins</span><br /><span class="line"> 23h   H        53h    Del</span><br /><span class="line"> 24h   J        54h    SysReq      ---non-key codes---</span><br /><span class="line"> 25h   K        55h    [Note1] F11  00h    kbd buffer full</span><br /><span class="line"> 26h   L        56h    left \| (102-key)</span><br /><span class="line"> 27h   ; :      57h    F11      AAh    self-test complete</span><br /><span class="line"> 28h   &#39; &#34;      58h    F12      E0h    prefix code</span><br /><span class="line"> 29h   ` ~      59h    [Note1] F15  E1h    prefix code</span><br /><span class="line"> 2Ah   Left Shift   5Ah    PA1      EEh    ECHO</span><br /><span class="line"> 2Bh   \ |      5Bh    F13 (LWin)   F0h    prefix code (key break)</span><br /><span class="line"> 2Ch   Z        5Ch    F14 (RWin)   FAh    ACK</span><br /><span class="line"> 2Dh   X        5Dh    F15 (Menu)   FCh    diag failure (MF-kbd)</span><br /><span class="line"> 2Eh   C                    FDh    diag failure (AT-kbd)</span><br /><span class="line"> 2Fh   V                    FEh    RESEND</span><br /><span class="line"> 30h   B                    FFh    kbd error/buffer full</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Notes:</span> scan codes 56h-E1h are only available on the extended (101/102-key)</span><br /><span class="line">     keyboard and Host Connected (122-key) keyboard; scan codes 5Bh-5Dh</span><br /><span class="line">     are only available on the 122-key keyboard and the Microsoft Natural</span><br /><span class="line">     Keyboard; scan codes 5Eh-76h are only available on the 122-key</span><br /><span class="line">     keyboard</span><br /><span class="line">   in the default configuration, break codes are the make scan codes with</span><br /><span class="line">     the high bit set; make codes 60h,61h,70h, etc. are not available</span><br /><span class="line">     because the corresponding break codes conflict with prefix codes</span><br /><span class="line">     (code 2Ah is available because the self-test result code AAh is only</span><br /><span class="line">     sent on keyboard initialization).  An alternate keyboard</span><br /><span class="line">     configuration can be enabled on AT and later systems with enhanced</span><br /><span class="line">     keyboards, in which break codes are the same as make codes, but</span><br /><span class="line">     prefixed with an F0h scan code</span><br /><span class="line">   prefix code E0h indicates that the following make/break code is for a</span><br /><span class="line">     &#34;gray&#34; duplicate to a key which existed on the original PC keyboard;</span><br /><span class="line">     prefix code E1h indicates that the following make code has no</span><br /><span class="line">     corresponding break code (currently only the Pause key generates no</span><br /><span class="line">     break code)</span><br /><span class="line">   the Microsoft Natural Keyboard sends make codes 5Bh, 5Ch, and 5Dh</span><br /><span class="line">     (all with an E0h prefix) for the Left Windows, Right Windows, and</span><br /><span class="line">     Menu keys on the bottom row</span><br /><span class="line">   the European &#34;Cherry G81-3000 SAx/04&#34; keyboard contains contacts for</span><br /><span class="line">     four additional keys, which can be made available by a user</span><br /><span class="line">     modification; the three new keys located directly below the cursor</span><br /><span class="line">     pad&#39;s Delete, End, and PgDn keys send make codes 66h-68h (F19-F21);</span><br /><span class="line">     the fourth new key, named &lt;delta&gt;, sends make code 73h</span><br /><span class="line">   the SysReq key is often labeled SysRq</span><br /><span class="line">   the &#34;Accord&#34; ergonomic keyboard with optional touchpad (no other</span><br /><span class="line">     identification visible on keyboard or in owner&#39;s booklet) has an</span><br /><span class="line">     additional key above the Grey- key marked with a left-pointing</span><br /><span class="line">     triangle and labeled &#34;Fn&#34; in the owner&#39;s booklet which returns</span><br /><span class="line">     scan codes E0h 68h on make and E0h E8h on break</span><br /><span class="line">   the &#34;Preh Commander AT&#34; keyboard with additional F11-F22 keys treats</span><br /><span class="line">     F11-F20 as Shift-F1..Shift-F10 and F21/F22 as Ctrl-F1/Ctrl-F2; the</span><br /><span class="line">     Eagle PC-2 keyboard with F11-F24 keys treated those additional keys</span><br /><span class="line">     in the same way</span><br /><span class="line">   [Note1] the &#34;Cherry G80-0777&#34; keyboard has additional F11-F15 keys</span><br /><span class="line">     which generate make codes 55h-59h; some other extended keyboards</span><br /><span class="line">     generate codes 55h and 56h for F11 and F12, which cannot be managed</span><br /><span class="line">     by standard DOS keyboard drivers</span><br /><span class="line">   [Note2] the Schneider/Amstrad PC1512 PC keyboards contain extra keys,</span><br /><span class="line">     a mouse, and a digital joystick, which are handled like extra keys.</span><br /><span class="line">     The joystick&#39;s motion scancodes are converted into standard arrow</span><br /><span class="line">     keys by the BIOS, and the joystick and mouse button scan codes are</span><br /><span class="line">     converted to FFFFh codes in the BIOS keyboard buffer</span><br /><span class="line">     (see CMOS 15h&#34;AMSTRAD&#34;).</span><br /><span class="line">     In addition to the keys listed in the table above, there are</span><br /><span class="line">       Del-&gt; (delete forward)  70h</span><br /><span class="line">       Enter           74h</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #0526 at INT 16/AX=6F07h,#2885 at INT 4A/AH=05h</span><br /></pre>
  
  
  


      </article>

    </section>

  </body>

</html>

