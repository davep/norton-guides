





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Interrupts</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-2519395.html">
    <link rel="next" href="rbint-2535469.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="../index.html">Guides</a></li>


          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-2519395.html">Previous</a></li>


          

<li><a href="rbint-2471063.html">Up</a></li>


          

<li><a href="rbint-2535469.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>Lists</li>
            <ul>
              <li><a href="index.html">Comments</a></li>
              <li><a href="rbint-7995.html">Interrupts</a></li>
              <li><a href="rbint-15401.html">Glossary</a></li>
              <li><a href="rbint-64347.html">Memory</a></li>
              <li><a href="rbint-180090.html">CMOS</a></li>
              <li><a href="rbint-250757.html">86 Bugs</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu"> 4fh  word    offset In Current Directory Path Of Backslash Corresponding To</span></span><br /><span class="line"></span><br /><span class="line">         root directory for drive</span><br /><span class="line">       this value specifies how many characters to hide from the</span><br /><span class="line">         &#34;CHDIR&#34; and &#34;GETDIR&#34; calls; normally set to 2 to hide the</span><br /><span class="line">         drive letter and colon, SUBST, JOIN, and networks change it</span><br /><span class="line">         so that only the appropriate portion of the true path is</span><br /><span class="line">         visible to the user</span><br /><span class="line">---DOS 4.0+ ---</span><br /><span class="line"> 51h   BYTE    (DOS 4 only, remote drives) device type</span><br /><span class="line">       04h network drive</span><br /><span class="line"> 52h   DWORD   pointer to IFS driver (DOS 4) or redirector block (DOS 5+) for</span><br /><span class="line">         this drive, 00000000h if native DOS</span><br /><span class="line"> 56h   WORD    available for use by IFS driver</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Notes:</span> the path for invalid drives is normally set to X:\, but may be empty</span><br /><span class="line">     after JOIN x: /D in DR DOS 5.0 or NET USE x: /D in older LAN versions</span><br /><span class="line">   normally, only one of bits 13&amp;12 may be set together with bit 14, but</span><br /><span class="line">     DR DOS 5.0 uses other combinations for bits 15-12: 0111 JOIN,</span><br /><span class="line">     0001 SUBST, 0101 ASSIGN (see #1330)</span><br /><span class="line">   Windows for Workgroups 3.11 network sets the path to the local</span><br /><span class="line">     drive and directory even for network drives; in that case the</span><br /><span class="line">     UNC form \\SERVER\SHARE can be obtained with INT 21/AX=5F02h</span><br /><span class="line">     or INT 21/AX=5F46h. LapLink RemoteAccess does the same even for</span><br /><span class="line">     INT 21/AX=5F02h</span><br /><span class="line">   SoftWindows on the Macintosh PowerPC sets \\E for the host drive</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1330,INT 21/AX=71AAh/BL=00h</span><br /><span class="line"></span><br /><span class="line">Format of DR DOS 5.0-6.0 current directory structure entry (array):</span><br /><span class="line">Offset Size    Description (Table 1330)</span><br /><span class="line"> 00h 67 BYTEs  ASCIZ pathname of actual root directory for this logical drive</span><br /><span class="line"> 43h   WORD    drive attributes</span><br /><span class="line">       1000h SUBSTed drive</span><br /><span class="line">       3000h??? JOINed drive</span><br /><span class="line">       4000h physical drive</span><br /><span class="line">       5000h ASSIGNed drive</span><br /><span class="line">       7000h JOINed drive</span><br /><span class="line">       8000h network drive</span><br /><span class="line"> 45h   BYTE    physical drive number (0=A:) if this logical drive is valid</span><br /><span class="line"> 46h   BYTE    ??? apparently flags for JOIN and ASSIGN</span><br /><span class="line"> 47h   WORD    cluster number of start of parent directory (0000h = root)</span><br /><span class="line"> 49h   WORD    entry number of current directory in parent directory</span><br /><span class="line"> 4Bh   WORD    cluster number of start of current directory</span><br /><span class="line"> 4Dh   WORD    used for media change detection (details not available)</span><br /><span class="line"> 4Fh   WORD    cluster number of SUBST/JOIN &#34;root&#34; directory</span><br /><span class="line">       0000h if physical root directory</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1329</span><br /><span class="line"></span><br /><span class="line">Format of Windows NT Current Directory Structure (CDS) (array):</span><br /><span class="line">Offset Size    Description (Table 1331)</span><br /><span class="line"> 00h 67 BYTEs  ASCIZ path in form X:\ (does not show either current directory</span><br /><span class="line">         or network path)</span><br /><span class="line"> 43h  4 BYTEs  ???</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  the WinNT CDS contains only as many entries as there are local drives,</span><br /><span class="line">     not LASTDRIVE entries.</span><br /><span class="line"></span><br /><span class="line">Format of DOS device driver header:</span><br /><span class="line">Offset Size    Description (Table 1332)</span><br /><span class="line"> 00h   DWORD   pointer to next driver, offset=FFFFh if last driver</span><br /><span class="line"> 04h   WORD    device attributes (see #1333,#1334)</span><br /><span class="line"> 06h   WORD    device strategy entry point</span><br /><span class="line">       call with ES:BX -&gt; request header</span><br /><span class="line">         (see #2284 at INT 2F/AX=0802h)</span><br /><span class="line"> 08h   WORD    device interrupt entry point</span><br /><span class="line">---character device---</span><br /><span class="line"> 0Ah  8 BYTEs  blank-padded character device name</span><br /><span class="line">---block device---</span><br /><span class="line"> 0Ah   BYTE    number of subunits (drives) supported by driver</span><br /><span class="line"> 0Bh  7 BYTEs  normally unused; sometimes contains signature to indicate</span><br /><span class="line">         specific drivers:</span><br /><span class="line">       &#34;$PCMATA&#34;   PCMCIA driver PCMATA.SYS (see AX=440Dh&#34;DOS 3.2+&#34;)</span><br /><span class="line">       &#34;AHADDVR&#34;   Adaptec SCSI disk driver ASPIDISK.SYS</span><br /><span class="line">       &#34;DBLSPAC&#34;   MS DoubleSpace or DriveSpace</span><br /><span class="line">       &#34;DSKREET&#34;   NortonUtils v5+ Diskreet (see INT 2F/AX=FE00h)</span><br /><span class="line">       &#34;GFS    &#34;   LapLink III device driver DD.BIN</span><br /><span class="line">       &#34;SIDExxx&#34;   PCMCIA driver ATADRV.EXE (see AX=440Dh&#34;DOS 3.2+&#34;)</span><br /><span class="line">       &#34;STAC-CD&#34;   Stacker/Stacker Anywhere (see AX=4404h&#34;Stacker&#34;)</span><br /><span class="line">---DoubleSpace/DriveSpace---</span><br /><span class="line"> 12h  2 BYTEs  signature &#34;,.&#34; (2Ch 2Eh)</span><br /><span class="line"> 14h   var preloading API entry point</span><br /><span class="line">---CD-ROM---</span><br /><span class="line"> 12h   WORD    reserved, must be 0000h</span><br /><span class="line">       appears to be another device chain</span><br /><span class="line"> 14h   BYTE    drive letter, 01h=A:, etc. (must initially be 00h; this byte</span><br /><span class="line">         is set by MSCDEX when it loads)</span><br /><span class="line"> 15h   BYTE    number of units</span><br /><span class="line"> 16h  6 BYTEs  signature &#39;MSCDnn&#39; where &#39;nn&#39; is version (currently &#39;00&#39;)</span><br /><span class="line">       (this field does not exist in most drivers)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #2238 at INT 25/AX=CDCDh,#2531 at INT 2F/AX=5600h</span><br /><span class="line"></span><br /><span class="line">Bitfields for device attributes (character device):</span><br /><span class="line">Bit(s) Description (Table 1333)</span><br /><span class="line"> 15    set (indicates character device)</span><br /><span class="line"> 14    IOCTL supported (see AH=44h)</span><br /><span class="line"> 13    (DOS 3.0+) output until busy supported</span><br /><span class="line"> 12    reserved</span><br /><span class="line"> 11    (DOS 3.0+) OPEN/CLOSE/RemMedia calls supported</span><br /><span class="line"> 10-8  reserved</span><br /><span class="line"> 7 (DOS 5.0+) Generic IOCTL check call supported (driver command 19h)</span><br /><span class="line">   (see AX=4410h,AX=4411h)</span><br /><span class="line"> 6 (DOS 3.2+) Generic IOCTL call supported (driver command 13h)</span><br /><span class="line">   (see AX=440Ch,AX=440Dh&#34;DOS 3.2+&#34;)</span><br /><span class="line"> 5 reserved</span><br /><span class="line"> 4 device is special (use INT 29 &#34;fast console output&#34;)</span><br /><span class="line"> 3 device is CLOCK$ (all reads/writes use transfer record described</span><br /><span class="line">     below)</span><br /><span class="line"> 2 device is NUL</span><br /><span class="line"> 1 device is standard output</span><br /><span class="line"> 0 device is standard input</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  for European MS-DOS 4.0, bit 11 also indicates that bits 8-6 contain a</span><br /><span class="line">     version code (000 = DOS 3.0,3.1; 001 = DOS 3.2;</span><br /><span class="line">     010 = European DOS 4.0)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1334,#1332</span><br /><span class="line"></span><br /><span class="line">Bitfields for device attributes (block device):</span><br /><span class="line">Bit(s) Description (Table 1334)</span><br /><span class="line"> 15    clear (indicates block device)</span><br /><span class="line"> 14    IOCTL supported</span><br /><span class="line"> 13    non-IBM format</span><br /><span class="line"> 12    network device (device is remote)</span><br /><span class="line"> 11    (DOS 3.0+) OPEN/CLOSE/RemMedia calls supported</span><br /><span class="line"> 10    reserved</span><br /><span class="line"> 9 direct I/O not allowed??? (set by DOS 3.3 DRIVER.SYS for &#34;new&#34; drives)</span><br /><span class="line"> 8 ??? set by DOS 3.3 DRIVER.SYS for &#34;new&#34; drives</span><br /><span class="line"> 7 (DOS 5.0+) Generic IOCTL check call supported (driver command 19h)</span><br /><span class="line">   (see AX=4410h,AX=4411h)</span><br /><span class="line"> 6 (DOS 3.2+) Generic IOCTL call supported (driver command 13h)</span><br /><span class="line">   implies support for commands 17h and 18h</span><br /><span class="line">     (see AX=440Ch,AX=440Dh&#34;DOS 3.2+&#34;,AX=440Eh,AX=440Fh)</span><br /><span class="line"> 5-2   reserved</span><br /><span class="line"> 1 driver supports 32-bit sector addressing (DOS 3.31+)</span><br /><span class="line"> 0  reserved</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  for European MS-DOS 4.0, bit 11 also indicates that bits 8-6 contain a</span><br /><span class="line">     version code (000 = DOS 3.0,3.1; 001 = DOS 3.2;</span><br /><span class="line">     010 = European DOS 4.0)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1333,#1332</span><br /><span class="line"></span><br /><span class="line">Format of DOS 2.x disk buffer:</span><br /><span class="line">Offset Size    Description (Table 1335)</span><br /><span class="line"> 00h   DWORD   pointer to next disk buffer, offset = FFFFh if last</span><br /><span class="line">       least-recently used buffer is first in chain</span><br /><span class="line"> 04h   BYTE    drive (0=A, 1=B, etc), FFh if not in use</span><br /><span class="line"> 05h  3 BYTEs  unused??? (seems always to be 00h 00h 01h)</span><br /><span class="line"> 08h   WORD    logical sector number</span><br /><span class="line"> 0Ah   BYTE    number of copies to write (1 for non-FAT sectors)</span><br /><span class="line"> 0Bh   BYTE    sector offset between copies if multiple copies to be written</span><br /><span class="line"> 0Ch   DWORD   pointer to DOS Drive Parameter Block (see #1083 at AH=32h)</span><br /><span class="line"> 10h       buffered data</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1336,#1338,#1339,#1341</span><br /><span class="line"></span><br /><span class="line">Format of DOS 3.x disk buffer:</span><br /><span class="line">Offset Size    Description (Table 1336)</span><br /><span class="line"> 00h   DWORD   pointer to next disk buffer, offset = FFFFh if last</span><br /><span class="line">       least-recently used buffer is first in chain</span><br /><span class="line"> 04h   BYTE    drive (0=A,1=B, etc), FFh if not in use</span><br /><span class="line"> 05h   BYTE    buffer flags (see #1337)</span><br /><span class="line"> 06h   WORD    logical sector number</span><br /><span class="line"> 08h   BYTE    number of copies to write (1 for non-FAT sectors)</span><br /><span class="line"> 09h   BYTE    sector offset between copies if multiple copies to be written</span><br /><span class="line"> 0Ah   DWORD   pointer to DOS Drive Parameter Block (see #1083 at AH=32h)</span><br /><span class="line"> 0Eh   WORD    unused??? (almost always 0)</span><br /><span class="line"> 10h       buffered data</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1335,#1338,#1339,#1341</span><br /><span class="line"></span><br /><span class="line">Bitfields for DOS 3.x disk buffer flags:</span><br /><span class="line">Bit(s) Description (Table 1337)</span><br /><span class="line"> 7 ???</span><br /><span class="line"> 6 buffer dirty</span><br /><span class="line"> 5 buffer has been referenced</span><br /><span class="line"> 4 ???</span><br /><span class="line"> 3 sector in data area</span><br /><span class="line"> 2 sector in a directory, either root or subdirectory</span><br /><span class="line"> 1 sector in FAT</span><br /><span class="line"> 0 boot sector??? (guess)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1342</span><br /><span class="line"></span><br /><span class="line">Format of DOS 4.00 (pre UR 25066) disk buffer info:</span><br /><span class="line">Offset Size    Description (Table 1338)</span><br /><span class="line"> 00h   DWORD   pointer to array of disk buffer hash chain heads (see #1340)</span><br /><span class="line"> 04h   WORD    number of disk buffer hash chains (referred to as NDBCH below)</span><br /><span class="line"> 06h   DWORD   pointer to lookahead buffer, zero if not present</span><br /><span class="line"> 0Ah   WORD    number of lookahead sectors, else zero (the y in BUFFERS=x,y)</span><br /><span class="line"> 0Ch   BYTE    00h if buffers in EMS (/X), FFh if not</span><br /><span class="line"> 0Dh   WORD    EMS handle for buffers, zero if not in EMS</span><br /><span class="line"> 0Fh   WORD    EMS physical page number used for buffers (usually 255)</span><br /><span class="line"> 11h   WORD    ??? seems always to be 0001h</span><br /><span class="line"> 13h   WORD    segment of EMS physical page frame</span><br /><span class="line"> 15h   WORD    ??? seems always to be zero</span><br /><span class="line"> 17h  4 WORDs  EMS partial page mapping information???</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1335,#1336,#1339,#1343</span><br /><span class="line"></span><br /><span class="line">Format of DOS 4.01 (from UR 25066 Corrctive Services Disk on) disk buffer info:</span><br /><span class="line">Offset Size    Description (Table 1339)</span><br /><span class="line"> 00h   DWORD   pointer to array of disk buffer hash chain heads (see #1340)</span><br /><span class="line"> 04h   WORD    number of disk buffer hash chains (referred to as NDBCH below)</span><br /><span class="line"> 06h   DWORD   pointer to lookahead buffer, zero if not present</span><br /><span class="line"> 0Ah   WORD    number of lookahead sectors, else zero (the y in BUFFERS=x,y)</span><br /><span class="line"> 0Ch   BYTE    01h, possibly to distinguish from pre-UR 25066 format</span><br /><span class="line"> 0Dh   WORD    ??? EMS segment for BUFFERS (only with /XD)</span><br /><span class="line"> 0Fh   WORD    ??? EMS physical page number of EMS seg above (only with /XD)</span><br /><span class="line"> 11h   WORD    ??? EMS segment for ??? (only with /XD)</span><br /><span class="line"> 13h   WORD    ??? EMS physical page number of above (only with /XD)</span><br /><span class="line"> 15h   BYTE    ??? number of EMS page frames present (only with /XD)</span><br /><span class="line"> 16h   WORD    segment of one-sector workspace buffer allocated in main memory</span><br /><span class="line">         if BUFFERS/XS or /XD options in effect, possibly to avoid DMA</span><br /><span class="line">         into EMS</span><br /><span class="line"> 18h   WORD    EMS handle for buffers, zero if not in EMS</span><br /><span class="line"> 1Ah   WORD    EMS physical page number used for buffers (usually 255)</span><br /><span class="line"> 1Ch   WORD    ??? appears always to be 0001h</span><br /><span class="line"> 1Eh   WORD    segment of EMS physical page frame</span><br /><span class="line"> 20h   WORD    ??? appears always to be zero</span><br /><span class="line"> 22h   BYTE    00h if /XS, 01h if /XD, FFh if BUFFERS not in EMS</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1335,#1336,#1338,#1343</span><br /><span class="line"></span><br /><span class="line">Format of DOS 4.x disk buffer hash chain head (array, one entry per chain):</span><br /><span class="line">Offset Size    Description (Table 1340)</span><br /><span class="line"> 00h   WORD    EMS logical page number in which chain is resident, -1 if not</span><br /><span class="line">         in EMS</span><br /><span class="line"> 02h   DWORD   pointer to least recently used buffer header.  All buffers on</span><br /><span class="line">         this chain are in the same segment.</span><br /><span class="line"> 06h   BYTE    number of dirty buffers on this chain</span><br /><span class="line"> 07h   BYTE    reserved (00h)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Notes:</span> buffered disk sectors are assigned to chain N where N is the sector&#39;s</span><br /><span class="line">     address modulo NDBCH,  0 &lt;= N &lt;= NDBCH-1</span><br /><span class="line">   each chain resides completely within one EMS page</span><br /><span class="line">   this structure is in main memory even if buffers are in EMS</span><br /><span class="line"></span><br /><span class="line">Format of DOS 4.0-6.0 disk buffer:</span><br /><span class="line">Offset Size    Description (Table 1341)</span><br /><span class="line"> 00h   WORD    forward ptr, offset only, to next least recently used buffer</span><br /><span class="line"> 02h   WORD    backward pointer, offset only</span><br /><span class="line"> 04h   BYTE    drive (0=A,1=B, etc) if bit 7 clear</span><br /><span class="line">       SFT index if bit 7 set</span><br /><span class="line">       FFh if not in use</span><br /><span class="line"> 05h   BYTE    buffer flags (see #1342)</span><br /><span class="line"> 06h   DWORD   logical sector number (local buffers only)</span><br /><span class="line"> 0Ah   BYTE    number of copies to write</span><br /><span class="line">       for FAT sectors, same as number of FATs</span><br /><span class="line">       for data and directory sectors, usually 1</span><br /><span class="line"> 0Bh   WORD    offset in sectors between copies to write for FAT sectors</span><br /><span class="line"> 0Dh   DWORD   pointer to DOS Drive Parameter Block (see #1083 at AH=32h)</span><br /><span class="line"> 11h   WORD    size of data in buffer if remote buffer (see also #1342)</span><br /><span class="line"> 13h   BYTE    reserved (padding)</span><br /><span class="line"> 14h       buffered data</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  for DOS 4.x, all buffered sectors which have the same hash value</span><br /><span class="line">     (computed as the sum of high and low words of the logical sector</span><br /><span class="line">     number divided by the number of disk buffer chains) are on the same</span><br /><span class="line">     doubly-linked circular chain; for DOS 5+, only a single circular</span><br /><span class="line">     chain exists.</span><br /><span class="line">   the links consist of offset addresses only, the segment being the same</span><br /><span class="line">     for all buffers in the chain.</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1335,#1336,#1338</span><br /><span class="line"></span><br /><span class="line">Bitfields for DOS 4.0-6.0 disk buffer flags:</span><br /><span class="line">Bit(s) Description (Table 1342)</span><br /><span class="line"> 7 remote buffer</span><br /><span class="line"> 6 buffer dirty</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">.NG limit reached, continued in next section...</span></span><br /></pre>
  
  
  


      </article>

    </section>

  </body>

</html>

