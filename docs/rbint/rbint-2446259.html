





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.2.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Interrupts</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-2434912.html">
    <link rel="next" href="rbint-2457470.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="../index.html">Guides</a></li>


          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-2434912.html">Previous</a></li>


          

<li><a href="rbint-2204700.html">Up</a></li>


          

<li><a href="rbint-2457470.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      
        <nav class="menu box">
          <ul>
              <li>Lists</li>
              <ul>
                <li><a href="index.html">Comments</a></li>
                <li><a href="rbint-7995.html">Interrupts</a></li>
                <li><a href="rbint-15401.html">Glossary</a></li>
                <li><a href="rbint-64347.html">Memory</a></li>
                <li><a href="rbint-180090.html">CMOS</a></li>
                <li><a href="rbint-250757.html">86 Bugs</a></li>
                
              </ul>
          </ul>
        </nav>
      

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Int 21 Fn 4B  - Dos 2+ - &#34;exec&#34; - Load And/or Execute Program  <span class="ngb">(Cont.)</span></span></span><br /><span class="line"></span><br /><span class="line"> 32h   WORD    file alignment size shift count</span><br /><span class="line">       0 is equivalent to 9 (default 512-byte pages)</span><br /><span class="line"> 34h   WORD    number of resource table entries</span><br /><span class="line"> 36h   BYTE    target operating system</span><br /><span class="line">       00h unknown</span><br /><span class="line">       01h OS/2</span><br /><span class="line">       02h Windows</span><br /><span class="line">       03h European MS-DOS 4.x</span><br /><span class="line">       04h Windows 386</span><br /><span class="line">       05h BOSS (Borland Operating System Services)</span><br /><span class="line">       81h PharLap 286|DOS-Extender, OS/2</span><br /><span class="line">       82h PharLap 286|DOS-Extender, Windows</span><br /><span class="line"> 37h   BYTE    other EXE flags (see #1285)</span><br /><span class="line"> 38h   WORD    offset to return thunks or start of gangload area</span><br /><span class="line"> 3Ah   WORD    offset to segment reference thunks or length of gangload area</span><br /><span class="line"> 3Ch   WORD    minimum code swap area size</span><br /><span class="line"> 3Eh  2 BYTEs  expected Windows version (minor version first)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  this header is documented in detail in the Windows 3.1 SDK Programmer&#39;s</span><br /><span class="line">     Reference, Vol 4.</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1280</span><br /><span class="line"></span><br /><span class="line">Bitfields for new executable program flags:</span><br /><span class="line">Bit(s) Description (Table 1283)</span><br /><span class="line"> 0-1   DGROUP type</span><br /><span class="line">     0 = none</span><br /><span class="line">     1 = single shared</span><br /><span class="line">     2 = multiple (unshared)</span><br /><span class="line">     3 = (null)</span><br /><span class="line"> 2 global initialization</span><br /><span class="line"> 3 protected mode only</span><br /><span class="line"> 4 8086 instructions</span><br /><span class="line"> 5 80286 instructions</span><br /><span class="line"> 6 80386 instructions</span><br /><span class="line"> 7 80x87 instructions</span><br /><span class="line"></span><br /><span class="line">Bitfields for new executable application flags:</span><br /><span class="line">Bit(s) Description (Table 1284)</span><br /><span class="line"> 0-2   application type</span><br /><span class="line">   001 full screen (not aware of Windows/P.M. API)</span><br /><span class="line">   010 compatible with Windows/P.M. API</span><br /><span class="line">   011 uses Windows/P.M. API</span><br /><span class="line"> 3 is a Family Application (OS/2)</span><br /><span class="line"> 5 0=executable, 1=errors in image</span><br /><span class="line"> 6 non-conforming program (valid stack is not maintained)</span><br /><span class="line"> 7 DLL or driver rather than application</span><br /><span class="line">   (SS:SP info invalid, CS:IP points at FAR init routine called with</span><br /><span class="line">     AX=module handle which returns AX=0000h on failure, AX nonzero on</span><br /><span class="line">     successful initialization)</span><br /><span class="line"></span><br /><span class="line">Bitfields for other new .EXE flags:</span><br /><span class="line">Bit(s) Description (Table 1285)</span><br /><span class="line"> 0 supports long filenames</span><br /><span class="line"> 1 2.X protected mode</span><br /><span class="line"> 2 2.X proportional font</span><br /><span class="line"> 3 gangload area</span><br /><span class="line"></span><br /><span class="line">Format of Codeview trailer (at end of executable):</span><br /><span class="line">Offset Size    Description (Table 1286)</span><br /><span class="line"> 00h   WORD    signature 4E42h (&#39;NB&#39;)</span><br /><span class="line"> 02h   WORD    Microsoft debug info version number</span><br /><span class="line"> 04h   DWORD   Codeview header offset</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1310</span><br /><span class="line"></span><br /><span class="line">Format of new executable segment table record:</span><br /><span class="line">Offset Size    Description (Table 1287)</span><br /><span class="line"> 00h   WORD    offset in file (shift left by alignment shift to get byte offs)</span><br /><span class="line"> 02h   WORD    length of image in file (0000h = 64K)</span><br /><span class="line"> 04h   WORD    segment attributes (see #1288)</span><br /><span class="line"> 06h   WORD    number of bytes to allocate for segment (0000h = 64K)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  the first segment table entry is entry number 1</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1290</span><br /><span class="line"></span><br /><span class="line">Bitfields for segment attributes:</span><br /><span class="line">Bit(s) Description (Table 1288)</span><br /><span class="line"> 0 data segment rather than code segment</span><br /><span class="line"> 1 unused???</span><br /><span class="line"> 2 real mode</span><br /><span class="line"> 3 iterated</span><br /><span class="line"> 4 movable</span><br /><span class="line"> 5 sharable</span><br /><span class="line"> 6 preloaded rather than demand-loaded</span><br /><span class="line"> 7 execute-only (code) or read-only (data)</span><br /><span class="line"> 8 relocations (directly following code for this segment)</span><br /><span class="line"> 9 debug info present</span><br /><span class="line"> 10,11 80286 DPL bits</span><br /><span class="line"> 12    discardable</span><br /><span class="line"> 13-15 discard priority</span><br /><span class="line"></span><br /><span class="line">Format of new executable entry table item (list):</span><br /><span class="line">Offset Size    Description (Table 1289)</span><br /><span class="line"> 00h   BYTE    number of entry points (00h if end of entry table list)</span><br /><span class="line"> 01h   BYTE    segment number (00h if end of entry table list)</span><br /><span class="line"> 02h 3N BYTEs  entry records</span><br /><span class="line">       Offset  Size    Description</span><br /><span class="line">        00h    BYTE    flags</span><br /><span class="line">               bit 0: exported</span><br /><span class="line">               bit 1: single data</span><br /><span class="line">               bits 2-7: unused???</span><br /><span class="line">        01h    WORD    offset within segment</span><br /><span class="line"></span><br /><span class="line">Format of new executable relocation data (immediately follows segment image):</span><br /><span class="line">Offset Size    Description (Table 1290)</span><br /><span class="line"> 00h   WORD    number of relocation items</span><br /><span class="line"> 02h 8N BYTEs  relocation items</span><br /><span class="line">       Offset  Size    Description</span><br /><span class="line">        00h    BYTE    relocation type</span><br /><span class="line">               00h LOBYTE</span><br /><span class="line">               02h BASE</span><br /><span class="line">               03h PTR</span><br /><span class="line">               05h OFFS</span><br /><span class="line">               0Bh PTR48</span><br /><span class="line">               0Dh OFFS32</span><br /><span class="line">        01h    BYTE    flags</span><br /><span class="line">               bit 2: additive</span><br /><span class="line">        02h    WORD    offset within segment</span><br /><span class="line">        04h    WORD    target address segment</span><br /><span class="line">        06h    WORD    target address offset</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1287,#1291</span><br /><span class="line"></span><br /><span class="line">Format of new executable resource data:</span><br /><span class="line">Offset Size    Description (Table 1291)</span><br /><span class="line"> 00h   WORD    alignment shift count for resource data</span><br /><span class="line"> 02h  N RECORDs resources</span><br /><span class="line">   Format of resource record:</span><br /><span class="line">   Offset  Size    Description</span><br /><span class="line">    00h    WORD    type ID</span><br /><span class="line">           0000h if end of resource records</span><br /><span class="line">           &gt;= 8000h if integer type</span><br /><span class="line">           else offset from start of resource table to type string</span><br /><span class="line">    02h    WORD    number of resources of this type</span><br /><span class="line">    04h    DWORD   reserved for runtime use</span><br /><span class="line">    08h  N Resources (see #1292)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  resource type and name strings are stored immediately following the</span><br /><span class="line">     resource table, and are not null-terminated</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1292</span><br /><span class="line"></span><br /><span class="line">Format of new executable resource entry:</span><br /><span class="line">Offset Size    Description (Table 1292)</span><br /><span class="line"> 00h   WORD    offset in alignment units from start of file to contents of</span><br /><span class="line">       the resource data</span><br /><span class="line"> 02h   WORD    length of resource image in bytes</span><br /><span class="line"> 04h   WORD    flags</span><br /><span class="line">       bit 4: moveable</span><br /><span class="line">       bit 5: shareable</span><br /><span class="line">       bit 6: preloaded</span><br /><span class="line"> 06h   WORD    resource ID</span><br /><span class="line">       &gt;= 8000h if integer resource</span><br /><span class="line">       else offset from start of resource table to resource string</span><br /><span class="line"> 08h   DWORD   reserved for runtime use</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Notes:</span> resource type and name strings are stored immediately following the</span><br /><span class="line">     resource table, and are not null-terminated</span><br /><span class="line">   strings are counted strings, with a string of length 0 indicating the</span><br /><span class="line">     end of the resource table</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1291,#1293</span><br /><span class="line"></span><br /><span class="line">Format of new executable module reference table [one bundle of entries]:</span><br /><span class="line">Offset Size    Description (Table 1293)</span><br /><span class="line"> 00h   BYTE    number of records in this bundle (00h if end of table)</span><br /><span class="line"> 01h   BYTE    segment indicator</span><br /><span class="line">       00h unused</span><br /><span class="line">       FFh movable segment, segment number is in entry</span><br /><span class="line">       else segment number of fixed segment</span><br /><span class="line"> 02h  N RECORDs</span><br /><span class="line">   Format of segment record</span><br /><span class="line">   Offset  Size    Description</span><br /><span class="line">    00h    BYTE    flags</span><br /><span class="line">           bit 0: entry is exported</span><br /><span class="line">           bit 1: entry uses global (shared) data</span><br /><span class="line">           bits 7-3: number of parameter words</span><br /><span class="line">   ---fixed segment---</span><br /><span class="line">    01h    WORD    offset</span><br /><span class="line">   ---moveable segment---</span><br /><span class="line">    01h  2 BYTEs   INT 3F instruction (CDh 3Fh)</span><br /><span class="line">    03h    BYTE    segment number</span><br /><span class="line">    05h    WORD    offset</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  table entries are numbered starting from 1</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1294</span><br /><span class="line"></span><br /><span class="line">Format of new executable resident/nonresident name table entry:</span><br /><span class="line">Offset Size    Description (Table 1294)</span><br /><span class="line"> 00h   BYTE    length of string (00h if end of table)</span><br /><span class="line"> 01h  N BYTEs  ASCII text of string</span><br /><span class="line"> N+1   WORD    ordinal number (index into entry table)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Notes:</span> the first string in the resident name table is the module name; the</span><br /><span class="line">     first entry in the nonresident name table is the module description</span><br /><span class="line">   the strings are case-sensitive; if the executable was linked with</span><br /><span class="line">     /IGNORECASE, all strings are in uppercase</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1293</span><br /><span class="line"></span><br /><span class="line">Format of Linear Executable (enhanced mode executable) header:</span><br /><span class="line">Offset Size    Description (Table 1295)</span><br /><span class="line"> 00h  2 BYTEs  &#34;LE&#34; (4Ch 45h) signature (Windows)</span><br /><span class="line">       &#34;LX&#34; (4Ch 58h) signature (OS/2)</span><br /><span class="line"> 02h   BYTE    byte order (00h = little-endian, nonzero = big-endian)</span><br /><span class="line"> 03h   BYTE    word order (00h = little-endian, nonzero = big-endian)</span><br /><span class="line"> 04h   DWORD   executable format level</span><br /><span class="line"> 08h   WORD    CPU type (see also INT 15/AH=C9h)</span><br /><span class="line">       01h Intel 80286 or upwardly compatible</span><br /><span class="line">       02h Intel 80386 or upwardly compatible</span><br /><span class="line">       03h Intel 80486 or upwardly compatible</span><br /><span class="line">       04h Intel Pentium (80586) or upwardly compatible</span><br /><span class="line">       20h Intel i860 (N10) or compatible</span><br /><span class="line">       21h Intel &#34;N11&#34; or compatible</span><br /><span class="line">       40h MIPS Mark I (R2000, R3000) or compatible</span><br /><span class="line">       41h MIPS Mark II (R6000) or compatible</span><br /><span class="line">       42h MIPS Mark III (R4000) or compatible</span><br /><span class="line"> 0Ah   WORD    target operating system</span><br /><span class="line">       01h OS/2</span><br /><span class="line">       02h Windows</span><br /><span class="line">       03h European DOS 4.0</span><br /><span class="line">       04h Windows 386</span><br /><span class="line"> 0Ch   DWORD   module version</span><br /><span class="line"> 10h   DWORD   module type (see #1296)</span><br /><span class="line"> 14h   DWORD   number of memory pages</span><br /><span class="line"> 18h   Initial CS:EIP</span><br /><span class="line">   DWORD   object number</span><br /><span class="line">   DWORD   offset</span><br /><span class="line"> 20h   Initial SS:ESP</span><br /><span class="line">   DWORD   object number</span><br /><span class="line">   DWORD   offset</span><br /><span class="line"> 28h   DWORD   memory page size</span><br /><span class="line"> 2Ch   DWORD   (Windows LE) bytes on last page</span><br /><span class="line">       (OS/2 LX) page offset shift count</span><br /><span class="line"> 30h   DWORD   fixup section size</span><br /><span class="line"> 34h   DWORD   fixup section checksum</span><br /><span class="line"> 38h   DWORD   loader section size</span><br /><span class="line"> 3Ch   DWORD   loader section checksum</span><br /><span class="line"> 40h   DWORD   offset of object table (see #1297)</span><br /><span class="line"> 44h   DWORD   object table entries</span><br /><span class="line"> 48h   DWORD   object page map table offset (see #1299)</span><br /><span class="line"> 4Ch   DWORD   object iterate data map offset</span><br /><span class="line"> 50h   DWORD   resource table offset</span><br /><span class="line"> 54h   DWORD   resource table entries</span><br /><span class="line"> 58h   DWORD   resident names table offset (see #1300)</span><br /><span class="line"> 5Ch   DWORD   entry table offset (see #1301,#1302)</span><br /><span class="line"> 60h   DWORD   module directives table offset</span><br /><span class="line"> 64h   DWORD   Module Directives entries</span><br /><span class="line"> 68h   DWORD   Fixup page table offset</span><br /><span class="line"> 6Ch   DWORD   Fixup record table offset (see #1304)</span><br /><span class="line"> 70h   DWORD   imported modules name table offset</span><br /><span class="line"> 74h   DWORD   imported modules count</span><br /><span class="line"> 78h   DWORD   imported procedures name table offset</span><br /><span class="line"> 7Ch   DWORD   per-page checksum table offset</span><br /><span class="line"> 80h   DWORD   data pages offset</span><br /><span class="line"> 84h   DWORD   preload page count</span><br /><span class="line"> 88h   DWORD   non-resident names table offset</span><br /><span class="line"> 8Ch   DWORD   non-resident names table length</span><br /><span class="line"> 90h   DWORD   non-resident names checksum</span><br /><span class="line"> 94h   DWORD   automatic data object</span><br /><span class="line"> 98h   DWORD   debug information offset</span><br /><span class="line"> 9Ch   DWORD   debug information length</span><br /><span class="line"> A0h   DWORD   preload instance pages number</span><br /><span class="line"> A4h   DWORD   demand instance pages number</span><br /><span class="line"> A8h   DWORD   extra heap allocation</span><br /><span class="line"> ACh 12 BYTEs  reserved</span><br /><span class="line"> B8h   DWORD   offset of VERSIONINFO resource (MS-Windows VxD only)</span><br /><span class="line"> BCh   DWORD   pointer to ??? (dynamically-loadable VxDs only???)</span><br /><span class="line"> C0h   WORD    device ID (MS-Windows VxD only)</span><br /><span class="line"> C2h   WORD    DDK version (MS-Windows VxD only)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  used by EMM386.EXE, QEMM, and Windows 3.0 Enhanced Mode drivers</span><br /><span class="line"></span><br /><span class="line">Bitfields for Linear Executable module type:</span><br /><span class="line">Bit(s) Description (Table 1296)</span><br /><span class="line"> 2 initialization (only for DLLs) 0 = global, 1 = per-process</span><br /><span class="line"> 4 no internal fixups in executable image</span><br /><span class="line"> 5 no external fixups in executable image</span><br /><span class="line"> 8-10  API compatibility</span><br /><span class="line">   0 = unknown</span><br /><span class="line">   1 = incompatible with PM windowing \</span><br /><span class="line">   2 = compatible with PM windowing    &gt; (only for</span><br /><span class="line">   3 = uses PM windowing API      /    programs)</span><br /><span class="line"> 13    module not loadable (only for programs)</span><br /><span class="line"> 15-17 module type</span><br /><span class="line">   000 program</span><br /><span class="line">   001 library (DLL)</span><br /><span class="line">   011 protected memory library module</span><br /><span class="line">   100 physical device driver</span><br /><span class="line">   110 virtual device driver</span><br /><span class="line"> 30    per-process library termination</span><br /><span class="line">   (requires valid CS:EIP, can&#39;t be set for .EXE)</span><br /><span class="line"></span><br /><span class="line">Format of object table entry:</span><br /><span class="line">Offset Size    Description (Table 1297)</span><br /><span class="line"> 00h   DWORD   virtual size in bytes</span><br /><span class="line"> 04h   DWORD   relocation base address</span><br /><span class="line"> 08h   DWORD   object flags (see #1298)</span><br /><span class="line"> 0Ch   DWORD   page map index</span><br /><span class="line"> 10h   DWORD   page map entries (see #1299)</span><br /><span class="line"> 14h  4 BYTEs  reserved??? (apparently always zeros)</span><br /><span class="line"></span><br /><span class="line">Bitfields for object flags:</span><br /><span class="line">Bit(s) Description (Table 1298)</span><br /><span class="line"> 0 readable</span><br /><span class="line"> 1 writable</span><br /><span class="line"> 2 executable</span><br /><span class="line"> 3 resource</span><br /><span class="line"> 4 discardable</span><br /><span class="line"> 5 shared</span><br /><span class="line"> 6 preloaded</span><br /><span class="line"> 7 invalid</span><br /><span class="line"> 8-9   type</span><br /><span class="line">   00 normal</span><br /><span class="line">   01 zero-filled</span><br /><span class="line">   10 resident</span><br /><span class="line">   11 resident and contiguous</span><br /><span class="line"> 10    resident and long-lockable</span><br /><span class="line"> 11    reserved</span><br /><span class="line"> 12    16:16 alias required</span><br /><span class="line"> 13    &#34;BIG&#34; (Huge: 32-bit)</span><br /><span class="line"> 14    conforming</span><br /><span class="line"> 15    &#34;OBJECT_I/O_PRIVILEGE_LEVEL&#34;</span><br /><span class="line"> 16-31 reserved</span><br /><span class="line"></span><br /><span class="line">Format of object page map table entry:</span><br /><span class="line">Offset Size    Description (Table 1299)</span><br /><span class="line"> 00h   BYTE    ??? (usually 00h)</span><br /><span class="line"> 01h   WORD    (big-endian) index to fixup table</span><br /><span class="line">       0000h if no relocation info</span><br /><span class="line"> 03h   BYTE    type (00h hard copy in file, 03h some relocation needed)</span><br /><span class="line"></span><br /><span class="line">Format of resident names table entry:</span><br /><span class="line">Offset Size    Description (Table 1300)</span><br /><span class="line"> 00h   BYTE    length of name</span><br /><span class="line"> 01h  N BYTEs  name</span><br /><span class="line"> N+1  3 BYTEs  ???</span><br /><span class="line"></span><br /><span class="line">Format of LE linear executable entry table:</span><br /><span class="line">Offset Size    Description (Table 1301)</span><br /><span class="line"> 00h   BYTE    number of entries in table</span><br /><span class="line"> 01h 10 BYTEs per entry</span><br /><span class="line">       Offset  Size    Description</span><br /><span class="line">        00h    BYTE    bit flags</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">.NG limit reached, continued in next section...</span></span><br /></pre>
  
  
  


      </article>

    </section>

    
      <footer>
        <nav class="box">
          <dl>
            <dt>Generated</dt><dd>2025-12-02 09:10:33</dd>
            <dt>Generator</dt><dd><a href="https://ng2web.davep.dev">ng2web v1.2.0 (ngdb v1.1.0)</a></dd>
          </dl>
        </nav>
      </footer>
    

  </body>

</html>

