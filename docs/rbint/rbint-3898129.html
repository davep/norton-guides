





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Interrupts</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-3897740.html">
    <link rel="next" href="rbint-3904447.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="../index.html">Guides</a></li>


          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-3897740.html">Previous</a></li>


          

<li><a href="rbint-3870311.html">Up</a></li>


          

<li><a href="rbint-3904447.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>Lists</li>
            <ul>
              <li><a href="index.html">Comments</a></li>
              <li><a href="rbint-7995.html">Interrupts</a></li>
              <li><a href="rbint-15401.html">Glossary</a></li>
              <li><a href="rbint-64347.html">Memory</a></li>
              <li><a href="rbint-180090.html">CMOS</a></li>
              <li><a href="rbint-250757.html">86 Bugs</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Int 2F Fn 2780  U - Novell Dos 7 - Emm386.exe - Multitasking Api - Superv</span>  [<span class="ngb">m</span>]</span><br /><span class="line"></span><br /><span class="line">   AX = 2780h</span><br /><span class="line">   CL = 01h (module: Supervisor)</span><br /><span class="line">   CH = subfunction</span><br /><span class="line">       00h unused</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = status (0002h) (see #2426)</span><br /><span class="line">       01h unused</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = status (0002h) (see #2426)</span><br /><span class="line">       02h &#34;Z_ModuleReg&#34; register an OS module</span><br /><span class="line">       EBX = module number (0005h-000Fh)</span><br /><span class="line">       DS:EDX -&gt; module descriptor (see #2428)</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = status (0000h,0030h) (see #2426)</span><br /><span class="line">       03h allocate SYSDAT memory</span><br /><span class="line">       DX = number of ??? to allocate</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = status (0000h,0003h) (see #2426)</span><br /><span class="line">       04h get selector to SYSDAT</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = 0000h (successful)</span><br /><span class="line">           BX = selector for EMM386 data segment</span><br /><span class="line">           EBX high word cleared</span><br /><span class="line">       05h &#34;Z_MoveReal&#34; relocate segment into extended memory</span><br /><span class="line">       DS:EDX -&gt; descriptor parameter block</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> ECX = status (00h,03h,31h,32h) (see #2426)</span><br /><span class="line">           ---if successful---</span><br /><span class="line">           parameter block filled</span><br /><span class="line">       06h &#34;Z_Reboot&#34; return to real mode via triple fault</span><br /><span class="line">       07h debugger break</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Note:</span>   calls INT 03, then INT 21/AH=02h to output a question</span><br /><span class="line">             mark</span><br /><span class="line">       08h &#34;X_ForeCheck&#34; check if domain is in foreground</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = 0000h (successful)</span><br /><span class="line">           EBX = ??? (0 or 2)</span><br /><span class="line">       09h register VxD with system</span><br /><span class="line">       0Ah unload VxD hook</span><br /><span class="line">       0Bh indicate end of initialization phase</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = status (0002h) (see #2426)</span><br /><span class="line">       0Ch &#34;F_AllocWindow&#34; allocate 4K mapping window</span><br /><span class="line">       0Dh &#34;F_RegisterBoot&#34; register reboot addresses</span><br /><span class="line">       EBX = ???</span><br /><span class="line">       EDX = ???</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> ???</span><br /><span class="line">       0Eh &#34;F_EnquireBoot&#34; check if reboot active</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = 0000h (successful)</span><br /><span class="line">           BL = ???     \ or BX = 0000h</span><br /><span class="line">           BH = ???     /</span><br /><span class="line">       0Fh get debugging level</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = 0000h (successful)</span><br /><span class="line">           EBX = new value for debugging level</span><br /><span class="line">       10h set debugging level</span><br /><span class="line">       EDX = ???</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = 0000h (successful)</span><br /><span class="line">           EBX = old value of debugging level</span><br /><span class="line">       11h installation check (documented)</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = status</span><br /><span class="line">               0000h if multitasker is installed</span><br /><span class="line">               EBX = version (0100h for v1.00)</span><br /><span class="line">               1101h if multitasker is not present</span><br /><span class="line">       12h &#34;F_V86BPInstall&#34; install V86 breakpoint</span><br /><span class="line">       DX = ???</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = 0000h (successful)</span><br /><span class="line">           AX = old value of ???</span><br /><span class="line">       13h &#34;F_V86BPRemove&#34; remove V86 breakpoint</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = status (0000h,003Fh) (see #2426)</span><br /><span class="line">           AX = ???</span><br /><span class="line">       14h &#34;F_V86BPOffer&#34; indicate INT 03 to be used as V86 breakpoint</span><br /><span class="line">       EDX = linear address ??? of INT 03 instruction for breakpoint</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = status (0000h,003Fh) (see #2426)</span><br /><span class="line">       15h &#34;F_LoaderCleanup&#34; offer opportunity to clean up</span><br /><span class="line">       BX = segment of ???</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = 0000h (successful)</span><br /><span class="line">           BX = segment of ???</span><br /><span class="line">       16h &#34;F_RegisterVxDWindow&#34; register VxD mapping window</span><br /><span class="line">       17h &#34;F_RegisterPNW&#34; register Personal NetWare information</span><br /><span class="line">       EBX = subfunction (0-2)</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = status (0002h if EBX&gt;2) (see #2426)</span><br /><span class="line">           ???</span><br /><span class="line">       18h unused</span><br /><span class="line"></span><br /><span class="line">       <span class="ngb">Return:</span> CX = status (0002h) (see #2426)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Return:</span> CX = status (most subfunctions)</span><br /><span class="line">   (E)AX and/or (E)BX contain return values, depending on function</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Notes:</span> called by DPMS.EXE and EMM386.EXE</span><br /><span class="line">   this API is only available if AX=12FFh/BX=0EDCh returns successfully;</span><br /><span class="line">     because the request is handled on the initial trap to the memory</span><br /><span class="line">     manager caused by INT instructions, this API must be invoked with</span><br /><span class="line">     an actual INT 2F instruction instead of some simulation such as a</span><br /><span class="line">     far call to the address in the interrupt vector table</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> AX=12FFh/BX=0EDCh,AX=2780h/CL=02h,AX=2780h/CL=03h,AX=2780h/CL=04h</span><br /><span class="line"></span><br /><span class="line">(Table 2426)</span><br /><span class="line">Values for Novell DOS 7 EMM386 function status:</span><br /><span class="line"> 0000h successful</span><br /><span class="line"> 0001h not implemented</span><br /><span class="line"> 0002h invalid subfunction</span><br /><span class="line"> 0003h unable to find memory</span><br /><span class="line"> 0004h invalid flag (semaphore) number</span><br /><span class="line"> 0005h flag (semaphore) overrun</span><br /><span class="line"> 0006h flag (semaphore) underrun</span><br /><span class="line"> 0007h no queue handles available</span><br /><span class="line"> 0009h no queue buffers available</span><br /><span class="line"> 000Ah queue is in use</span><br /><span class="line"> 000Bh invalid process handle</span><br /><span class="line"> 000Ch no process handles available</span><br /><span class="line"> 000Dh queue access not permitted</span><br /><span class="line"> 000Eh queue is empty</span><br /><span class="line"> 000Fh queue is full</span><br /><span class="line"> 0012h no memory handles available</span><br /><span class="line"> 0014h can&#39;t find process in process list</span><br /><span class="line"> 001Bh invalid memory handle</span><br /><span class="line"> 0023h unable to terminate process</span><br /><span class="line"> 002Ah flag set ignored</span><br /><span class="line"> 002Dh no more system flags</span><br /><span class="line"> 002Eh flag (semaphore) not in idle state</span><br /><span class="line"> 002Fh flag (semaphore) wait timed out</span><br /><span class="line"> 0030h bad module number in CL</span><br /><span class="line"> 0031h bad descriptor</span><br /><span class="line">   invalid value for DESC_PB_SINFO in a descriptor parameter block</span><br /><span class="line"> 0032h no free descriptors</span><br /><span class="line"> 0033h error while locking/unlocking a page</span><br /><span class="line"> 0034h error getting or setting a page</span><br /><span class="line"> 0035h no pages available</span><br /><span class="line"> 0036h invalid domain</span><br /><span class="line"> 0037h process already frozen</span><br /><span class="line"> 0038h process not frozen</span><br /><span class="line"> 0039h fork failure (no registered swaplist)</span><br /><span class="line"> 003Ah page already free</span><br /><span class="line"> 003Bh page already allocated</span><br /><span class="line"> 003Ch unable to switch tasks</span><br /><span class="line"> 003Dh attempted to free critical section which is not active</span><br /><span class="line"> 003Eh too many active critical sections</span><br /><span class="line"> 003Fh ???</span><br /><span class="line"> 41FFh current domain is invalid, or no domain in context</span><br /><span class="line"> 42FFh domain ID is not a valid descriptor</span><br /><span class="line"> 43FFh domain creation still in progress</span><br /><span class="line"> 44FFh domain currently being deleted</span><br /><span class="line"> 45FFh task manager is busy, cannot unload it</span><br /><span class="line"> 46FFh task manager already loaded</span><br /><span class="line"> 47FFh task manager not yet loaded</span><br /><span class="line"> 48FFh cannot save/restore because prior switch not complete</span><br /><span class="line"> 49FFh console already has owner</span><br /><span class="line"> 4BFFh unsupported opcode</span><br /><span class="line"> 4CFFh 32-bit address prefix not supported</span><br /><span class="line"> 4FFFh timeout, but not on timer queue</span><br /><span class="line"> 50FFh unable to lock timer queue</span><br /><span class="line"> 53FFh unable to switch while in Global Message Mode</span><br /><span class="line"> 54FFh error while setting Global Message Mode</span><br /><span class="line"> 55FFh not in Global Message Mode</span><br /><span class="line"> 56FFh system already in Domain Message Mode</span><br /><span class="line"> 57FFh not in Domain Message Mode</span><br /><span class="line"> 58FFh unable to allocate timeout structure</span><br /><span class="line"> 59FFh unsupported video type</span><br /><span class="line"> 5AFFh function not handled by any VM</span><br /><span class="line"> 5BFFh error in Serial..Set call</span><br /><span class="line"> 5CFFh error in Parallel..Set call</span><br /><span class="line"> 5DFFh domain list overflowed</span><br /><span class="line"> 5FFFh unable to free domain while in nobuffers mode</span><br /><span class="line"></span><br /><span class="line">Format of Novell DOS/OpenDOS EMM386 descriptor parameter block:</span><br /><span class="line">Offset Size    Description (Table 2427)</span><br /><span class="line"> 00h   DWORD   &#34;DESC_PB_BASE&#34;</span><br /><span class="line"> 04h   DWORD   &#34;DESC_PB_LIMIT&#34;</span><br /><span class="line"> 08h   WORD    &#34;DESC_PB_SEL&#34;</span><br /><span class="line"> 0Ah   BYTE    &#34;DESC_PB_MINFO&#34;</span><br /><span class="line"> 0Bh   BYTE    &#34;DESC_PB_SINFO&#34;</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #2428</span><br /><span class="line"></span><br /><span class="line">Format of Novell DOS/OpenDOS EMM386 module descriptor:</span><br /><span class="line">Offset Size    Description (Table 2428)</span><br /><span class="line"> 00h 12 BYTEs  descriptor parameter block (see #2427)</span><br /><span class="line"> 0Ch   DWORD   -&gt; module entry point</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  for function &#34;Z_ModuleReg&#34;, only DESC_PB_SEL and the module entry point</span><br /><span class="line">     need to be initialized before calling EMM386</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #2427</span><br /></pre>
  
  
  


      </article>

    </section>

  </body>

</html>

