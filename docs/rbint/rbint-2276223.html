





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="rbint-style.css">
    <title>Ralf Brown » Lists » Interrupts</title>
    <meta name="description" content="Ralf Brown">
    <link rel="prev" href="rbint-2275601.html">
    <link rel="next" href="rbint-2287707.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="rbint-about.html">About</a></li>


          

<li><a href="rbint-2275601.html">Previous</a></li>


          

<li><a href="rbint-2204700.html">Up</a></li>


          

<li><a href="rbint-2287707.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>Lists</li>
            <ul>
              <li><a href="index.html">Comments</a></li>
              <li><a href="rbint-7995.html">Interrupts</a></li>
              <li><a href="rbint-15401.html">Glossary</a></li>
              <li><a href="rbint-64347.html">Memory</a></li>
              <li><a href="rbint-180090.html">CMOS</a></li>
              <li><a href="rbint-250757.html">86 Bugs</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"></span><br /><span class="line"><span class="ngu">Int 21 Fn 4402  - Network Driver Interface Specification (ndis) 2.0.1 - P</span>  [<span class="ngb">N</span>]</span><br /><span class="line"></span><br /><span class="line">   AX = 4402h</span><br /><span class="line">   BX = file handle for device &#34;PROTMAN$&#34;</span><br /><span class="line">   CX = 000Eh (size of request block)</span><br /><span class="line">   DS:DX -&gt; request block (see #1111,#1112,#1113,#1114,#1115,#1119,#1120)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Return:</span> CF clear if successful</span><br /><span class="line">       AX = number of bytes actually read</span><br /><span class="line">   CF set on error</span><br /><span class="line">       AX = error code (01h,05h,06h,0Dh) (see #1366 at AH=59h/BX=0000h)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> AX=4402h&#34;FTPSOFT&#34;</span><br /><span class="line"></span><br /><span class="line">Format of NDIS request block for GetProtocolManagerInfo:</span><br /><span class="line">Offset Size    Description (Table 1111)</span><br /><span class="line"> 00h   WORD    01h</span><br /><span class="line"> 02h   WORD    returned status (see #1121)</span><br /><span class="line"> 04h   DWORD   returned pointer to structure representing parsed user config</span><br /><span class="line"> 08h   DWORD   unused</span><br /><span class="line"> 0Ch   WORD    returned BCD version of NDIS on which Protocol Manager is based</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1112,#1113,#1114,#1115,#1116,#1117,#1118,#1119,#1120</span><br /><span class="line"></span><br /><span class="line">Format of NDIS request block for RegisterModule:</span><br /><span class="line">Offset Size    Description (Table 1112)</span><br /><span class="line"> 00h   WORD    02h</span><br /><span class="line"> 02h   WORD    returned status (see #1121)</span><br /><span class="line"> 04h   DWORD   pointer to module&#39;s common characteristics table (see #1122)</span><br /><span class="line"> 08h   DWORD   pointer to list of modules to which the module is to be bound</span><br /><span class="line"> 0Ch   WORD    unused</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1111,#1113,#1114,#1115,#1116,#1117,#1118,#1119,#1120</span><br /><span class="line"></span><br /><span class="line">Format of NDIS request block for BindAndStart:</span><br /><span class="line">Offset Size    Description (Table 1113)</span><br /><span class="line"> 00h   WORD    03h</span><br /><span class="line"> 02h   WORD    returned status (see #1121)</span><br /><span class="line"> 04h   DWORD   caller&#39;s virtual address in FailingModules structure</span><br /><span class="line"> 08h   DWORD   unused</span><br /><span class="line"> 0Ch   WORD    unused</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1111,#1112,#1114,#1115,#1116,#1117,#1118,#1119,#1120</span><br /><span class="line"></span><br /><span class="line">Format of NDIS request block for GetProtocolManagerLinkage:</span><br /><span class="line">Offset Size    Description (Table 1114)</span><br /><span class="line"> 00h   WORD    04h</span><br /><span class="line"> 02h   WORD    returned status (see #1121)</span><br /><span class="line"> 04h   DWORD   returned dispatch point</span><br /><span class="line"> 08h   DWORD   unused</span><br /><span class="line"> 0Ch   WORD    returned protocol manager DS</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  the dispatch point may be called as follows instead of using this IOCTL</span><br /><span class="line">   STACK: WORD  protocol manager DS</span><br /><span class="line">          DWORD pointer to request block</span><br /><span class="line"></span><br /><span class="line">   <span class="ngb">Return:</span> AX = returned status</span><br /><span class="line">       STACK popped</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1111,#1112,#1113,#1115,#1116,#1117,#1118,#1119,#1120</span><br /><span class="line"></span><br /><span class="line">Format of NDIS request block for GetProtocolIniPath:</span><br /><span class="line">Offset Size    Description (Table 1115)</span><br /><span class="line"> 00h   WORD    05h</span><br /><span class="line"> 02h   WORD    returned status (see #1121)</span><br /><span class="line"> 04h   DWORD   pointer to a buffer for the ASCIZ pathname of PROTOCOL.INI</span><br /><span class="line"> 08h   DWORD   unused</span><br /><span class="line"> 0Ch   WORD    buffer length</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1111,#1112,#1113,#1114,#1116,#1117,#1118,#1119,#1120</span><br /><span class="line"></span><br /><span class="line">Format of NDIS request block for RegisterProtocolManagerInfo:</span><br /><span class="line">Offset Size    Description (Table 1116)</span><br /><span class="line"> 00h   WORD    06h</span><br /><span class="line"> 02h   WORD    returned status (see #1121)</span><br /><span class="line"> 04h   DWORD   pointer to structure containing parsed user config file</span><br /><span class="line"> 08h   DWORD   unused</span><br /><span class="line"> 0Ch   WORD    length of structure</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1111,#1112,#1113,#1114,#1115,#1117,#1118,#1119,#1120</span><br /><span class="line"></span><br /><span class="line">Format of NDIS request block for InitAndRegister:</span><br /><span class="line">Offset Size    Description (Table 1117)</span><br /><span class="line"> 00h   WORD    07h</span><br /><span class="line"> 02h   WORD    returned status (see #1121)</span><br /><span class="line"> 04h   DWORD   unused</span><br /><span class="line"> 08h   DWORD   poitner to ASCIZ name of the module to be prebind initialized</span><br /><span class="line"> 0Ch   WORD    unused</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1111,#1112,#1113,#1114,#1115,#1116,#1118,#1119,#1120</span><br /><span class="line"></span><br /><span class="line">Format of NDIS request block for UnbindAndStop:</span><br /><span class="line">Offset Size    Description (Table 1118)</span><br /><span class="line"> 00h   WORD    08h</span><br /><span class="line"> 02h   WORD    returned status (see #1121)</span><br /><span class="line"> 04h   DWORD   failing modules as for BindAndStart</span><br /><span class="line"> 08h   DWORD   if not 0000h:0000h, pointer to ASCIZ name of module to unbind</span><br /><span class="line">       if 0000h:0000h, terminate a set of previously dynamically</span><br /><span class="line">         bound protocol modules</span><br /><span class="line"> 0Ch   WORD    unused</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1111,#1112,#1113,#1114,#1115,#1116,#1117,#1119,#1120</span><br /><span class="line"></span><br /><span class="line">Format of NDIS request block for BindStatus:</span><br /><span class="line">Offset Size    Description (Table 1119)</span><br /><span class="line"> 00h   WORD    09h</span><br /><span class="line"> 02h   WORD    returned status (see #1121)</span><br /><span class="line"> 04h   DWORD   must be 0000h:0000h</span><br /><span class="line">       on return, points to root tree</span><br /><span class="line"> 08h   DWORD   0000h:0000h</span><br /><span class="line"> 0Ch   WORD    unused under DOS</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1111,#1112,#1113,#1114,#1115,#1116,#1117,#1118,#1120</span><br /><span class="line"></span><br /><span class="line">Format of NDIS request block for RegisterStatus:</span><br /><span class="line">Offset Size    Description (Table 1120)</span><br /><span class="line"> 00h   WORD    0Ah</span><br /><span class="line"> 02h   WORD    returned status (0000h, 0008h, 002Ch) (see #1121)</span><br /><span class="line"> 04h   DWORD   0000h:0000h</span><br /><span class="line"> 08h   DWORD   pointer to 16-byte ASCIZ module name</span><br /><span class="line"> 0Ch   WORD    0000h</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  not supported by the 10NET v5.0 PROTMAN$ driver</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1111,#1112,#1113,#1114,#1115,#1116,#1117,#1118,#1119</span><br /><span class="line"></span><br /><span class="line">(Table 1121)</span><br /><span class="line">Values for NDIS status code:</span><br /><span class="line"> 0000h success</span><br /><span class="line"> 0001h wait for release--protocol has retained control of the data buffer</span><br /><span class="line"> 0002h request queued</span><br /><span class="line"> 0003h frame not recognized</span><br /><span class="line"> 0004h frame rejected</span><br /><span class="line"> 0005h frame should be forwarded</span><br /><span class="line"> 0006h out of resource</span><br /><span class="line"> 0007h invalid parameter</span><br /><span class="line"> 0008h invalid function</span><br /><span class="line"> 0009h not supported</span><br /><span class="line"> 000Ah hardware error</span><br /><span class="line"> 000Bh transmit error</span><br /><span class="line"> 000Ch unrecognized destination</span><br /><span class="line"> 000Dh buffer too small</span><br /><span class="line"> 0020h already started</span><br /><span class="line"> 0021h binding incomplete</span><br /><span class="line"> 0022h driver not initialized</span><br /><span class="line"> 0023h hardware not found</span><br /><span class="line"> 0024h hardware failure</span><br /><span class="line"> 0025h configuration failure</span><br /><span class="line"> 0026h interrupt conflict</span><br /><span class="line"> 0027h MAC incompatible</span><br /><span class="line"> 0028h initialization failed</span><br /><span class="line"> 0029h no binding</span><br /><span class="line"> 002Ah network may be disconnected</span><br /><span class="line"> 002Bh incompatible OS version</span><br /><span class="line"> 002Ch already registered</span><br /><span class="line"> 002Dh path not found</span><br /><span class="line"> 002Eh insufficient memory</span><br /><span class="line"> 002Fh info not found</span><br /><span class="line"> 00FFh general failure</span><br /><span class="line"> F000h-FFFFh reserved for vendor-specific codes, treated as general failure</span><br /><span class="line"></span><br /><span class="line">Format of NDIS common characteristics table:</span><br /><span class="line">Offset Size    Description (Table 1122)</span><br /><span class="line"> 00h   WORD    size of table in bytes</span><br /><span class="line"> 02h   BYTE    NDIS major version</span><br /><span class="line"> 03h   BYTE    NDIS minor version</span><br /><span class="line"> 04h   WORD    reserved</span><br /><span class="line"> 06h   BYTE    module major version</span><br /><span class="line"> 07h   BYTE    module minor version</span><br /><span class="line"> 08h   DWORD   module function flag bits</span><br /><span class="line">       bit 0: binding at upper boundary supported</span><br /><span class="line">       bit 1: binding at lower boundary supported</span><br /><span class="line">       bit 2: dynamically bound</span><br /><span class="line">       bits 3-31 reserved, must be 0</span><br /><span class="line"> 0Ch 16 BYTEs  ASCIZ module name</span><br /><span class="line"> 1Ch   BYTE    upper boundary protocol level (see #1123)</span><br /><span class="line"> 1Dh   BYTE    upper boundary interface type</span><br /><span class="line">       for MACs: 1 = MAC</span><br /><span class="line">       for data links and transports: to be defined</span><br /><span class="line">       for session: 1 = NCB</span><br /><span class="line">       any level: 0 = private (ISV-defined)</span><br /><span class="line"> 1Eh   BYTE    lower boundary protocol level (see #1123)</span><br /><span class="line"> 1Fh   BYTE    lower boundary interface type</span><br /><span class="line">       same as offset 1Dh</span><br /><span class="line"> 20h   WORD    module ID filled in by protocol manager</span><br /><span class="line"> 22h   WORD    module DS</span><br /><span class="line"> 24h   DWORD   system request entry point</span><br /><span class="line"> 28h   DWORD   pointer to service-specific characteristics (see #1125,#1127)</span><br /><span class="line">       0000h:0000h if none</span><br /><span class="line"> 2Ch   DWORD   pointer to service-specific status, or 0000h:0000h if none</span><br /><span class="line">         (see #1128)</span><br /><span class="line"> 30h   DWORD   pointer to upper dispatch table (see #1124)</span><br /><span class="line">       0000h:0000h if none</span><br /><span class="line"> 34h   DWORD   pointer to lower dispatch table (see #1124)</span><br /><span class="line">       0000h:0000h if none</span><br /><span class="line"> 38h  2 DWORDs reserved, must be 0</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">Note:</span>  for compatibility with NDIS 1.x.x, a major version of 00h is</span><br /><span class="line">     interpreted as 01h</span><br /><span class="line"></span><br /><span class="line">(Table 1123)</span><br /><span class="line">Values for NDIS boundary protocol level:</span><br /><span class="line"> 00h   physical</span><br /><span class="line"> 01h   Media Access Control</span><br /><span class="line"> 02h   Data link</span><br /><span class="line"> 03h   network</span><br /><span class="line"> 04h   transport</span><br /><span class="line"> 05h   session</span><br /><span class="line"> FFh   not specified</span><br /><span class="line"></span><br /><span class="line">Format of NDIS dispatch table:</span><br /><span class="line">Offset Size    Description (Table 1124)</span><br /><span class="line"> 00h   DWORD   -&gt; common characteristics table (see #1122)</span><br /><span class="line"> 04h  4 BYTEs  ???</span><br /><span class="line"> 08h   DWORD   -&gt; ??? function (called with 12 bytes of stack arguments)</span><br /><span class="line"> 0Ch   DWORD   -&gt; ??? function (called with 10 bytes of stack arguments)</span><br /><span class="line"> 10h   DWORD   -&gt; ??? function (called with 16 bytes of stack arguments)</span><br /><span class="line"> 14h   DWORD   -&gt; ??? function (called with 4 bytes of stack arguments)</span><br /><span class="line"> 18h   DWORD   -&gt; ??? function (called with 18 bytes of stack arguments)</span><br /><span class="line"> 1Ch   DWORD   -&gt; ??? function (called with 12 bytes of stack arguments)</span><br /><span class="line"></span><br /><span class="line">Format of MAC Service-Specific Characteristics Table:</span><br /><span class="line">Offset Size    Description (Table 1125)</span><br /><span class="line"> 00h   WORD    length of table in bytes</span><br /><span class="line"> 02h 16 BYTEs  ASCIZ MAC type name, &#34;802.3&#34;, &#34;802.4&#34;, &#34;802.5&#34;, &#34;802.6&#34;, &#34;DIX&#34;,</span><br /><span class="line">         &#34;DIX+802.3&#34;, &#34;APPLETALK&#34;, &#34;ARCNET&#34;, &#34;FDDI&#34;, &#34;SDLC&#34;, &#34;BSC&#34;,</span><br /><span class="line">         &#34;HDLC&#34;, or &#34;ISDN&#34;</span><br /><span class="line"> 12h   WORD    length of station addresses in bytes</span><br /><span class="line"> 14h 16 BYTEs  permanent station address</span><br /><span class="line"> 24h 16 BYTEs  current station address</span><br /><span class="line"> 34h   DWORD   current functional adapter address (00000000h if none)</span><br /><span class="line"> 38h   DWORD   pointer to multicast address list</span><br /><span class="line"> 3Ch   DWORD   link speed in bits/sec</span><br /><span class="line"> 40h   DWORD   service flags (see #1126)</span><br /><span class="line"> 44h   WORD    maximum frame size which may be both sent and received</span><br /><span class="line"> 46h   DWORD   total transmit buffer capacity in bytes</span><br /><span class="line"> 4Ah   WORD    transmit buffer allocation block size in bytes</span><br /><span class="line"> 4Ch   DWORD   total receive buffer capacity in bytes</span><br /><span class="line"> 50h   WORD    receive buffer allocation block size in bytes</span><br /><span class="line"> 52h  3 BYTEs  IEEE vendor code</span><br /><span class="line"> 55h   BYTE    vendor adapter code</span><br /><span class="line"> 56h   DWORD   pointer to ASCIZ vendor adapter description</span><br /><span class="line"> 5Ah   WORD    IRQ used by adapter</span><br /><span class="line"> 5Ch   WORD    transmit queue depth</span><br /><span class="line"> 5Eh   WORD    maximum supported number of data blocks in buffer descriptors</span><br /><span class="line"> 60h  N BYTEs  vendor-specific info</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1127</span><br /><span class="line"></span><br /><span class="line">Bitfields for service flags:</span><br /><span class="line">Bit(s) Description (Table 1126)</span><br /><span class="line"> 0 supports broadcast</span><br /><span class="line"> 1 supports multicast</span><br /><span class="line"> 2 supports functional/group addressing</span><br /><span class="line"> 3 supports promiscuous mode</span><br /><span class="line"> 4 station address software settable</span><br /><span class="line"> 5 statistics always current</span><br /><span class="line"> 6 supports InitiateDiagnostics</span><br /><span class="line"> 7 supports loopback</span><br /><span class="line"> 8 MAC does primarily ReceiveChain indications instead of ReceiveLookahead</span><br /><span class="line">   indications</span><br /><span class="line"> 9 supports IBM source routing</span><br /><span class="line"> 10    supports MAC reset</span><br /><span class="line"> 11    supports Open/Close adapter</span><br /><span class="line"> 12    supports interrupt request</span><br /><span class="line"> 13    supports source routing bridge</span><br /><span class="line"> 14    supports GDT virtual addresses (OS/2 version)</span><br /><span class="line"> 15    multiple TransferDatas allowed durign a single indication</span><br /><span class="line"> 16    MAC normally sets FrameSize = 0 in ReceiveLookahead</span><br /><span class="line"> 17-31 reserved, must be 0</span><br /><span class="line"></span><br /><span class="line">Format of NetBIOS Service-Specific Characteristics Table:</span><br /><span class="line">Offset Size    Description (Table 1127)</span><br /><span class="line"> 00h   WORD    length of table in bytes</span><br /><span class="line"> 02h 16 BYTEs  ASCIZ type name of NetBIOS module</span><br /><span class="line"> 12h   WORD    NetBIOS module code</span><br /><span class="line"> 14h  N BYTEs  vendor-specific info</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">See Also:</span> #1125</span><br /><span class="line"></span><br /><span class="line">Format of MAC Service-Specific Status Table:</span><br /><span class="line">Offset Size    Description (Table 1128)</span><br /><span class="line"> 00h   WORD    length of table in bytes</span><br /><span class="line"> 02h   DWORD   seconds since 0:00 1/1/70 when diagnostics last run</span><br /><span class="line">       (FFFFFFFFh = never)</span><br /><span class="line"> 06h   DWORD   MAC status bits (see #1129)</span><br /><span class="line"> 0Ah   WORD    current packet filter flags (see #1130)</span><br /><span class="line"> 0Ch   DWORD   pointer to media-specific status table or 0000h:0000h</span><br /><span class="line"> 10h   DWORD   seconds past 0:00 1/1/70 of last ClearStatistics</span><br /><span class="line"> 14h   DWORD   total frames received (FFFFFFFFh = not counted)</span><br /><span class="line"> 18h   DWORD   frames with CRC error (FFFFFFFFh = not counted)</span><br /><span class="line"> 1Ch   DWORD   total bytes received (FFFFFFFFh = not counted)</span><br /><span class="line"> 20h   DWORD   frames discarded--no buffer space (FFFFFFFFh = not counted)</span><br /><span class="line"> 24h   DWORD   multicast frames received (FFFFFFFFh = not counted)</span><br /><span class="line"> 28h   DWORD   broadcast frames received (FFFFFFFFh = not counted)</span><br /><span class="line"> 2Ch   DWORD   frames with errors (FFFFFFFFh = not counted)</span><br /><span class="line"> 30h   DWORD   overly large frames (FFFFFFFFh = not counted)</span><br /><span class="line"> 34h   DWORD   frames less than minimum size (FFFFFFFFh = not counted)</span><br /><span class="line"> 38h   DWORD   multicast bytes received (FFFFFFFFh = not counted)</span><br /><span class="line"> 3Ch   DWORD   broadcast bytes received (FFFFFFFFh = not counted)</span><br /><span class="line"> 40h   DWORD   frames discarded--hardware error (FFFFFFFFh = not counted)</span><br /><span class="line"> 44h   DWORD   total frames transmitted (FFFFFFFFh = not counted)</span><br /><span class="line"> 48h   DWORD   total bytes transmitted (FFFFFFFFh = not counted)</span><br /><span class="line"> 4Ch   DWORD   multicast frames transmitted (FFFFFFFFh = not counted)</span><br /><span class="line"> 50h   DWORD   broadcast frames transmitted (FFFFFFFFh = not counted)</span><br /><span class="line"> 54h   DWORD   broadcast bytes transmitted (FFFFFFFFh = not counted)</span><br /><span class="line"> 58h   DWORD   multicast bytes transmitted (FFFFFFFFh = not counted)</span><br /><span class="line"> 5Ch   DWORD   frames not transmitted--timeout (FFFFFFFFh = not counted)</span><br /><span class="line"> 60h   DWORD   frames not transmitted--hardware error (FFFFFFFFh = not countd)</span><br /><span class="line"> 64h  N BYTEs  vendor-specific info</span><br /><span class="line"></span><br /><span class="line">Bitfields for MAC status bits:</span><br /><span class="line">Bit(s) Description (Table 1129)</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">.NG limit reached, continued in next section...</span></span><br /></pre>
  
  
  


      </article>

    </section>

  </body>

</html>

