





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="x86-style.css">
    <title>iAPx86 » FPU » Instruction set</title>
    <meta name="description" content="iAPx86">
    <link rel="prev" href="x86-291419.html">
    <link rel="next" href="x86-294693.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="x86-about.html">About</a></li>


          

<li><a href="x86-291419.html">Previous</a></li>


          

<li><a href="x86-245307.html">Up</a></li>


          

<li><a href="x86-294693.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>CPU</li>
            <ul>
              <li><a href="index.html">Instruction set</a></li>
              <li><a href="x86-175915.html">Registers</a></li>
              <li><a href="x86-190707.html">Protection, privilege</a></li>
              <li><a href="x86-224627.html">Exceptions</a></li>
              <li><a href="x86-225699.html">Addressing modes</a></li>
              <li><a href="x86-229455.html">Opcodes</a></li>
              
            </ul>
            <li>FPU</li>
            <ul>
              <li><a href="x86-245307.html">Instruction set</a></li>
              <li><a href="x86-307843.html">Registers, data types</a></li>
              
            </ul>
            <li>MMX</li>
            <ul>
              <li><a href="x86-318646.html">Instruction set</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"><span class="ngb">FSTSW           Store status word                    Exceptions: None</span></span><br /><span class="line"><span class="ngb">FNSTSW          Store status word, no wait</span>           C3 C2 C1 C0: ? ? ? ?</span><br /><span class="line"></span><br /><span class="line"><span class="ngb">FSTSW</span> destination</span><br /><span class="line"><span class="ngb">FNSTSW</span> destination</span><br /><span class="line"></span><br /><span class="line">        <span class="ngb">Logic</span>   destination ← status word</span><br /><span class="line"></span><br /><span class="line">    FSTSW stores the current value of the status word in destination,</span><br /><span class="line">    a 16-bit memory location, or -- in the 287+ -- the AX register of</span><br /><span class="line">    the 80x86. FSTSW checks for unmasked FP error conditions before</span><br /><span class="line">    storing the status word; FNSTSW does not make this check.</span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line">    <span class="ngb">Note</span></span><br /><span class="line">    FSTSW/FNSTSW are primarily used for conditional branching after a</span><br /><span class="line">    comparison instruction (FPREM, FPREM1, or FXAM). They can also be</span><br /><span class="line">    used to invoke exception handlers (by polling the exception bits) in</span><br /><span class="line">    environments that do not use interrupts.</span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line">        <span class="ngb">Example</span></span><br /><span class="line">        p287</span><br /><span class="line">        fstsw ax        ; read FPU status word</span><br /><span class="line">        sahf            ; copy condition codes to flags</span><br /><span class="line">        jc    @@c0      ; jc ~ C0, jp ~ C2, jz ~ C3</span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line">    <span class="ngb">Opcode      Format</span></span><br /><span class="line">    9B DF /7    FSTSW m16</span><br /><span class="line">    9B DF E0    FSTSW AX</span><br /><span class="line">    DF /7       FNSTSW m16</span><br /><span class="line">    DF E0       FNSTSW AX</span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line">    <span class="ngb">Timing</span></span><br /><span class="line">    Variations/</span><br /><span class="line">    operand       8087         287        387      486     Pentium</span><br /><span class="line">    fstsw  m16   12-18        12-18       15        3       2      NP</span><br /><span class="line">    fstsw  ax      -          10-16       13        3       2      NP</span><br /><span class="line">    fnstsw m16   12-18        12-18       15        3       2      NP</span><br /><span class="line">    fnstsw ax      -          10-16       13        3       2      NP</span><br /><span class="line"></span><br /><span class="line">                The wait version may take additional cycles</span><br /></pre>
  
  
  
    <nav class="seeAlso">
      <ul>
        <li>See Also:</li>
        
          <li><a href="x86-310852.html">FPU registers</a></li>
        
          <li><a href="x86-301502.html">FXAM</a></li>
        
          <li><a href="x86-279599.html">FPREM</a></li>
        
          <li><a href="x86-256851.html">FCOMI</a></li>
        
          <li><a href="x86-252847.html">FCMOVcc</a></li>
        
      </ul>
    </nav>
  


      </article>

    </section>

  </body>

</html>

