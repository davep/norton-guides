





<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="generator" content="ng2web v1.1.0 (ngdb v1.1.0)">
    <link rel="stylesheet" type="text/css" href="tasm4-style.css">
    <title>TASM v4.0 » Assembler » Directives</title>
    <meta name="description" content="TASM v4.0">
    <link rel="prev" href="tasm4-21819.html">
    <link rel="next" href="tasm4-24804.html">
    
  </head>

  <body>

    <header>
      <nav class="box">
        <ul>
          

<li><a href="../index.html">Guides</a></li>


          

<li><a href="tasm4-about.html">About</a></li>


          

<li><a href="tasm4-21819.html">Previous</a></li>


          

<li><a href="index.html">Up</a></li>


          

<li><a href="tasm4-24804.html">Next</a></li>


        </ul>
      </nav>
    </header>

    <section>

      <nav class="menu box">
        <ul>
            <li>Assembler</li>
            <ul>
              <li><a href="index.html">Directives</a></li>
              <li><a href="tasm4-124679.html">Operators</a></li>
              <li><a href="tasm4-151581.html">Predefined equates</a></li>
              <li><a href="tasm4-160592.html">Command line</a></li>
              <li><a href="tasm4-189366.html">Symbols &amp; expressions</a></li>
              <li><a href="tasm4-202140.html">Interfacing</a></li>
              <li><a href="tasm4-209306.html">Keywords</a></li>
              <li><a href="tasm4-212771.html">Error messages</a></li>
              
            </ul>
        </ul>
      </nav>

      <article class="box">
        
  
  
    <pre class="entry"><span class="line"><span class="ngb">COMM             Define communal variable                           Directive</span></span><br /><span class="line"></span><br /><span class="line">  <span class="ngb">COMM</span> definition [,definition]...</span><br /><span class="line"></span><br /><span class="line">    Defines a communal variable. Each definition describes a symbol and</span><br /><span class="line">    has the following format:</span><br /><span class="line"></span><br /><span class="line">    [distance] [language] symbolname [<span class="ngb">[</span>count1<span class="ngb">]</span>] :complex_type [:count2]</span><br /><span class="line"></span><br /><span class="line">    - distance can be either NEAR or FAR and defaults to the size of the</span><br /><span class="line">      default data memory model</span><br /><span class="line">    - language is either C, CPP, PASCAL, BASIC, FORTRAN, PROLOG, or</span><br /><span class="line">      NOLANGUAGE and defines any language-specific conventions to be</span><br /><span class="line">      applied to symbolname; temporarily overrides language set with a</span><br /><span class="line">      MODEL statement</span><br /><span class="line">    - symbolname is the communal symbol (or symbols, separated by commas)</span><br /><span class="line">    - if distance is NEAR, the linker uses count1 to calculate the total</span><br /><span class="line">      size of the array; if distance is FAR, the linker uses count2 to</span><br /><span class="line">      indicate how many elements there are of size count1 times the basic</span><br /><span class="line">      element size (determined by type)</span><br /><span class="line">    - complex_type is the data type of the argument; it can be either a</span><br /><span class="line">      simple type or a complex pointer expression</span><br /><span class="line">    - count2 specifies how many items this communal symbol defines</span><br /><span class="line">    - both count1 and count2 default to 1</span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line">    Communal variables function like external variables, with a major</span><br /><span class="line">    difference: COMMs are allocated by the linker. Communal variables are</span><br /><span class="line">    like global variables, but you can&#39;t assign them initial values. Use</span><br /><span class="line">    the GLOBAL directive if you wish to initialize data items that are to</span><br /><span class="line">    be shared between modules. The linker also doesn&#39;t guarantee the</span><br /><span class="line">    allocation of communal variables in any particular order, so you can&#39;t</span><br /><span class="line">    make assumptions about data items allocated by COMM directives on</span><br /><span class="line">    sequential source lines.</span><br /><span class="line"></span><br /><span class="line">    In MASM mode, communal symbols declared outside of any segment are</span><br /><span class="line">    presumed to be reachable via the DS register, which may not always be</span><br /><span class="line">    a valid assumption. Make sure that you either place the correct</span><br /><span class="line">    segment value in DS or use an explicit segment override when referring</span><br /><span class="line">    to these variables. In Ideal mode, Turbo Assembler correctly checks</span><br /><span class="line">    for whether the communal variable is addressable, using any of the</span><br /><span class="line">    current segment registers as described with the ASSUME directive.</span><br /><span class="line"></span><br /><span class="line"></span><br /><span class="line">    Examples:</span><br /><span class="line"></span><br /><span class="line">    COMM buffer:BYTE:512        ; 512 bytes allocated at link time</span><br /><span class="line">    COMM FAR abc[41]:BYTE:10    ; 410 bytes (10 elements of 41 bytes)</span><br /><span class="line">                                ;   allocated at link time</span><br /></pre>
  
  
  
    <nav class="seeAlso">
      <ul>
        <li>See Also:</li>
        
          <li><a href="tasm4-18252.html">ASSUME</a></li>
        
          <li><a href="tasm4-45041.html">EXTRN</a></li>
        
          <li><a href="tasm4-49611.html">GLOBAL</a></li>
        
          <li><a href="tasm4-83858.html">PUBLIC</a></li>
        
          <li><a href="tasm4-84534.html">PUBLICDLL</a></li>
        
          <li><a href="tasm4-192722.html">Address subtypes</a></li>
        
      </ul>
    </nav>
  


      </article>

    </section>

  </body>

</html>

